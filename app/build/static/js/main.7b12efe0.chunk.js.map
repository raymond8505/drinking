{"version":3,"sources":["DataHelper.js","components/Alert.js","components/EditButton.js","components/DeleteButton.js","components/GameListItem.js","components/GameList.js","components/GameSelect.js","components/AddGameForm.js","components/Games.js","components/NotFound.js","components/RuleRow.js","components/RulesList.js","components/AddRulesForm.js","components/ComboCounter.js","components/Game.js","helpers.js","fakeGames.js","components/Loader.js","components/Desktop.js","components/Login.js","base.js","components/Signup.js","components/SessionManager.js","components/App.js","components/Router.js","index.js"],"names":["DataHelper","data","hasData","Object","keys","length","forEach","func","undefined","Error","map","getGameByKey","key","getChildGames","parentKey","games","game","parent_game","gameHasRules","rules","getGameRules","recursive","order","ruleKey","assign","gameKey","parentGame","objectCollectionToArrayWithKey","collection","keyFieldName","arr","obj","push","arrayWithKeyToObjectCollection","sortRules","rulesArr","sort","a","b","dirNum","direction","valA","valB","field","toLowerCase","title","filed","sanitizeForSorting","val","char","startReg","RegExp","endReg","replace","getNewRuleKey","Date","now","getNewGameKey","sortGamesBy","dir","fieldArr","toRet","indexOf","e","console","log","getParentGame","getAncestors","parent","ancestors","curKey","reverse","gameHasOtherUserGames","user","childGames","success","owner","gameHasOtherUserOwnedRules","hasOthers","rule","this","Alert","Tag","props","tag","className","type","children","React","Component","defaultProps","EditButton","state","currentMode","setEditing","editing","setState","handleClick","preventDefault","handler","onClick","role","DeleteButton","GameListItem","titleField","createRef","onAddEditClick","current","value","editGame","index","onDeleteClick","window","confirm","deleteGame","onNameInputKeyPress","which","renderName","input","viewGame","name","ref","onKeyPress","defaultValue","link","Link","to","handleDoubleClick","onCopyClick","copyGame","focus","id","onDoubleClick","canEditGame","canDeleteGame","userLoggedIn","showChildren","canEditRule","canDeleteRule","GameList","renderGameList","GameSelect","innerSelect","test","outPutOptions","options","selected","onChange","includeToplevel","AddGameForm","gameSelect","resetForm","clearForm","onKeyUp","listenForShortcuts","onAddGameClick","addGame","placeholder","Games","canEditRules","canDeleteRules","NotFound","RuleRow","ruleField","drinksField","handleRuleEdit","drinks","ruleObj","editRule","ruleIndex","handleRuleDelete","deleteRule","renderRule","span","renderOwner","ownerhash","getUser","class","email","renderDrinks","disabled","RulesList","currentFilter","filterField","ruleMatchesFilter","ruleText","renderRuleRows","gameIndex","onFilterKeyUp","currentTarget","onHeaderCellClick","target","getAttribute","renderSortLabel","addEventListener","shiftKey","metaKey","ctrlKey","cellPadding","cellSpacing","data-field","AddRulesForm","onWindowKeyPress","altKey","handleAddClick","ruleTitle","addRule","alert","ComboCounter","count","animating","open","maxCombo","animateSpeed","onGlobalKeyPress","addDrink","removeDrink","clearDrinks","setSessionCombo","handleRemoveDrinkClick","animateCount","handleClearDrinksClick","setTimeout","handleAddDrinkClick","calcShotHeight","handleToggleClick","style","height","defaultTypes","Game","titleInput","editButton","shell","onParentChange","newParent","thisGameKey","handleTitleEditClick","renderBreadCrumbs","html","ancestor","i","scrollTo","document","querySelector","innerText","currentComboCount","fakeGames","Loader","message","Desktop","mode","match","params","ID","Login","userField","passwordField","authenticate","pass","error","required","firebaseApp","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","base","Rebase","createClass","database","Signup","passwordField2","signup","pass1","SessionManager","currentSession","keyField","handleCreateSession","createSession","leaveSession","handleJoinSession","joinSession","renderSessionButtons","App","mobile","uid","users","loading","signupError","loginError","loggingIn","sessions","RAYMOND_UID","sessionKeyLength","getCurrentSessionComboCount","inASession","setSession","session","created","getTime","toUpperCase","sessionKeyExists","generateSessionKey","code","Math","round","random","String","fromCharCode","generateUniqueSessionKey","newRule","sanitizeDrinks","gameTitle","newGameKey","copyRules","oldGameKey","newRules","newRuleKey","newKey","history","mobileCheck","matches","authHandler","resp","userExists","addUser","location","pathname","u","p","auth","signInWithEmailAndPassword","then","signInError","catch","logout","signOut","stateUser","hash","createUserWithEmailAndPassword","res","onLoginClick","renderAuthButton","db","hostname","fbRefU","syncState","context","fbRefSessions","fbRef","t","onAuthStateChanged","matchMedia","addListener","view","withRouter","Router","BrowserRouter","Switch","Route","path","render","exact","component"],"mappings":"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","file":"static/js/main.7b12efe0.chunk.js","sourcesContent":["class DataHelper\n{\n    constructor(data)\n    {\n        this.data = data;\n    }\n\n    data = {};\n\n    hasData = () => this.data && Object.keys(this.data).length > 0;\n\n    forEach = (func,data) => {\n\n        if(data === undefined)\n        {\n            throw new Error('DataHelper.forEach requires a data parameter');\n        }\n\n        return Object.keys(data).map(func);\n    }\n\n    getGameByKey = (key) => {\n\n        //console.log(this.data[key]);\n\n        return this.data[key];\n    }\n\n    getChildGames = (parentKey) => {\n\n        //console.log('get child games');\n\n        let games = {};\n\n        Object.keys(this.data).map((key) => {\n\n            let game = this.getGameByKey(key);\n\n            if(game.parent_game === parentKey)\n            {\n                //console.log(game,game.parent_game,'===',parentKey);\n                games[key] = game;\n            }\n\n            return null;\n        });\n\n        //console.log(games);\n\n        return games;//this.sortGamesBy('title','asc',games);\n    }\n\n    gameHasRules = (game) => game.rules && Object.keys(game.rules).length > 0;\n\n    getGameRules = (key,recursive = false,order) => {\n        \n        let game = this.getGameByKey(key);\n        let rules = {};\n\n        if(this.gameHasRules(game))\n        {\n            this.forEach((ruleKey) => {\n                rules[ruleKey] = Object.assign(game.rules[ruleKey],{gameKey : key});\n            },game.rules);\n        }\n        \n        if(recursive && game.parent_game)\n        {\n            let parentGame = this.getGameByKey(game.parent_game);\n\n            if(parentGame)\n            {\n                rules = Object.assign(rules,this.getGameRules(game.parent_game,recursive,order));\n            }\n        }\n\n        return rules;\n    }\n\n    objectCollectionToArrayWithKey = (collection,keyFieldName = 'key') => {\n\n        let arr = [];\n\n        this.forEach((key)=>{\n            var obj = collection[key];\n                obj[keyFieldName] = key;\n\n            arr.push(obj);\n        },collection);\n        return arr;\n    }\n\n    arrayWithKeyToObjectCollection = (arr,keyFieldName = 'key') => {\n\n        let collection = {};\n\n            arr.forEach((obj) => {\n                \n                let key = obj[keyFieldName];\n                \n                obj[keyFieldName] = null;\n\n                collection[key] = obj;\n            });\n\n        return collection;\n    }\n\n    sortRules = (rules,order) => {\n\n        let rulesArr = this.objectCollectionToArrayWithKey(rules);\n\n        //console.log(rulesArr);\n        \n        rulesArr.sort((a,b) => {\n            \n            let dirNum = order.direction == 'asc' ? 1 : -1;\n            let valA = '';\n            let valB = '';\n\n            switch(order.field)\n            {\n                case 'rule' :\n                case 'drinks' :\n                    valA = a[order.field].toLowerCase();\n                    valB = b[order.field].toLowerCase();\n                    break;\n                case 'game' :\n                    valA = this.getGameByKey(a.gameKey).title.toLowerCase();\n                    valB = this.getGameByKey(b.gameKey).title.toLowerCase();\n                    break;\n                default :\n                    valA = a[order.field];\n                    valB = b[order.filed];\n            }\n\n            valA = this.sanitizeForSorting(valA);\n            valB = this.sanitizeForSorting(valB);\n\n            return valA <= valB ? -1 * dirNum : dirNum;\n        });\n\n        //console.log(rulesArr);\n\n        let rulesCollection = this.arrayWithKeyToObjectCollection(rulesArr);\n        \n        return rulesCollection;\n    }\n\n    sanitizeForSorting = (val) => {\n\n        let badChars = ['\"',\"'\",'\\-','\\(','\\)'];\n\n        badChars.forEach((char) => {\n            \n            let startReg = new RegExp(`^[${char}]+`);\n            let endReg = new RegExp(`[${char}]+$`);\n\n            val = val.replace(startReg,'').replace(endReg,'');\n        });\n\n        return val;\n    }\n\n    getNewRuleKey = (gameKey) => {\n\n        return `${gameKey}_rule${Date.now()}`;\n    }\n\n    getNewGameKey = () => `game${Date.now()}`;\n\n    sortGamesBy = (field,dir = 'asc',games) => {\n        \n        if(games == undefined)\n            return  {};\n\n        //console.log('sort games',games);\n        //console.log('sort games',games);\n\n        let fieldArr = []\n        let toRet = {};\n        let dirNum = dir.toLowerCase().indexOf('asc') === 0 ? 1 : -1;\n\n        this.forEach((key) => {\n            let game = this.getGameByKey(key);\n\n            if(!game)\n                return;\n\n            try\n            {\n\n                fieldArr.push(\n                    {\n                        key : key,\n                        [field] : game[field]\n                    }\n                );\n            }\n            catch(e)\n            {\n                console.log(game,e);\n                return;\n            }\n        },games);\n\n        fieldArr.sort((a,b) => {\n\n            switch(typeof a[field])\n            {\n                case 'string' :\n                    return a[field] && b[field] ? a[field].toLowerCase() < b[field].toLowerCase() ? dirNum * -1 : dirNum * 1 : 0;\n            }\n\n        })\n\n        fieldArr.forEach((game) => {\n            toRet[game.key] = this.getGameByKey(game.key);\n        });\n\n        return toRet;\n\n    }\n\n    getParentGame = (key) => {\n\n        let parentGame = null;\n\n        let game = this.getGameByKey(key);\n\n        if(game && game.parent_game)\n        {\n            parentGame = {game : this.data[game.parent_game],key : game.parent_game};\n        }\n\n        return parentGame;\n    }\n\n    getAncestors = (key) => {\n        let ancestors = [];\n        let game = this.getGameByKey(key);\n        let parent; // = this.getParentGame(key);\n        let curKey = key;\n\n        while(parent = this.getParentGame(curKey))\n        {\n            curKey = parent.key;\n            ancestors.push(parent);\n        }\n\n        return ancestors.reverse();\n    }\n\n    gameHasOtherUserGames = (gameKey,user) => {\n        \n        let childGames = this.getChildGames(gameKey);\n        let success = true;\n\n        this.forEach((key) => {\n\n            let game = this.getGameByKey(key);\n\n            if(game.owner != user)\n            {\n                success = false;\n                return;\n            }\n        },childGames);\n\n        return success;\n    }\n\n    gameHasOtherUserOwnedRules = (game,user) => {\n\n        let hasOthers = false;\n\n        this.forEach((key)=>{\n\n            let rule = game.rules[key];\n\n            //console.log(rule);\n            \n            if(rule && Object.keys(rule).length > 0 && rule.owner && rule.owner !== user)\n            {\n                hasOthers = true;\n                return;\n            }\n\n        },game.rules);\n        return hasOthers;\n    }\n}\nexport default DataHelper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Alert extends React.Component\n{\n    static propTypes = {\n        tag : PropTypes.string,\n        type : PropTypes.string\n    };\n    \n    static defaultProps = {\n        tag : 'span',\n        type : 'info'\n    };\n\n    render()\n    {\n        const Tag = `${this.props.tag}`;\n\n        return (\n            <Tag className={`Alert Alert--${this.props.type}`}>\n                {this.props.children}\n            </Tag>);\n    }\n}\n\nexport default Alert;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass EditButton extends React.Component\n{\n    static propTypes = {\n        handler : PropTypes.func.isRequired\n    };\n\n    state = {\n        currentMode : 'display'\n    };\n\n    setEditing = (editing) => {\n        this.setState({editing : editing});\n    }\n\n    handleClick = (e) => {\n    \n        e.preventDefault();\n\n        this.setState ({ currentMode : this.state.currentMode === 'display' ? 'confirm' : 'display'});\n        \n        this.props.handler(e);\n    }\n\n    render()\n    {\n        return (\n            <button className={`EditButton EditButton--${this.state.currentMode}`} onClick={this.handleClick}>\n                <span className=\"sr-only\">\n                    {this.state.currentMode === 'display' ? 'Edit' : 'Confirm'}\n                </span>\n                <i className=\"EditButton__icon\" role=\"presentation\"></i>\n            </button>);\n    }\n}\n\nexport default EditButton;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass DeleteButton extends React.Component\n{\n    static propTypes = {\n        handler : PropTypes.func.isRequired\n    };\n\n    state = {\n        currentMode : 'display'\n    };\n\n    handleClick = (e) => {\n    \n        e.preventDefault();\n\n        this.setState ({ currentMode : this.state.currentMode === 'display' ? 'confirm' : 'display'});\n        \n        this.props.handler(e);\n    }\n\n    render()\n    {\n        return (\n            <button className={`DeleteButton DeleteButton--${this.state.currentMode}`} onClick={this.handleClick}>\n                <span className=\"sr-only\">\n                    {this.state.currentMode === 'display' ? 'Edit' : 'Confirm'}\n                </span>\n                <i className=\"DeleteButton__icon\" role=\"presentation\"></i>\n            </button>);\n    }\n}\n\nexport default DeleteButton;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GameList from './GameList';\nimport EditButton from './EditButton';\nimport DeleteButton from './DeleteButton';\nimport { Link } from \"react-router-dom\";\nimport DataHelper from '../DataHelper';\n\nclass GameListItem extends React.Component\n{\n    titleField = React.createRef();\n\n    state = {\n        editing :false,\n        game : {}\n    }\n\n    static propTypes = {\n        index : PropTypes.string.isRequired,\n        game : PropTypes.object.isRequired,\n        games : PropTypes.object.isRequired,\n        showChildren : PropTypes.bool,\n        editGame : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        copyGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired\n    };\n\n    static defaultProps =  {\n        showChildren :  false\n    }\n\n    onAddEditClick = (e) => {\n\n        let editing = !this.state.editing;\n\n        if(!editing)\n        {\n            this.props.game.title = this.titleField.current.value;\n            this.props.editGame(this.props.index,this.props.game);\n        }\n\n        this.setState({editing : editing});\n    }\n\n    onDeleteClick = (e) => {\n        if(window.confirm(`Are you sure you want to delete \"${this.game.title}\"`))\n        {\n            this.props.deleteGame(this.props.index);\n        }\n        \n    }\n\n    componentWillMount()\n    {\n        this.setState({game : this.props.game});\n        \n    }\n\n    //onClick={(e) => this.props.history.push(`/game/${this.props.index}`)} \n    onNameInputKeyPress = (e) => {\n        \n        if(e.which === 13) //enter\n        {\n            this.onAddEditClick();\n        }\n    }\n    renderName = () => {\n        let input = <input \n                        onClick={this.viewGame} \n                        name=\"GameListItem__title\" \n                        ref={this.titleField} \n                        className=\"GameListItem__title editable\" \n                        onKeyPress={this.onNameInputKeyPress}\n        defaultValue={this.game.title} />;\n        const link = <Link \n                        to={`/game/${this.props.index}`}\n                        className=\"GameListItem__title\" \n                        >\n                        {this.game.title}\n                        </Link>;\n\n        return this.state.editing ? input : link;\n    }\n\n    handleDoubleClick = (e) => {\n        \n        if(!this.state.editing)\n        {\n            this.setState({editing : true});\n        }\n    }\n\n    onCopyClick = (e) =>\n    {\n        this.props.copyGame(this.props.index);\n    }\n\n    componentDidUpdate()\n    {\n        if(this.titleField && this.titleField.current)\n        {\n            this.titleField.current.focus();\n        }\n    }\n    \n    render()\n    {\n\n        this.data = new DataHelper(this.props.games);\n\n        this.game = this.data.getGameByKey(this.props.index);\n\n        //console.log(this.game);\n\n        //console.log(this.props.canDeleteGame);\n\n        return (\n            <li className=\"GameListItem\" id={this.props.index} onDoubleClick={this.handleDoubleClick}>\n                <header className=\"GameListItem__header\">\n                    {this.renderName()}\n\n                    <span className=\"GameListItem__controls-shell\">\n                        {this.props.canEditGame(this.game) ? <EditButton handler={this.onAddEditClick} /> : null}\n                        {this.props.canDeleteGame(this.props.index) ? <DeleteButton handler={this.onDeleteClick} /> : null}\n                        {this.props.userLoggedIn() ? <button type=\"button\" className=\"GameListItem__copy-btn\" onClick={this.onCopyClick}>\n                            <span className=\"sr-only\">duplicate this game</span>\n                            <i className=\"fa fa-copy\"></i>\n                        </button> : null}\n                    </span>\n\n                </header>\n                {\n                    this.props.showChildren ? <GameList \n                        game={this.game} \n                        games={this.props.games} \n                        parent={this.props.index}\n                        canEditGame={this.props.canEditGame}\n                        canEditRule={this.props.canEditRule}\n                        canDeleteGame={this.props.canDeleteGame}\n                        canDeleteRule={this.props.canEditRule}\n                        copyGame={this.props.copyGame} /> : null\n                }     \n            </li>);\n    }\n}\n\nexport default GameListItem;","import React from 'react';\nimport DataHelper from '../DataHelper';\nimport PropTypes from 'prop-types';\nimport Alert from './Alert';\nimport GameListItem from './GameListItem';\n\nclass GameList extends React.Component\n{\n    static propTypes = {\n        editGame : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired, //the object of all raw games data from App.state.games\n        parent : PropTypes.string //the key of the parent game, for which to show child games. Undefined = top level games\n    };\n\n    static defaultProps =  {\n        parent : undefined\n    }\n\n    componentWillMount()\n    {\n        this.data = new DataHelper(this.props.games);\n    }\n\n    renderGameList = () => {\n        \n        //console.log('render game list',this.props);\n\n        if(!this.data || !this.data.hasData())\n        {\n            //console.log('te');\n            return <Alert type=\"error\" tag=\"li\">No Games</Alert>\n        }\n        else\n        {\n            this.data = new DataHelper(this.props.games);\n\n            //return null;\n\n            //console.log('list has data');\n            //this.prop\n            let childGames = this.props.parent !== undefined ? \n                this.data.getChildGames(this.props.parent) : this.data.sortGamesBy('title','asc',this.props.games);\n\n            childGames = this.data.sortGamesBy('title','asc',childGames);\n\n            return this.data.forEach((key) => <GameListItem \n                deleteGame={this.props.deleteGame} \n                editGame={this.props.editGame}\n                copyGame={this.props.copyGame} \n                key={key} \n                index={key} \n                games={childGames} \n                game={this.data.getGameByKey(key)}\n                canEditGame={this.props.canEditGame}\n                canEditRule={this.props.canEditRule}\n                canDeleteGame={this.props.canDeleteGame}\n                userLoggedIn={this.props.userLoggedIn}\n                canDeleteRule={this.props.canEditRule} />,childGames);\n                \n        }\n    }\n\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        //console.log('game list render');\n        \n\n        return (\n            <ul className=\"GameList\">\n                {this.renderGameList()}\n            </ul>);\n    }\n}\n\nexport default GameList;","import React from 'react';\nimport PropTypes from 'prop-types'\nimport DataHelper from '../DataHelper';\n\nclass GameSelect extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        defaultValue : PropTypes.string\n    };\n\n    static defaultProps =  {\n        includeToplevel : false,\n        defaultValue : 'game0',\n        onChange : function(e){}\n    }\n\n    innerSelect = React.createRef();\n\n    test = () => this.innerSelect;\n\n    outPutOptions = () => {\n        \n        let options = [];\n\n        this.data = new DataHelper(this.props.games);\n\n        this.data.forEach((key) => {\n            let game = this.data.getGameByKey(key);\n\n            options.push(<option key={'game-select_' + key} value={key} selected={key === this.props.defaultValue ? 'selected' : ''}>\n                {game.title}\n            </option>)\n        },this.data.sortGamesBy('title','asc',this.props.games));\n\n        return options;\n    }\n    render()\n    {\n        return (\n            <select className=\"GameSelect\" ref={this.innerSelect} onChange={this.props.onChange}>\n                {/* this.props.includeToplevel ? <option value=\"\">Top Level</option> : null */}\n                {this.outPutOptions()}\n            </select>);\n    }\n}\n\nexport default GameSelect;","import React from 'react';\nimport PropTypes from 'prop-types'\nimport GameSelect from './GameSelect';\n\nclass AddGameForm extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        addGame : PropTypes.func.isRequired,\n        parent : PropTypes.string,\n        listenForShortcuts : PropTypes.bool\n    };\n\n    static defaultProps =  {\n        parent : 'game0',\n        listenForShortcuts : false\n    };\n\n    titleField = React.createRef();\n    gameSelect = React.createRef();\n\n    resetForm = () => {\n        this.clearForm();\n        this.titleField.current.focus();\n    }\n\n    clearForm = () => {\n        this.titleField.current.value = '';\n        this.gameSelect.current.innerSelect.current.value = this.props.parent;\n    }\n\n    onKeyUp = (e) => {\n\n        //console.log('key up');\n        \n        if(this.props.listenForShortcuts && e.which == 13) // Enter\n        {\n            this.onAddGameClick();\n            e.preventDefault();\n        }\n    }\n\n    onAddGameClick = (e) => {\n\n       //console.log(this.gameSelect.current.innerSelect.current.value);\n\n        let title = this.titleField.current.value;\n        let parent = this.gameSelect.current.innerSelect.current.value;//.value;\n\n        if(title === '' || !parent || parent === '')\n        {\n            //if the parent or title arent filled,  don't do anything. The alerts below were firing twice\n            //when hitting enter on the Add Game button so this return prevents the alert when a game is successfully being added\n\n            return; //todo: figure out WHY keyup fires on the button too\n            \n            if(title === '')\n            {\n                alert('Please enter a game title');\n            }\n            else if(!parent || parent === '')\n            {\n                alert('Please choose a parent from the drop down.');\n            }\n            \n            return;\n        }\n        \n        this.props.addGame(title,parent);\n        this.resetForm();\n    }\n    render()\n    {\n        //console.log(this.props);\n        \n        return (\n            <div className=\"AddGameForm\">\n                <label>Parent Game</label><GameSelect \n                    games={this.props.games}\n                    includeToplevel={true}\n                    defaultValue={this.props.parent}\n                    ref={this.gameSelect}\n                />\n                <input type=\"text\" placeholder=\"Game Title\" ref={this.titleField} onKeyUp={this.onKeyUp} />\n                <button type=\"text\" onClick={this.onAddGameClick}>Add Game</button>\n            </div>);\n    }\n}\n\nexport default AddGameForm;","import React from 'react';\nimport DataHelper from '../DataHelper';\nimport GameList from './GameList';\nimport AddGameForm from './AddGameForm';\nimport PropTypes from 'prop-types';\n\nclass Games extends React.Component\n{\n    static propTypes = {\n        editGame : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired,\n        addGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired\n    }\n\n    static defaultProps =  {\n        parent : 'game0'\n    };\n\n    data = null;\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        let games = this.props.games;//this.data.sortGamesBy('title','asc');\n        \n        //console.log(this.props.canDeleteGame);\n        \n        return (\n            <div className=\"Games\">\n                <h1>Drinking Games</h1>\n\n                <GameList \n                    games={games} \n                    deleteGame={this.props.deleteGame} \n                    editGame={this.props.editGame}\n                    canEditGame={this.props.canEditGame}\n                    canEditRules={this.props.canEditRules}\n                    canDeleteGame={this.props.canDeleteGame}\n                    canDeleteRules={this.props.canEditRules}\n                    copyGame={this.props.copyGame}\n                    userLoggedIn={this.props.userLoggedIn}\n                     />\n\n                {this.props.userLoggedIn() ? \n                    <section className=\"Games__add-a-game\">\n                        <h2>Add a Game</h2>\n                        <AddGameForm\n                                games={this.props.games}\n                                listenForShortcuts={true}\n                                addGame={this.props.addGame} />\n                    </section> \n                : null}\n            </div>);\n    }\n}\n\nexport default Games;","import React from 'react';\n\nclass NotFound extends React.Component\n{\n    render()\n    {\n        return (\n            <div className=\"NotFound\">\n                <h1>Page Not Found</h1>\n            </div>);\n    }\n}\n\nexport default NotFound;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EditButton from './EditButton';\nimport DeleteButton from './DeleteButton';\nimport DataHelper from '../DataHelper';\nimport {Link} from 'react-router-dom';\n\nclass RuleRow extends React.Component\n{\n    state = {\n        editing : false,\n        rule : null\n    }\n\n    ruleField = React.createRef();\n    drinksField = React.createRef();\n\n    static propTypes = {\n        ruleIndex : PropTypes.string.isRequired,\n        gameIndex : PropTypes.string.isRequired, //this is for the game showing the rule, not the game owning the rule\n                                                //using getGameRules() will return a struct of rules each with a new gameKey field for\n                                                //the key of the game that owns that rule\n        rule : PropTypes.object.isRequired,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired\n    };\n    \n    static defaultProps =  {\n        \n    }\n\n    componentDidUpdate()\n    {\n        if(this.ruleField && this.ruleField.current)\n        {\n            this.ruleField.current.focus();\n        }\n    }\n\n    handleRuleEdit = (e) => {\n\n        let editing = this.state.editing;\n        this.setState({editing : !editing});\n\n        //let drinksField = this.state.drinksField.current;\n        //let ruleField = this.state.ruleField.current;\n\n        if(this.drinksField \n            && this.ruleField\n            && this.drinksField.current\n            && this.ruleField.current)\n        {\n            let drinks = this.drinksField.current.value;\n            let rule = this.ruleField.current.value;\n\n            if(drinks === '')\n            {\n                drinks = this.state.rule.drinks;\n            }\n\n            if(rule === '')\n            {\n                rule = this.state.rule.rule;\n            }\n\n            let ruleObj = {...this.state.rule};\n                ruleObj.rule = rule;\n                ruleObj.drinks = drinks;\n\n            this.props.editRule(this.props.rule.gameKey,this.props.ruleIndex,ruleObj);\n\n            this.setState({\n                rule : ruleObj\n            });\n        }\n        /* this.setState({\n            editing : !editing});\n\n        if(editing)\n        {\n            let rule = {\n            rule : this.ruleField.current ? this.ruleField.current.value : this.state.rule.rule,\n            drinks : this.drinksField.current.value\n        };\n            this.props.editRule(this.props.rule.gameKey,this.props.ruleIndex,rule);\n        }\n        else\n        {\n            console.log(this.rule);\n            //this.ruleField.current.focus();\n        }\n\n        this.setState({\n            rule : rule\n        }); */\n\n    }\n\n    handleRuleDelete = (e) => {\n        \n        if(window.confirm(`Are you sure you want to Delete the rule ${this.state.rule.rule} (${this.state.rule.drinks})?`))\n        {\n            this.props.deleteRule(this.props.rule.gameKey,this.props.ruleIndex);\n\n            this.setState({editing : false});\n        }\n    }\n\n    renderRule = () =>\n    {\n        let input = <input className=\"RuleRow__title-field editable\" onKeyPress={(e) => {\n            if(e.which === 13)\n            {\n                this.handleRuleEdit();\n            }\n        }} type=\"text\" ref={this.ruleField} defaultValue={this.state.rule.rule} />;\n        let span = <span className=\"RuleRow__title-field\">{this.state.rule.rule}</span>;\n\n        return this.state.editing ? input : span;\n    }\n\n    componentWillMount()\n    {\n        this.setState({rule : this.props.rule});\n        this.data = new DataHelper(this.props.games);\n    }\n    renderOwner = (ownerhash) => {\n        \n        let user = this.props.getUser(ownerhash);\n\n        return <span class=\"RuleRow__owner\">{user ? user.email : 'Unknown User'}</span>\n\n    }\n    renderDrinks = () => {\n        let input = <input \n            className=\"RuleRow__drinks-field editable\" \n            type=\"text\" \n            disabled={!this.state.editing} \n            ref={this.drinksField} \n            defaultValue={this.props.rule.drinks}\n            onKeyPress={(e) => {\n            if(e.which === 13)\n            {\n                this.handleRuleEdit();\n            }\n        }} />\n        let span = <span className=\"RuleRow__drinks-field\">{this.props.rule.drinks}</span>;\n\n        return this.state.editing ? input : span;\n    }\n\n    handleDoubleClick = (e) => {\n        \n        if(!this.state.editing)\n        {\n            this.setState({editing : true});\n        }\n    }\n\n    render()\n    {\n        let game = this.data.getGameByKey(this.props.rule.gameKey);\n\n        return (\n            <tr className=\"RuleRow\" onDoubleClick={this.handleDoubleClick}>\n                \n                <td className=\"RuleRow__rule-cell\">\n                    {this.renderRule()}\n                </td>\n                <td className=\"RuleRow__drinks-cell\">\n                    {this.renderDrinks()}\n                </td>\n                <td className=\"RuleRow__game-cell\">\n                    <Link to={`/game/${this.props.rule.gameKey}`} className=\"RuleRow__game-link\">{game.title}</Link>\n                </td>\n                <td className=\"RuleRow__owner-cell\">\n                    {this.renderOwner(this.props.rule.owner)}\n                </td>\n                <td className=\"RuleRow__controls-cell\">\n                    {this.props.canEditRule(this.props.rule) ? <EditButton handler={this.handleRuleEdit} /> : null}\n                    {this.props.canDeleteRule(this.props.rule) ? <DeleteButton handler={this.handleRuleDelete} /> : null}\n                </td>\n            </tr>);\n    }\n}\n\nexport default RuleRow;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DataHelper from '../DataHelper';\nimport RuleRow from './RuleRow';\n\nclass RulesList extends React.Component\n{\n    state = {\n        rules : undefined,\n        currentFilter : '',\n        order : null\n    };\n\n    static propTypes = {\n        recursive : PropTypes.bool,\n        index : PropTypes.string.isRequired,\n        games : PropTypes.object.isRequired,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        getUser : PropTypes.func.isRequired \n    };\n\n    static defaultProps =  {\n        recursive : false\n    }\n\n    filterField = React.createRef();\n\n    componentDidMount()\n    {\n        window.addEventListener('keydown',(e) => {\n            \n            if(e.shiftKey && (e.metaKey || e.ctrlKey) && e.which === 70) //ctrl/cmd + shift + f\n            {\n                this.filterField.current.focus();\n            }\n        })\n    }\n\n    ruleMatchesFilter = (ruleText) => {\n\n        //console.log(this.state.currentFilter,ruleText);\n\n        if(this.state.currentFilter === '') return true;\n\n        return this.state.currentFilter.toLowerCase().indexOf(ruleText.toLowerCase()) > -1 ||\n            ruleText.toLowerCase().indexOf(this.state.currentFilter.toLowerCase()) > -1;\n    }\n\n    renderRuleRows = () =>\n    {\n        return <tbody>{this.data.forEach((key)=>{\n\n            let rule = this.rules[key];\n\n            if(this.ruleMatchesFilter(rule.rule))\n            {\n                return <RuleRow \n                    games={this.props.games}\n                    key={key} \n                    rule={rule} \n                    ruleIndex={key}\n                    gameIndex={this.props.index} \n                    deleteRule={this.deleteRule} \n                    editRule={this.props.editRule}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteRule={this.props.canEditRule}\n                    getUser={this.props.getUser}\n                />\n            }\n            \n        },this.rules)}</tbody>\n    }\n\n    onFilterKeyUp = (e) => {\n    \n        //e.preventDefault();\n        let target = e.currentTarget;\n        let val = target.value;\n\n        this.setState({currentFilter : val});\n        \n    }\n\n    deleteRule = (gameIndex,ruleIndex) => {\n\n        let rules = {...this.rules};\n\n        if(rules[ruleIndex])\n        {\n            delete rules[ruleIndex];\n            this.setState({rules});\n\n            //console.log(gameIndex,ruleIndex);\n            this.props.deleteRule(gameIndex,ruleIndex);\n        }\n    }\n\n    onHeaderCellClick = (e) => {\n        let target = e.target;\n\n        if(target)\n        {\n            let field = target.getAttribute('data-field');\n\n            let order = this.state.order ? {...this.state.order} : {field : '',direction : ''};\n\n            if(order.field === field)\n            {\n                order.direction = order.direction === 'asc' ? 'desc' : 'asc';\n            }\n            else\n            {\n                order.direction = 'asc';\n                order.field = field;\n            }\n\n            this.setState({order});\n        }\n    }\n\n    renderSortLabel = (field) => {\n\n        if(!this.state.order) return null;\n\n        return field === this.state.order.field ?\n            this.state.order.direction === 'asc' ? <span className=\"RulesList__sort-direction fa fa-chevron-up\"></span> : <span className=\"RulesList__sort-direction fa fa-chevron-down\"></span>\n            : null\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        this.rules = this.data.getGameRules(this.props.index,true);\n\n        if(this.state.order)\n        {\n            this.rules = this.data.sortRules(this.rules,this.state.order);\n            //console.log(this.rules);\n        }\n\n        return (\n            <div className=\"RulesList\">\n                <header className=\"RulesList__header\">\n                    <input \n                        ref={this.filterField}\n                        type=\"search\" \n                        className=\"RulesList__filter-field\" \n                        placeholder=\"Find A Rule\" \n                        onKeyUp={this.onFilterKeyUp} />\n                </header>\n                \n                <table cellPadding=\"0\" cellSpacing=\"0\">\n                    <thead className=\"RulesList__header\">\n                        <tr>\n                            <th className=\"RulesList__rule-cell\" \n                                data-field=\"rule\"\n                                onClick={this.onHeaderCellClick}>Rule{this.renderSortLabel('rule')}</th>\n                            <th className=\"RulesList__drinks-cell\" \n                                data-field=\"drinks\"\n                                onClick={this.onHeaderCellClick}>Drinks{this.renderSortLabel('drinks')}</th>\n                            <th className=\"RulesList__game-cell\" \n                                data-field=\"game\"\n                                onClick={this.onHeaderCellClick}>Game{this.renderSortLabel('game')}</th>\n                            <th className=\"RulesList__owner-cell\" \n                                data-field=\"owner\">Owner</th>\n                            <th className=\"RulesList__controls-cell\">&nbsp;</th>\n                        </tr>\n                    </thead>\n                    \n                    {this.renderRuleRows()}\n                </table>\n            </div>);\n    }\n}\n\nexport default RulesList;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GameSelect from './GameSelect';\nimport DataHelper from '../DataHelper';\n\nclass AddRulesForm extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        gameIndex : PropTypes.string.isRequired,\n        addRule : PropTypes.func.isRequired\n    };\n\n    static defaultProps =  {}\n\n    gameSelect = React.createRef();\n    ruleField = React.createRef();\n    drinksField = React.createRef();\n    \n    componentWillMount()\n    {\n        this.data = new DataHelper(this.props.games);\n        \n        window.addEventListener('keypress',this.onWindowKeyPress);\n    }\n\n    onWindowKeyPress = (e) => {\n\n        //console.log(e);\n\n        if(e.which === 174 && e.altKey)\n        {\n            this.ruleField.current.focus();\n            e.preventDefault();\n        }\n    }\n\n    resetForm = () => \n    {\n        this.gameSelect.current.test().current.value = this.props.gameIndex;\n        this.ruleField.current.focus();\n    }\n\n    clearForm = () =>\n    {\n        this.ruleField.current.value =\n        this.drinksField.current.value = '';\n    }\n\n    handleAddClick = (e) => {\n        let gameKey = this.gameSelect.current.innerSelect.current.value;\n\n        let ruleTitle = this.ruleField.current.value;\n        let drinks = this.drinksField.current.value;\n        \n        if(rule === '' || drinks === '' || !gameKey || gameKey === '')\n        {\n            alert('Please choose a game, enter a rule and a drink penalty.');\n\n            return;\n        }\n        let rule = {\n            rule : ruleTitle,\n            drinks : drinks\n        };\n\n        this.props.addRule(gameKey,rule);     \n        this.clearForm();\n        this.resetForm();   \n    }\n\n    onKeyUp = (e) => {\n\n        if(e.which == 13) // Enter\n        {\n            this.handleAddClick();\n            e.preventDefault();\n        }\n    }\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n        \n        let games = this.data.sortGamesBy('title','asc',this.props.games);\n        \n        return (\n            <div className=\"AddRulesForm\">\n                <GameSelect \n                    games={games} \n                    name=\"game\" \n                    defaultValue={this.props.gameIndex} \n                    ref={this.gameSelect} className=\"AddRulesForm__game-select\" />\n                <textarea placeholder=\"Rule\" name=\"rule\" ref={this.ruleField} className=\"AddRulesForm__rule-field\"></textarea>\n                <input \n                    type=\"text\" \n                    name=\"drinks\" \n                    ref={this.drinksField}\n                    onKeyUp={this.onKeyUp} \n                    placeholder=\"Drinks\" \n                    className=\"AddRulesForm__drinks-field\" />\n                <button type=\"button\" onClick={this.handleAddClick}>Add Rule</button>\n            </div>);\n    }\n}\n\nexport default AddRulesForm;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass ComboCounter extends React.Component\n{\n    static propTypes = {};\n    static defaultTypes = {};\n\n    state = {\n        count : 0,\n        animating : false,\n        open : true\n    }\n\n    maxCombo = 10;\n\n    animateSpeed = 180;\n\n    componentWillMount()\n    {\n        window.addEventListener('keyup', this.onGlobalKeyPress);\n    }\n\n    onGlobalKeyPress = (e) => {\n\n        switch(e.which)\n        {\n            case 107 : //plus\n                this.addDrink();\n                break;\n            case 109 : //minus\n                this.removeDrink();\n                break;\n            case 106 : //multiply / asterisk (to clear)\n                this.clearDrinks();\n                break;\n\n            default : break;\n        }\n    }\n\n    addDrink = () => {\n\n        if(this.props.count < this.maxCombo)\n        {\n            let count = this.props.count + 1;\n\n            this.props.setSessionCombo(count);\n            \n        }\n    }\n\n    removeDrink = () =>\n    {\n        if(this.props.count > 0)\n        {\n            this.props.setSessionCombo(this.props.count - 1);\n        }\n    }\n\n    clearDrinks = () => {\n\n        this.props.setSessionCombo(0);\n        \n    }\n\n    handleRemoveDrinkClick = (e) => {\n\n        if(this.props.count > 0)\n        {\n            this.removeDrink();    \n            this.animateCount();\n        }\n    }\n\n    handleClearDrinksClick = (e) => {\n\n        this.clearDrinks();\n    }\n\n    animateCount = () => {\n        \n        this.setState({\n            animating : true\n        });\n\n        setTimeout(() => {\n            this.setState({\n                animating : false\n            });\n    \n        }, this.animateSpeed);\n    }\n\n    handleAddDrinkClick = (e) => {\n\n        if(this.props.count < this.maxCombo)\n        {\n            this.addDrink();\n    \n            this.animateCount();\n        }\n        \n    }\n\n    calcShotHeight = () => {\n        \n        if(this.props.count === 0) return 0;\n\n        return ((this.props.count / this.maxCombo) * 100) + '%';\n    }\n\n    handleToggleClick = (e) => {\n\n        this.setState({\n            open : !this.state.open\n        })\n    }\n\n\n    render()\n    {\n        return (\n            <aside className={`ComboCounter${this.state.animating ? ' ComboCounter--animating' : ' ComboCounter--animated'}${this.props.count === this.maxCombo ? ' ComboCounter--full' : ''}${this.props.count === 0 ? ' ComboCounter--empty' : ''}${this.state.open ? ' ComboCounter--open' : ' ComboCounter--closed'}`}>\n                \n                <button className=\"ComboCounter__toggle-btn ComboCounter__toggle-btn--open\" onClick={this.handleToggleClick}>\n                    <i className=\"fa fa-chevron-left\"></i>\n                </button>\n                \n                <div className=\"ComboCounter__count\">\n                    {this.props.count}\n                </div>\n\n                <div class=\"ComboCounter__glass-wrap\">\n\n                    <div className=\"ComboCounter__shot-glass\">\n                        <div className=\"ComboCounter__shot-volume\" style={{height : this.calcShotHeight()}}></div>\n                    </div>\n\n                    <div className=\"ComboCounter__button-shell\">\n                        <button className=\"ComboCounter__remove-drink-btn\" onClick={this.handleRemoveDrinkClick}>-</button>\n                        <button className=\"ComboCounter__clear-drinks-btn\" onClick={this.handleClearDrinksClick}>&times;</button>\n                    </div>\n                </div>\n                \n                <button className=\"ComboCounter__add-drink-btn\" onClick={this.handleAddDrinkClick}>+</button>\n\n                <button className=\"ComboCounter__toggle-btn ComboCounter__toggle-btn--close\" onClick={this.handleToggleClick}>\n                    <i className=\"fa fa-chevron-right\"></i>\n                </button>\n\n            </aside>);\n    }\n}\n\nexport default ComboCounter;","import React from 'react';\nimport DataHelper from '../DataHelper';\nimport PropTypes from 'prop-types';\nimport NotFound from './NotFound';\nimport RulesList from './RulesList';\nimport AddRulesForm from './AddRulesForm';\nimport GameList from './GameList';\nimport AddGameForm from './AddGameForm';\nimport {changePageTitle} from '../helpers';\nimport GameSelect from './GameSelect';\nimport EditButton from './EditButton';\nimport GameListItem from './GameListItem';\nimport DeleteButton from './DeleteButton';\nimport {Link} from 'react-router-dom';\nimport ComboCounter from './ComboCounter';\n\nclass Game extends React.Component\n{\n    state = {\n        game : undefined,\n        editing : false\n    }\n\n    static propTypes = {\n        index : PropTypes.string.isRequired,\n        games : PropTypes.object,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        editGame : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        canEditGame : PropTypes.func.isRequired,\n        canDeleteGame : PropTypes.func.isRequired,\n        getUser : PropTypes.func.isRequired\n    }\n\n    titleInput = React.createRef();\n    editButton = React.createRef();\n    shell = React.createRef();\n\n    onParentChange = (e) => {\n        \n        let newParent = e.currentTarget.value;\n\n        let thisGameKey = this.props.index;\n\n        let game = {...this.data.getGameByKey(thisGameKey)};\n\n        game.parent_game = newParent;\n\n        console.log(game);\n\n        this.props.editGame(thisGameKey,game);\n    }\n\n    handleTitleEditClick = (e) => {\n\n        if(this.state.editing)\n        {\n            let game = this.data.getGameByKey(this.props.index);\n            let newTitle = this.titleInput.current.value;//.replace(/(^[ ]+|[ ]+$)/,'');\n\n            if(newTitle === '')\n            {\n                this.titleInput.current.value = game.title;\n            }\n            else if(this.titleInput.current.value !== game.title)\n            {\n                game.title = this.titleInput.current.value;\n                this.props.editGame(this.props.index,game);\n            }\n            \n        }\n        else\n        {\n            this.titleInput.current.focus();\n            \n        }\n        \n        this.setState({editing : !this.state.editing});\n    }\n\n    componentDidUpdate()\n    {\n        if(this.state.editing)\n        {\n            this.titleInput.current.focus();\n        }\n\n        this.shell.current.scrollTo(0,0);\n    }\n\n\n    onDeleteClick = (e) => {\n        this.data = new DataHelper(this.props.games);\n\n        let game = this.data.getGameByKey(this.props.index);\n\n        if(window.confirm(`Are you sure you want to delete \"${game.title}\"?`))\n        {\n            this.props.deleteGame(this.props.index);\n        }\n        \n    }\n\n    renderBreadCrumbs = () => {\n\n        let ancestors = this.data.getAncestors(this.props.index);\n\n        let html = [];\n\n        ancestors.forEach((ancestor,i) => {\n\n            html.push(<Link to={`/game/${ancestor.key}`}>\n                {ancestor.game.title}\n            </Link>);\n    \n            if(i < ancestors.length - 1)\n            {\n                html.push(<span class=\"Game__parent-delimiter\">&gt;</span>);\n            }\n        });\n\n        return html;\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        let game = this.data.getGameByKey(this.props.index);\n\n        let parentGame = game.parent_game ? this.data.getGameByKey(game.parent_game) : null;\n\n        if(!game) return NotFound;\n\n        changePageTitle(game.title + ' | Drinking Games'); \n        \n        return (\n            <div className=\"Game\" ref={this.shell}>\n                <ComboCounter setSessionCombo={this.props.setSessionCombo} count={this.props.currentComboCount} />\n                {this.renderBreadCrumbs()}\n                <h1 className=\"Game__title\">\n                    <input \n                        name={this.props.index + Date.now()} \n                        key={this.props.index + Date.now()} \n                        type=\"text\" \n                        defaultValue={game.title}\n                        ref={this.titleInput}\n                        disabled={!this.state.editing}\n                        className=\"Game__title-value editable\"\n                        onKeyPress={(e) => {\n                            if(e.which === 13)\n                            {\n                                this.handleTitleEditClick();\n                            }\n                        }} />\n                    {this.props.canEditGame(this.props.index) ? <div className=\"Game__parent-change-select\">\n                    \n                        <label>Parent:</label>  <GameSelect\n                            onChange={this.onParentChange}\n                            defaultValue={this.data.getGameByKey(this.props.index).parent_game}\n                            games={this.props.games}\n                            \n                        />\n                        <EditButton handler={this.handleTitleEditClick} ref={this.editButton} />\n                        {this.props.canDeleteGame(this.props.index) ? <DeleteButton handler={this.onDeleteClick} /> : null}\n                     </div> : null}\n                     \n                </h1>\n\n                <section className=\"Game__rules\">\n                <h2>Rules</h2>\n\n                <RulesList \n                    games={this.props.games} \n                    index={this.props.index} \n                    recursive={true} \n                    deleteRule={this.props.deleteRule} \n                    editRule={this.props.editRule}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteRule={this.props.canEditRule}\n                    getUser={this.props.getUser} />\n\n                </section>\n\n                {this.props.userLoggedIn() ? <section className=\"Game__add-rules\">\n                    \n\n                    <h3>Add Rule</h3>    \n\n                    <AddRulesForm \n                        games={this.props.games} \n                        gameIndex={this.props.index}\n                        addRule={this.props.addRule} />\n                </section> : null}\n\n                <section className=\"Game__child-games\">\n                    <h2>Sub Games</h2>    \n\n                    <GameList \n                        parent={this.props.index} \n                        editGame={this.props.editGame} \n                        games={this.props.games}\n                        deleteGame={this.props.deleteGame}\n                        canEditGame={this.props.canEditGame}\n                        canEditRule={this.props.canEditRule}\n                        canDeleteGame={this.props.canDeleteGame}\n                        canDeleteRule={this.props.canEditRule}\n                        userLoggedIn={this.props.userLoggedIn}\n                        />\n                    \n                    <h3>Add A Sub Game</h3>\n\n                    {this.props.userLoggedIn() ? <AddGameForm\n                        games={this.props.games}\n                        parent={this.props.index}\n                        addGame={this.props.addGame} /> : null }\n                </section>\n            </div>);\n    }\n}\n\nexport default Game;","export function formatPrice(cents) {\r\n  return (cents / 100).toLocaleString(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\"\r\n  });\r\n}\r\n\r\nexport function rando(arr) {\r\n  return arr[Math.floor(Math.random() * arr.length)];\r\n}\r\n\r\nexport function slugify(text) {\r\n  return text\r\n    .toString()\r\n    .toLowerCase()\r\n    .replace(/\\s+/g, \"-\")\r\n    .replace(/[^\\w-]+/g, \"\")\r\n    .replace(/--+/g, \"-\")\r\n    .replace(/^-+/, \"\")\r\n    .replace(/-+$/, \"\");\r\n}\r\n\r\nexport function changePageTitle(title)\r\n{\r\n  document.querySelector('head title').innerText = title;\r\n}","const fakeGames = {\n    \"game0\" : {\n      \"rules\" : {\n        \"game0_rule1585428503206\" : {\n          \"drinks\" : \"2 drinks\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"The name of the episode or movie is said or written\"\n        },\n        \"game0_rule1585443393434\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"obvious stock footage\"\n        },\n        \"game0_rule1585443993724\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"ESL Characters speaking English for no reason\"\n        },\n        \"game0_rule1585444223055\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"nut shot\"\n        },\n        \"game0_rule1585445102020\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"obviously empty coffee cup\"\n        },\n        \"game0_rule1585447770911\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"someone rips up a photo \"\n        },\n        \"game0_rule1585507595857\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Incorrect portrayal of \\\"hacking\\\"\"\n        },\n        \"game0_rule1585528860565\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"romantic tension between non spouses (will they / wont they characters)\"\n        }\n      },\n      \"title\" : \"General Rules\"\n    },\n    \"game1\" : {\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1_rule1\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game1\",\n          \"rule\" : \"Bone snap\"\n        },\n        \"game1_rule1585442777686\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Explosion\"\n        },\n        \"game1_rule1585442794346\" : {\n          \"drinks\" : \"2\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"cool explosion (ex: slow mo)\"\n        },\n        \"game1_rule1585442823231\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"unrealistic survival / healing\"\n        },\n        \"game1_rule1585442901374\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"glass breaks\"\n        },\n        \"game1_rule1585442925083\" : {\n          \"drinks\" : \"3\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"decapitation\"\n        },\n        \"game1_rule1585443336960\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"slow motion\"\n        },\n        \"game1_rule1585444849287\" : {\n          \"drinks\" : \"3\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"\\\"turn in your badge and gun\\\" / \\\"youre suspended!\\\" / etc\"\n        },\n        \"game1_rule1585448652082\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"headshot\"\n        }\n      },\n      \"title\" : \"Action\"\n    },\n    \"game1585442982618\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1585442982618_rule1585442993103\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Any dino related pun\"\n        },\n        \"game1585442982618_rule1585443044303\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Anytime you see a choker or midriff\"\n        },\n        \"game1585442982618_rule1585443065678\" : {\n          \"drinks\" : \"drink til it stops\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Dino roar\"\n        },\n        \"game1585442982618_rule1585443084585\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"bad cgi\"\n        },\n        \"game1585442982618_rule1585443110038\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"T Rex does something with his hands\"\n        },\n        \"game1585442982618_rule1585443158546\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Dinosaur is too big to fit in something\"\n        },\n        \"game1585442982618_rule1585443171333\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"poor dino disguising / someone doesnt notice the dino is alive\"\n        },\n        \"game1585442982618_rule1585448716738\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"someone grabs someone else's dick\"\n        }\n      },\n      \"title\" : \"Tammy and the T Rex\"\n    },\n    \"game1585446169128\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game1585446169128_rule1585446187228\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585446169128\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"\\\"enhance\\\"\"\n        }\n      },\n      \"title\" : \"Police / Crime\"\n    },\n    \"game1585519764301\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game1585519764301_rule1585519780902\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585519764301\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Cross Fade\"\n        },\n        \"game1585519764301_rule1585519789583\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585519764301\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Saxophone Soundtrack\"\n        }\n      },\n      \"title\" : \"Man Hunt\"\n    },\n    \"game1585541082218\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1585541104293\",\n      \"rules\" : {\n        \"game1585541082218_rule1585541134205\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Something is bejewelled\"\n        },\n        \"game1585541082218_rule1585541642525\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"a tiger hurts or scares someone\"\n        },\n        \"game1585541082218_rule1585545303143\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"tacky / trashy decorations\"\n        }\n      },\n      \"title\" : \"Tiger King\"\n    },\n    \"game1585541104293\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1585541104293_rule1585751022903\" : {\n          \"drinks\" : \"1 drink\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Someone Cries\"\n        }\n      },\n      \"title\" : \"Reality TV\"\n    },\n    \"game1585600289161\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"title\" : \"Jason Statham\"\n    },\n    \"game1585600326133\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1585600289161\",\n      \"rules\" : {\n        \"game1585600326133_rule1585600342757\" : {\n          \"drinks\" : \"1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Statham uses his boomerang\"\n        }\n      },\n      \"title\" : \"In The Name of the king\"\n    },\n    \"game1585662389801\" : {\n      \"owner\" : \"\",\n      \"parent_game\" : \"game1585541104293\",\n      \"title\" : \"90 Day Fiance\"\n    },\n    \"game1585662406239\" : {\n      \"owner\" : \"\",\n      \"parent_game\" : \"game1585541104293\",\n      \"rules\" : {\n        \"game1585662406239_rule1585662454054\" : {\n          \"drinks\" : \"everyone but the closest guess drinks. Price is right rules\",\n          \"gameKey\" : \"game1585662406239\",\n          \"owner\" : \"\",\n          \"rule\" : \"Everyone guesses the budget of each bride before they say it\"\n        }\n      },\n      \"title\" : \"Say Yes To The Dress\"\n    },\n    \"game1585872782855\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"title\" : \"test to delete\"\n    },\n    \"game2\" : {\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game2_rule1\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game2\",\n          \"rule\" : \"Splits\"\n        }\n      },\n      \"title\" : \"Jean Claude Van Damme\"\n    },\n    \"game3\" : {\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game3_rule1\" : {\n          \"drinks\" : \"1 sip\",\n          \"gameKey\" : \"game3\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"Jump Scare\"\n        },\n        \"game3_rule1585427944776\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game3\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"rule added by raymond@raymond\"\n        }\n      },\n      \"title\" : \"Horror Movies\"\n    },\n    \"game4\" : {\n      \"parent_game\" : \"game0\",\n      \"title\" : \"Cartoons\"\n    },\n    \"game5\" : {\n      \"parent_game\" : \"game4\",\n      \"rules\" : {\n        \"game5_rule1\" : {\n          \"drinks\" : \"drink til it stops\",\n          \"gameKey\" : \"game5\",\n          \"rule\" : \"CGI Webslinging\"\n        }\n      },\n      \"title\" : \"Adventures of Spiderman\"\n    }\n  }\n\nexport default fakeGames;","import React from 'react';\nimport PropTypes from 'prop-types'\n\nclass Loader extends React.Component\n{\n    static propTypes = {\n        message : PropTypes.string\n    };\n    static defaultProps =  {\n        message : ''\n    }\n\n    render()\n    {\n        return (\n            <div className=\"Loader\">\n                <div className=\"lds-dual-ring\"></div>\n                {this.props.message !== '' ? <h4 className=\"Loader__message\">{this.props.message}</h4> : null}\n            </div>);\n    }loading\n}\n\nexport default Loader;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Game from './Game';\nimport Games from './Games';\nimport Alert from './Alert';\n\nclass Desktop extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        addRule : PropTypes.func.isRequired,\n        editGame : PropTypes.func.isRequired,\n        addGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        getUser : PropTypes.func.isRequired\n    };\n\n    static defaultProps =  {}\n\n    render()\n    {\n        //console.log(this.props.games);\n        //console.log(this.props.canDeleteGame);\n\n        return (\n            <main className=\"Desktop\">\n                <Games \n                    games={this.props.games} \n                    editGame={this.props.editGame} \n                    addGame={this.props.addGame} \n                    deleteGame={this.props.deleteGame}\n                    canEditGame={this.props.canEditGame}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteGame={this.props.canDeleteGame}\n                    canDeleteRule={this.props.canEditRule}\n                    copyGame={this.props.copyGame}\n                    userLoggedIn={this.props.userLoggedIn}\n                    getUser={this.props.getUser}\n                     />\n\n                {this.props.mode === 'game' ? <Game \n                            index={this.props.match.params.ID} \n                            games={this.props.games} \n                            editRule={this.props.editRule} \n                            deleteRule={this.props.deleteRule}\n                            deleteGame={this.props.deleteGame}\n                            addRule={this.props.addRule}\n                            editGame={this.props.editGame}\n                            addGame={this.props.addGame}\n                            canEditGame={this.props.canEditGame}\n                            canEditRule={this.props.canEditRule}\n                            canDeleteGame={this.props.canDeleteGame}\n                            canDeleteRule={this.props.canEditRule}\n                            copyGame={this.props.copyGame}\n                            userLoggedIn={this.props.userLoggedIn}\n                            getUser={this.props.getUser}\n                            setSessionCombo={this.props.setSessionCombo}\n                            currentComboCount={this.props.currentComboCount}\n                             /> \n                        : <Alert tag=\"div\" type=\"info\">Choose a game from the left hand menu</Alert>}\n            </main>);\n    }\n}\n\nexport default Desktop;","import React from 'react';\nimport Alert from './Alert';\nimport {Link} from 'react-router-dom';\n\nclass Login extends React.Component\n{\n    userField = React.createRef();\n    passwordField = React.createRef();\n\n    authenticate = (e) => {\n        \n        console.log('loader auth');\n\n        let user = this.userField.current.value;\n        let pass = this.passwordField.current.value;\n\n        this.props.authenticate(user,pass);\n    }\n\n    render()\n    {\n        return (\n            <div className=\"Login\">\n                <form className=\"Login__form\">\n                    <h2>Login</h2>\n                    <p>Sign in to start drinking</p>\n\n                    {this.props.error ? <Alert type=\"error\">{this.props.error}</Alert> : null}\n\n                    <input type=\"text\" required ref={this.userField} placeholder=\"Email\" />\n                    <input type=\"password\" required ref={this.passwordField} placeholder=\"Password\" />\n\n                    <button type=\"button\" className=\"Login__login\" onClick={this.authenticate}>Turn Down For What</button>\n                    <Link className=\"Login__signup \" to=\"/signup\">Get Started Turnin' Up</Link>\n                </form>\n            </div>);\n    }\n}\n\nexport default Login;","import Rebase from 're-base';\nimport firebase from 'firebase';\n\nconst firebaseApp = firebase.initializeApp({\n    apiKey: \"AIzaSyBqPifaPtgVVbc222q6U09NBRuHTn9ECr0\",\n    authDomain: \"raymond-catch-of-the-day.firebaseapp.com\",\n    databaseURL: \"https://raymond-catch-of-the-day.firebaseio.com\",\n    projectId: \"raymond-catch-of-the-day\",\n    storageBucket: \"raymond-catch-of-the-day.appspot.com\",\n    messagingSenderId: \"425132188904\",\n    appId: \"1:425132188904:web:04405d03ba6769cc5f555d\",\n    measurementId: \"G-SJZ98PJSWE\"\n  });\n\nconst base = Rebase.createClass(firebaseApp.database());\n\nexport {firebaseApp};\n\nexport default base;","import React from 'react';\nimport Alert from './Alert';\nimport {Link} from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nclass Signup extends React.Component\n{\n    userField = React.createRef();\n    passwordField = React.createRef();\n    passwordField2 = React.createRef();\n\n    state = {\n        error : null\n    }\n\n    static propTypes = {\n        error : PropTypes.string\n    }\n\n    static defaultProps =  {\n        error : null\n    }\n\n    componentWillMount()\n    {\n        this.setState({error : this.props.error});\n    }\n\n    signup = (e) => {\n\n        let user = this.userField.current.value;\n        let pass1 = this.passwordField.current.value;\n        let pass2 = this.passwordField2.current.value;\n\n        if(pass1 !== pass2)\n        {\n            //console.log(pass1,pass2);\n            this.setState({error : `Passwords don't match`});\n        }\n        else\n        {\n            this.props.signup(user,pass1);\n        }\n        \n    }\n\n    render()\n    {\n        //console.log('signup render');\n\n        let error = this.props.error || this.state.error;\n\n        return (\n            <div className=\"Signup\">\n                <form className=\"Signup__form\">\n                    <h2>Signup</h2>\n                    <p>Sign in to start drinking</p>\n\n                    {error ? <Alert type=\"error\">{error}</Alert> : null}\n\n                    <input type=\"text\" required ref={this.userField} placeholder=\"Email\" />\n                    <input type=\"password\" required ref={this.passwordField} placeholder=\"Password\" />\n                    <input type=\"password\" required ref={this.passwordField2} placeholder=\"Confirm Password\" />\n\n                    <button type=\"button\" className=\"Signup__Signup\" onClick={this.signup}>Turn Down For What</button>\n                </form>\n            </div>);\n    }\n}\n\nexport default Signup;","import React from 'react';\nimport PropTypes from 'prop-types'\n\nclass SessionManager extends React.Component\n{\n    static propTypes = {};\n    static defaultTypes = {}\n\n    state = {\n        currentSession : this.props.currentSession\n    }\n\n    keyField = React.createRef();\n\n    handleCreateSession = (e) => {\n        \n        this.props.createSession()\n\n    }\n\n    leaveSession = () => {\n        this.setState({currentSession : undefined});\n        this.props.leaveSession();\n    }\n\n    handleJoinSession = (e) => {\n\n        let key = this.keyField.current.value;\n        this.props.joinSession(key);\n    }\n\n    renderSessionButtons = () => {\n\n        if(this.state.currentSession === undefined)\n        {\n            return (<div>\n                        <button className=\"SessionManager__create-session\" onClick={this.handleCreateSession}>Create Session</button>\n                        <input type=\"text\" className=\"SessionManager__key-field\" ref={this.keyField} placeholder=\"Session Code\" />\n                        <button className=\"SessionManager__join-session\" onClick={this.handleJoinSession}>Join Session</button>\n                    </div>);\n        }\n        else\n        {\n            return <div className=\"SessionManager__current-session\">\n                <span className=\"SeassionManager__session-key\">{this.state.currentSession}</span>\n                <button className=\"SessionManager__leave-session-btn\" onClick={this.leaveSession}>Leave Session</button>\n            </div>;\n        }\n    }\n\n    render()\n    {\n        this.state.currentSession = this.props.currentSession;\n\n        return (\n            <div className=\"SessionManager\">\n                {this.renderSessionButtons()}\n            </div>);\n    }\n}\n\nexport default SessionManager;","import React from 'react';\nimport Games from './Games';\nimport Game from './Game';\nimport NotFound from './NotFound';\nimport fakeGames from '../fakeGames.js';\nimport DataHelper from '../DataHelper';\nimport Loader from './Loader';\nimport Desktop from './Desktop';\nimport Login from './Login';\nimport firebase from 'firebase';\nimport base from '../base';\nimport Signup from './Signup';\nimport SessionManager from './SessionManager';\nimport {Link,withRouter} from 'react-router-dom';\n\nclass App extends React.Component\n{\n    state = {\n        games : {},\n        mobile : false,\n        user : {uid : ''},\n        users : {},\n        loading : true,\n        signupError : null,\n        loginError : null,\n        loggingIn : false,\n        currentSession : undefined,\n        sessions : {},\n    }\n\n    RAYMOND_UID = 'uGqTXpxQHzg4K7DRhObVWvValvF3';\n\n    sessionKeyLength = 4;\n    \n    editGame = (key,game) => {\n        \n        const games = {...this.state.games};\n\n        games[key] = game;\n\n        this.setState({games});\n    }\n\n    getCurrentSessionComboCount = () => {\n        return this.inASession() ? this.state.sessions[this.state.currentSession].currentComboCount : 0;\n    }\n\n    setSession = (key) => {\n\n        let session = {\n            created : new Date().getTime(),\n            currentComboCount : 0\n        };\n\n        let sessions = {...this.state.sessions};\n\n        sessions[key] = session;\n\n        this.setState({currentSession : key});\n\n        console.log('setting session local only');\n\n        this.setState({sessions : sessions});\n    }\n\n    inASession = () => {\n        return this.state.currentSession !== undefined;\n    }\n\n    setSessionCombo = (count) => {\n\n        if(this.inASession())\n        {\n            let sessions = {...this.state.sessions};\n                sessions[this.state.currentSession].currentComboCount = count;\n            \n            this.setState({sessions});\n        }\n    }\n\n    joinSession = (key) => {\n        \n        key = key.toUpperCase();\n\n        if(this.sessionKeyExists(key))\n        {\n            this.setState({currentSession : key});\n            return true;\n        }\n        else\n        {\n            console.log(key,this.state.sessions);\n\n            alert(`No session with the code \"${key}\" currently exists.`);\n            return false;\n        }\n    }\n\n    leaveSession = () => {\n        this.setState({currentSession : undefined});\n    }\n\n    sessionKeyExists = (key) => {\n        return this.state.sessions[key] !== undefined\n    }\n\n    generateSessionKey = () => {\n\n        let key = '';\n        let code;\n\n        for(let i = 0; i < this.sessionKeyLength; i++)\n        {\n            code = Math.round(Math.random() * 25) + 65;\n\n            //console.log(code,key);\n            key += String.fromCharCode(code);    \n        }\n\n        return key.toUpperCase();\n    }\n\n    generateUniqueSessionKey = () => {\n        let key = this.generateSessionKey();\n\n        do\n        {\n            key = this.generateSessionKey();\n        }\n        while(this.state.sessions[key] !== undefined);\n        \n        return key;\n    }\n\n    createSession = () => {\n\n        let key = this.generateUniqueSessionKey();\n\n        this.setSession(key);\n\n        return key;\n    }\n\n    componentWillUpdate()\n    {\n        //console.log(this.props.location.pathname);\n    }\n\n    componentDidMount()\n    {\n        \n        let db = window.location.hostname === 'localhost' ? 'dev' : 'live';\n        \n        //console.log(db);\n        this.fbRefU = base.syncState(`drinking-games/${db}/users`,{\n            context : this,\n            state : 'users'});\n\n        this.fbRefSessions = base.syncState(`drinking-games/${db}/sessions`,{\n            context : this,\n            state : 'sessions'});\n\n        //base.listenTo('drinking-games/games',)\n        this.fbRef = base.syncState(`drinking-games/${db}/games`,{\n            context : this,\n            state : 'games',\n            then : (t) => {\n\n                //console.log('got games from fb',this.state.games);\n\n                this.data = new DataHelper(this.state.games);\n\n                //after we sync the state to firebase, if there are no games, load up some fake ones for testing\n                if(Object.keys(this.state.games).length === 0)\n                {\n                    \n                    this.setState({games : fakeGames });\n                }\n\n                this.setState({loading:false});\n            }\n        });\n\n        \n        \n        firebase.auth().onAuthStateChanged(user => {\n            \n            if(user)\n            {\n                this.authHandler({user});\n            }\n        });\n    }\n\n    canEditRule = (rule) => {\n\n        return this.userLoggedIn(); //this.state.user.uid === this.RAYMOND_UID || rule.owner === this.state.user.uid;\n    }\n\n    canEditGame = (gameKey) => {\n\n        /* console.log('======================CHECKING CAN EDIT');\n        console.log(game);\n        \n        console.table({\n            'state user id' : this.state.user.uid,\n            'raymond user id' : this.RAYMOND_UID,\n            'game owner' : game.owner\n        }); */\n        let game = typeof gameKey === 'string' ? this.data.getGameByKey(gameKey) : gameKey;\n\n        //console.log(game.title,this.state.user.uid === this.RAYMOND_UID || (game.owner && game.owner === this.state.user.uid));\n        return this.state.user.uid === this.RAYMOND_UID || (game.owner && game.owner === this.state.user.uid);\n    }\n\n    canDeleteRule = (rule) => {\n\n        return this.state.user.uid === this.RAYMOND_UID || rule.owner === this.state.user.uid;\n    }\n\n    canDeleteGame = (gameKey) => {\n\n        let game = this.data.getGameByKey(gameKey);\n\n        if(this.state.user.uid === this.RAYMOND_UID) return true;\n\n        if(!game.owner || game.owner !== this.state.user.uid) return false;\n\n        //console.log('game owner');\n\n        let success = this.data.gameHasOtherUserGames(gameKey,this.state.user.uid);// && !this.data.gameHasOtherUserOwnedRules(gameKey,this.state.user.uid);\n\n        return success;\n    }\n\n\n\n    editRule = (gameKey,ruleKey,newRule) =>\n    {\n        let games = {...this.state.games};\n\n        let game = games[gameKey];\n        \n        newRule.drinks = this.sanitizeDrinks(newRule.drinks);\n        \n        if(game && game.rules && game.rules[ruleKey])\n        {\n            games[gameKey].rules[ruleKey] = newRule;\n\n            this.setState({games});\n\n        }\n    }\n\n    deleteRule = (gameKey,ruleKey) =>\n    {\n        let games = {...this.state.games};\n\n        //console.log(gameKey,ruleKey);\n\n        if(games && games[gameKey] && games[gameKey].rules[ruleKey])\n        {\n            games[gameKey].rules[ruleKey] = null;\n\n            //console.log(games);\n            \n            this.setState({games});\n        }\n    }\n\n    addRule = (gameKey,rule) =>\n    {\n        //console.log(gameKey,rule);\n\n        rule.owner = this.state.user.uid;\n\n        let ruleKey = this.data.getNewRuleKey(gameKey);\n\n        let games = {...this.state.games};\n\n        if(!games[gameKey].rules)\n        games[gameKey].rules = {};\n\n        games[gameKey].rules[ruleKey] = rule;\n\n        //console.log(games);\n        \n        this.setState({games});\n    }\n\n    addGame = (gameTitle,parentKey) =>\n    {\n        let game = {\n            title : gameTitle,\n            rules : {}\n        };\n\n        game.owner = this.state.user.uid;\n\n        if(parentKey !== '')\n        {\n            game.parent_game = parentKey;\n        }\n\n        let games = {...this.state.games};\n        let newGameKey = this.data.getNewGameKey();\n\n        games[newGameKey] = game;\n\n        this.setState({games});\n\n        this.viewGame(newGameKey);\n\n    }\n\n    copyRules = (rules,oldGameKey,newGameKey) => {\n\n        rules = {...rules};\n\n        let newRules = {};\n\n        this.data.forEach((key) => {\n\n            let newRuleKey = key.replace(oldGameKey,newGameKey);\n\n           //console.log(oldGameKey,newGameKey);\n            //console.log(newRuleKey,key);\n\n            newRules[newRuleKey] = {...rules[key]};\n            newRules[newRuleKey].gameKey = newGameKey;\n            newRules[newRuleKey].owner = this.state.user.uid;\n\n        },rules);\n\n        return newRules;\n    }\n\n    copyGame = (key) => {\n\n        this.data = new DataHelper(this.state.games);\n\n        let games = {...this.state.games};\n\n        let game = {...this.data.getGameByKey(key)};\n\n        let newKey = this.data.getNewGameKey();\n\n        game.title += ' Copy';\n        game.owner = this.state.user.uid;\n\n        games[newKey] = game;\n\n        //if(game.rules && Object.keys(game.rules).length > 0)\n        games[newKey].rules = this.copyRules(game.rules,key,newKey);\n        \n       //console.log(game,games);\n\n        this.setState({games});\n\n        this.viewGame(newKey);\n\n        //console.log(this.data);\n    }\n\n    deleteGame = (key) => {\n\n        let games = {...this.state.games};\n\n        games[key] = null;\n\n        this.setState({games});\n\n        if(key === this.props.match.params.ID)\n        {\n            this.props.history.replace('/');\n        }\n    }\n\n    mobileCheck = (match) => {\n\n        this.setState({mobile : match.matches});\n    }\n\n    viewGame = (key) => this.props.history.push(`/game/${key}`);\n\n    componentWillMount()\n    {\n        //console.log('app will mount');\n        let mobileCheck = window.matchMedia('(max-width: 1000px)');\n            this.mobileCheck(mobileCheck);\n            mobileCheck.addListener(this.mobileCheck);\n    }\n\n    authHandler = async resp => {\n        \n        if(!this.userExists(resp.user))\n        {\n            this.addUser(resp.user);\n        }\n\n        this.setState({\n            user : resp.user,\n            loggingIn : false\n        });\n\n        if(this.props.location.pathname == '/signup')\n        {\n            this.props.history.push('/');\n        }\n        \n    }\n\n    authenticate = (u,p) =>\n    {\n        \n        //let provider = new firebase.auth().signInWithEmailAndPassword('test@test.com','test4$').then(this.authHandler);\n        \n        this.setState({loading : true});\n\n        //console.log('app auth');\n\n        new firebase.auth().signInWithEmailAndPassword(u,p).then((resp) => {\n\n            this.authHandler(resp);\n\n            console.log('firebase login',resp);\n            \n            this.setState({\n                loading : false,\n                signInError : null\n            });\n\n        }).catch((error) => {\n            this.setState({signInError : error.message});\n        });\n    }\n\n    logout = async () => {\n        await firebase.auth().signOut();\n        this.setState({user : {\n            uid : ''\n        }});\n    }\n\n    addUser = (user) => {\n        \n        //console.log(user);\n        \n        let stateUser = {\n            email : user.email\n        }\n\n        let users = {...this.state.users};\n            users[user.uid] = stateUser;\n\n            this.setState({users});\n    }\n\n    getUser = (hash) => {\n        \n        let toRet = null;\n\n        if(this.userExists(hash))\n        {\n            toRet = this.state.users[hash];\n        }\n\n        return toRet;\n    }\n\n    /**\n     * takes some val for a rule's drinks and sanitizes it for addition to the DB\n     */\n    sanitizeDrinks = (val) => {\n        \n        val = val.replace(/([\\d]+) drink(s)?/gi,'$1');\n\n        return val;\n    }\n\n    userExists = (user) => {\n        \n        if(user === undefined) return false;\n\n        try\n        {\n            let uid = typeof user === 'string' ? user : user.uid;\n    \n            return this.state.users[uid] !== undefined;\n            \n        }\n        catch(e)\n        {\n            console.error('Error checking for user',user);\n            return false;\n        }\n    }\n\n    signup = (email,pass) =>\n    {\n        //console.log('app signup');\n\n        firebase.auth().createUserWithEmailAndPassword(email,pass).then((res) => {\n            \n            this.authHandler(res);\n\n        }).catch((error) => {\n\n            //console.log(error);\n\n            this.setState({signupError : error.message});\n        })\n    }\n\n    onLoginClick = (e) => {\n        this.setState({loggingIn : true});\n    }\n\n    userLoggedIn = () => this.state.user.uid !== '';\n\n    renderAuthButton = () => {\n        \n        //<button className=\"App__login-button\" onClick={this.onLoginClick}>Log In</button>\n        //button onClick={this.logout} className=\"App__logout\">Turn Down</button>\n        //<Link to=\"/signup\" className=\"button-link App__sign-up-btn\">Signup</Link>\n\n        if(this.state.user.uid === '')\n        {\n            return (\n                <span>\n                    <button className=\"App__login-button link-button\" onClick={this.onLoginClick}>Log In</button>\n                    <Link to=\"/signup\" className=\"App__sign-up-btn\">Signup</Link>\n                </span>\n            );\n        }\n        else\n        {\n            return (\n                <span>\n                    <button onClick={this.logout} className=\"App__logout-button link-button\">Turn Down</button>\n                </span>\n            );\n        }\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.state.games);\n\n        //console.log('render app');\n        //return <Loader message=\"Loading...\"/>\n        //console.log(this.state.games);\n\n\n        if(this.state.loggingIn && this.mode !== 'signup')\n            return <Login authenticate={this.authenticate} error={this.state.signInError} />;\n\n        if(Object.keys(this.state.games).length === 0)\n        {\n            //console.log('delay for fb');\n            return <Loader message=\"Turning Up...\" />;\n        }\n\n        //console.log('render app',this.state.loading);\n\n        if(this.state.loading)\n        {\n            return <Loader message=\"Turning Up...\" />;\n        }\n\n        let view = null;\n        \n        if(this.state.mobile)\n        {\n            switch(this.props.mode)\n            {\n                case 'games' :\n                    view = <Games \n                        games={this.state.games} \n                        editGame={this.editGame} \n                        addGame={this.addGame} \n                        deleteGame={this.deleteGame}\n                        copyGame={this.copyGame}\n                        editRule={this.editRule} \n                        deleteRule={this.deleteRule}\n                        addRule={this.addRule}\n                        mode={this.props.mode}\n                        match={this.props.match}\n                        canEditGame={this.canEditGame}\n                        canEditRule={this.canEditRule}\n                        canDeleteGame={this.canDeleteGame}\n                        canDeleteRule={this.canDeleteRule}\n                        userLoggedIn={this.userLoggedIn}\n                        getUser={this.getUser} />;\n                    break;\n                case 'game' :\n                    view = <Game \n                            index={this.props.match.params.ID} \n                            games={this.state.games} \n                            editGame={this.editGame} \n                            addGame={this.addGame} \n                            deleteGame={this.deleteGame}\n                            copyGame={this.copyGame}\n                            editRule={this.editRule} \n                            deleteRule={this.deleteRule}\n                            addRule={this.addRule}\n                            mode={this.props.mode}\n                            match={this.props.match}\n                            canEditGame={this.canEditGame}\n                            canEditRule={this.canEditRule}\n                            canDeleteGame={this.canDeleteGame}\n                            canDeleteRule={this.canDeleteRule}\n                            userLoggedIn={this.userLoggedIn}\n                            getUser={this.getUser}\n                            setSessionCombo={this.setSessionCombo} />;\n                    break;\n                case 'signup' :\n                    view = <Signup error={this.state.signupError} signup={this.signup} />;\n                    break;\n                default :\n                    view = <NotFound />;\n            }\n        }\n        else\n        {\n            switch(this.props.mode)\n            {\n                case 'signup' :\n                    view = <Signup signup={this.signup} error={this.state.signupError} />;\n                    break;\n                    \n                default :\n                    view = <Desktop \n                    games={this.state.games} \n                    editGame={this.editGame} \n                    addGame={this.addGame} \n                    deleteGame={this.deleteGame}\n                    copyGame={this.copyGame}\n                    editRule={this.editRule} \n                    deleteRule={this.deleteRule}\n                    addRule={this.addRule}\n                    mode={this.props.mode}\n                    match={this.props.match}\n                    canEditGame={this.canEditGame}\n                    canEditRule={this.canEditRule}\n                    canDeleteGame={this.canDeleteGame}\n                    canDeleteRule={this.canDeleteRule}\n                    userLoggedIn={this.userLoggedIn}\n                    getUser={this.getUser}\n                    setSessionCombo={this.setSessionCombo}\n                    currentComboCount={this.getCurrentSessionComboCount()} />\n            }\n            \n        }\n\n        //view = null;\n        \n        return (\n            \n            <div className={`App App--${this.state.mobile ? 'mobile' : 'desktop'}`}>\n                <header className=\"App__header\">\n                    <span>\n                        <Link to=\"/\" className=\"App__home-link\">Home</Link>\n                        {this.renderAuthButton()}\n                    </span>\n\n                    <SessionManager\n                        createSession={this.createSession}\n                        leaveSession={this.leaveSession}\n                        joinSession={this.joinSession}\n                        currentSession={this.state.currentSession}\n                    />\n                    \n                    <span className=\"App__current-user\">\n                        \n                        {this.state.user.email}\n                    </span>\n                </header>\n                {view}\n            </div>\n            );\n    }\n}\n\nexport default withRouter(App);","import React from 'react';\nimport {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport App from './App';\nimport NotFound from './NotFound';\n\nclass Router extends React.Component\n{\n    render()\n    {\n        return (\n            <BrowserRouter>\n                <Switch>\n                    <Route path=\"/game/:ID\" render={(props) => <App {...props} mode=\"game\" />} />\n                    <Route exact path=\"/signup\" render={(props) => <App {...props} mode=\"signup\" />} />\n                    <Route exact path=\"/\" render={(props) => <App {...props} mode=\"games\" />} />\n                    <Route component={NotFound} />\n                </Switch>\n            </BrowserRouter>\n        );\n    }\n}\n\nexport default Router;","import React from 'react';\nimport {render} from 'react-dom';\n\nimport Router from './components/Router';\n\nimport './css/style.css';\n\nrender (<Router />, document.querySelector('#main'));"],"sourceRoot":""}