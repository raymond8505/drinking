{"version":3,"sources":["fakeGames.js","DataHelper.js","components/Loader.js","components/NotFound.js","components/EditButton.js","components/DeleteButton.js","components/GameSelect.js","components/RuleRow.js","components/RulesList.js","components/AddRulesForm.js","components/Alert.js","components/GameListItem.js","components/GameList.js","constants.js","components/GameAutoComplete.js","components/GamePill.js","components/GameMultiSelect.js","components/AddGameForm.js","components/ComboCounter.js","components/Game.js","components/Games.js","components/SessionManager.js","components/ShortCutsModal.js","components/Desktop.js","components/Login.js","config.js","base.js","components/Signup.js","components/App.js","components/Router.js","index.js"],"names":["fakeGames","DataHelper","data","hasData","Object","keys","length","forEach","func","undefined","Error","map","getGameByKey","key","getChildGames","parentKey","games","game","parent_game","gameHasRules","rules","getGameRules","includeParents","order","_this","ruleKey","assign","gameKey","objectCollectionToArrayWithKey","collection","keyFieldName","arr","obj","push","arrayWithKeyToObjectCollection","sortRules","rulesArr","sort","a","b","dirNum","direction","valA","valB","field","toLowerCase","title","filed","sanitizeForSorting","val","char","startReg","RegExp","endReg","replace","getNewRuleKey","Date","now","getNewGameKey","sortGamesBy","dir","fieldArr","toRet","indexOf","e","console","log","getParentGames","gameOrKey","parent","gamesToKeys","getAncestors","ancestors","curKey","reverse","gameHasOtherUserGames","user","childGames","success","owner","gameHasOtherUserOwnedRules","hasOthers","rule","this","Loader","className","props","message","React","Component","defaultProps","NotFound","EditButton","state","currentMode","setEditing","editing","setState","handleClick","preventDefault","handler","onClick","role","DeleteButton","GameSelect","innerSelect","createRef","test","outPutOptions","options","value","selected","defaultValue","ref","onChange","includeToplevel","excludedGames","RuleRow","ruleField","drinksField","gameSelect","handleRuleEdit","current","drinks","ruleObj","editRule","ruleIndex","handleRuleDelete","window","confirm","deleteRule","renderRule","input","onKeyUp","closeOnEscape","which","type","span","renderOwner","ownerhash","getUser","email","renderDrinks","disabled","handleDoubleClick","renderGame","Link","to","focus","onDoubleClick","canEditRule","canDeleteRule","RulesList","currentFilter","filterField","ruleMatchesFilter","ruleText","renderRuleRows","gameIndex","index","onFilterKeyUp","currentTarget","onHeaderCellClick","target","getAttribute","renderSortLabel","addEventListener","shiftKey","metaKey","ctrlKey","blur","prevProps","prevState","currentGameKey","setTimeout","placeholder","cellPadding","cellSpacing","data-field","recursive","AddRulesForm","onWindowKeyPress","altKey","resetForm","clearForm","handleAddClick","ruleTitle","addRule","alert","name","Alert","Tag","tag","children","GameListItem","titleField","onAddEditClick","editGame","onDeleteClick","deleteGame","onNameInputKeyPress","renderName","viewGame","link","onCopyClick","copyGame","highlight","id","canEditGame","canDeleteGame","userLoggedIn","showChildren","GameList","gameMatchesFilter","filter","q","renderGameList","currentIndex","handleFilterKeyUp","RAYMOND_UID","GameAutoComplete","onTitleFieldKeyPress","suggestions","allSuggestionsSelected","nextSuggestion","previousSuggestion","clearSuggestions","currentSuggestion","chooseGame","renderAutoComplete","isSelected","g","selectedGames","includeGeneralRules","includes","onGameSelect","clearTitleField","setCurrentSuggestion","i","findPreviousSuggestion","prevIndex","findNextSuggestion","nextIndex","allSelected","renderSuggestions","style","height","classes","join","onMouseEnter","currentSelection","GamePill","onClose","linkGame","showCloseBtn","GameMultiSelect","sanitizeGames","gameSelected","gen","clearGames","newGameSelect","selectedGame","onGameRemoved","gameToRemove","renderGames","AddGameForm","listenForShortcuts","onAddGameClick","parents","addGame","onMultiSelectError","onError","ComboCounter","animating","open","maxCombo","animateSpeed","onGlobalKeyPress","targetTag","tagName","addDrink","removeDrink","clearDrinks","count","setSessionCombo","handleRemoveDrinkClick","animateCount","handleClearDrinksClick","handleAddDrinkClick","calcShotHeight","handleToggleClick","defaultTypes","Game","titleInput","editButton","shell","parentsMS","gameScrollPostBeforeUpdate","onParentChange","newParent","thisGameKey","handleTitleEditClick","renderParentPills","renderBreadCrumbs","html","ancestor","class","scrollTop","scrollTo","Helmet","currentComboCount","width","Games","onToggleClick","visible","canEditRules","canDeleteRules","SessionManager","currentSession","keyField","handleCreateSession","createSession","leaveSession","handleJoinSession","joinSession","renderSessionButtons","href","ShortcutsModal","shortcuts","combo","desc","show","close","renderShortcuts","shortcut","Desktop","showShortcuts","match","params","ID","mode","renderAuthButton","withRouter","Login","userField","passwordField","authenticate","pass","error","required","config","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","initializeApp","base","Rebase","createClass","database","Signup","passwordField2","signup","pass1","App","mobile","uid","users","loading","signupError","loginError","loggingIn","sessions","gamesInited","sessionKeyLength","sessionLife","shortCutsModal","getCurrentSessionComboCount","inASession","setSession","session","created","getTime","pruneSessions","toUpperCase","sessionKeyExists","sessionStorage","setItem","removeItem","generateSessionKey","code","Math","round","random","String","fromCharCode","generateUniqueSessionKey","newRule","sanitizeDrinks","oldGame","newGame","gameTitle","newGameKey","copyRules","oldGameKey","newRules","newRuleKey","newKey","history","mobileCheck","matches","authHandler","resp","userExists","addUser","location","pathname","u","p","auth","signInWithEmailAndPassword","then","signInError","catch","logout","signOut","stateUser","hash","createUserWithEmailAndPassword","res","onLoginClick","db","hostname","fbRefU","syncState","context","fbRefSessions","t","ssKey","getItem","fbRef","onAuthStateChanged","matchMedia","addListener","view","ShortCutsModal","Router","BrowserRouter","Switch","Route","path","render","exact","component","document","querySelector"],"mappings":"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","file":"static/js/main.1db9701d.chunk.js","sourcesContent":["const fakeGames = {\n    \"game0\" : {\n      \"rules\" : {\n        \"game0_rule1585428503206\" : {\n          \"drinks\" : \"2 drinks\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"The name of the episode or movie is said or written\"\n        },\n        \"game0_rule1585443393434\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"obvious stock footage\"\n        },\n        \"game0_rule1585443993724\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"ESL Characters speaking English for no reason\"\n        },\n        \"game0_rule1585444223055\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"nut shot\"\n        },\n        \"game0_rule1585445102020\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"obviously empty coffee cup\"\n        },\n        \"game0_rule1585447770911\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"someone rips up a photo \"\n        },\n        \"game0_rule1585507595857\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Incorrect portrayal of \\\"hacking\\\"\"\n        },\n        \"game0_rule1585528860565\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"romantic tension between non spouses (will they / wont they characters)\"\n        }\n      },\n      \"title\" : \"General Rules\"\n    },\n    \"game1\" : {\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1_rule1\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game1\",\n          \"rule\" : \"Bone snap\"\n        },\n        \"game1_rule1585442777686\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Explosion\"\n        },\n        \"game1_rule1585442794346\" : {\n          \"drinks\" : \"2\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"cool explosion (ex: slow mo)\"\n        },\n        \"game1_rule1585442823231\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"unrealistic survival / healing\"\n        },\n        \"game1_rule1585442901374\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"glass breaks\"\n        },\n        \"game1_rule1585442925083\" : {\n          \"drinks\" : \"3\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"decapitation\"\n        },\n        \"game1_rule1585443336960\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"slow motion\"\n        },\n        \"game1_rule1585444849287\" : {\n          \"drinks\" : \"3\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"\\\"turn in your badge and gun\\\" / \\\"youre suspended!\\\" / etc\"\n        },\n        \"game1_rule1585448652082\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"headshot\"\n        }\n      },\n      \"title\" : \"Action\"\n    },\n    \"game1585442982618\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1585442982618_rule1585442993103\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Any dino related pun\"\n        },\n        \"game1585442982618_rule1585443044303\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Anytime you see a choker or midriff\"\n        },\n        \"game1585442982618_rule1585443065678\" : {\n          \"drinks\" : \"drink til it stops\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Dino roar\"\n        },\n        \"game1585442982618_rule1585443084585\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"bad cgi\"\n        },\n        \"game1585442982618_rule1585443110038\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"T Rex does something with his hands\"\n        },\n        \"game1585442982618_rule1585443158546\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Dinosaur is too big to fit in something\"\n        },\n        \"game1585442982618_rule1585443171333\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"poor dino disguising / someone doesnt notice the dino is alive\"\n        },\n        \"game1585442982618_rule1585448716738\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"someone grabs someone else's dick\"\n        }\n      },\n      \"title\" : \"Tammy and the T Rex\"\n    },\n    \"game1585446169128\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game1585446169128_rule1585446187228\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585446169128\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"\\\"enhance\\\"\"\n        }\n      },\n      \"title\" : \"Police / Crime\"\n    },\n    \"game1585519764301\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game1585519764301_rule1585519780902\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585519764301\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Cross Fade\"\n        },\n        \"game1585519764301_rule1585519789583\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585519764301\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Saxophone Soundtrack\"\n        }\n      },\n      \"title\" : \"Man Hunt\"\n    },\n    \"game1585541082218\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1585541104293\",\n      \"rules\" : {\n        \"game1585541082218_rule1585541134205\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Something is bejewelled\"\n        },\n        \"game1585541082218_rule1585541642525\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"a tiger hurts or scares someone\"\n        },\n        \"game1585541082218_rule1585545303143\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"tacky / trashy decorations\"\n        }\n      },\n      \"title\" : \"Tiger King\"\n    },\n    \"game1585541104293\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1585541104293_rule1585751022903\" : {\n          \"drinks\" : \"1 drink\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Someone Cries\"\n        }\n      },\n      \"title\" : \"Reality TV\"\n    },\n    \"game1585600289161\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"title\" : \"Jason Statham\"\n    },\n    \"game1585600326133\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1585600289161\",\n      \"rules\" : {\n        \"game1585600326133_rule1585600342757\" : {\n          \"drinks\" : \"1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Statham uses his boomerang\"\n        }\n      },\n      \"title\" : \"In The Name of the king\"\n    },\n    \"game1585662389801\" : {\n      \"owner\" : \"\",\n      \"parent_game\" : \"game1585541104293\",\n      \"title\" : \"90 Day Fiance\"\n    },\n    \"game1585662406239\" : {\n      \"owner\" : \"\",\n      \"parent_game\" : \"game1585541104293\",\n      \"rules\" : {\n        \"game1585662406239_rule1585662454054\" : {\n          \"drinks\" : \"everyone but the closest guess drinks. Price is right rules\",\n          \"gameKey\" : \"game1585662406239\",\n          \"owner\" : \"\",\n          \"rule\" : \"Everyone guesses the budget of each bride before they say it\"\n        }\n      },\n      \"title\" : \"Say Yes To The Dress\"\n    },\n    \"game1585872782855\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"title\" : \"test to delete\"\n    },\n    \"game2\" : {\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game2_rule1\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game2\",\n          \"rule\" : \"Splits\"\n        }\n      },\n      \"title\" : \"Jean Claude Van Damme\"\n    },\n    \"game3\" : {\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game3_rule1\" : {\n          \"drinks\" : \"1 sip\",\n          \"gameKey\" : \"game3\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"Jump Scare\"\n        },\n        \"game3_rule1585427944776\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game3\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"rule added by raymond@raymond\"\n        }\n      },\n      \"title\" : \"Horror Movies\"\n    },\n    \"game4\" : {\n      \"parent_game\" : \"game0\",\n      \"title\" : \"Cartoons\"\n    },\n    \"game5\" : {\n      \"parent_game\" : \"game4\",\n      \"rules\" : {\n        \"game5_rule1\" : {\n          \"drinks\" : \"drink til it stops\",\n          \"gameKey\" : \"game5\",\n          \"rule\" : \"CGI Webslinging\"\n        }\n      },\n      \"title\" : \"Adventures of Spiderman\"\n    }\n  }\n\nexport default fakeGames;","class DataHelper\n{\n    constructor(data)\n    {\n        this.data = data;\n    }\n\n    data = {};\n\n    hasData = () => this.data && Object.keys(this.data).length > 0;\n\n    forEach = (func,data) => {\n\n        if(data === undefined)\n        {\n            throw new Error('DataHelper.forEach requires a data parameter');\n        }\n\n        return Object.keys(data).map(func);\n    }\n\n    getGameByKey = (key) => {\n\n        //console.log(this.data[key]);\n\n        return this.data[key];\n    }\n\n    getChildGames = (parentKey) => {\n\n        //console.log('get child games');\n\n        let games = {};\n\n        Object.keys(this.data).map((key) => {\n\n            let game = this.getGameByKey(key);\n\n            if(game.parent_game && game.parent_game[0] === parentKey)\n            {\n                //console.log(game,game.parent_game,'===',parentKey);\n                games[key] = game;\n            }\n\n            return null;\n        });\n\n        //console.log(games);\n\n        return games;//this.sortGamesBy('title','asc',games);\n    }\n\n    gameHasRules = (game) => game.rules && Object.keys(game.rules).length > 0;\n\n    getGameRules = (key,includeParents = true,order) => {\n\n        let game = this.getGameByKey(key);\n        let rules = {};\n        let _this = this;\n\n        if(this.gameHasRules(game))\n        {\n            this.forEach((ruleKey) => {\n                rules[ruleKey] = Object.assign(game.rules[ruleKey],{gameKey : key});\n            },game.rules);\n        }\n\n        if(includeParents && game.parent_game && game.parent_game.length > 0)\n        {\n            //console.log('parent rules too');\n\n            game.parent_game.map((parentKey) => {\n                \n                return Object.assign(rules, _this.getGameRules(parentKey,false,order));\n\n            });\n        }\n\n        return rules;\n    }\n    \n    // getGameRules = (key,recursive = false,order) => {\n        \n    //     let game = this.getGameByKey(key);\n    //     let rules = {};\n    //     let _this = this;\n\n    //     if(this.gameHasRules(game))\n    //     {\n    //         this.forEach((ruleKey) => {\n    //             rules[ruleKey] = Object.assign(game.rules[ruleKey],{gameKey : key});\n    //         },game.rules);\n    //     }\n        \n    //     if(recursive && game.parent_game)\n    //     {\n    //         game.parent_game.forEach((key) => {\n    //             let parentGame = this.getGameByKey(key);\n            \n    //             if(parentGame && game.parent_game)\n    //             {\n    //                 rules = Object.assign(rules,_this.getGameRules(key,recursive,order));\n    //             }\n    //         });\n    //     }\n\n    //     return rules;\n    // }\n\n    objectCollectionToArrayWithKey = (collection,keyFieldName = 'key') => {\n\n        let arr = [];\n\n        this.forEach((key)=>{\n            var obj = collection[key];\n                obj[keyFieldName] = key;\n\n            arr.push(obj);\n        },collection);\n        return arr;\n    }\n\n    arrayWithKeyToObjectCollection = (arr,keyFieldName = 'key') => {\n\n        let collection = {};\n\n            arr.forEach((obj) => {\n                \n                let key = obj[keyFieldName];\n                \n                obj[keyFieldName] = null;\n\n                collection[key] = obj;\n            });\n\n        return collection;\n    }\n\n    sortRules = (rules,order) => {\n\n        let rulesArr = this.objectCollectionToArrayWithKey(rules);\n\n        //console.log(rulesArr);\n        \n        rulesArr.sort((a,b) => {\n            \n            let dirNum = order.direction === 'asc' ? 1 : -1;\n            let valA = '';\n            let valB = '';\n\n            switch(order.field)\n            {\n                case 'rule' :\n                case 'drinks' :\n                    valA = a[order.field].toLowerCase();\n                    valB = b[order.field].toLowerCase();\n                    break;\n                case 'game' :\n                    valA = this.getGameByKey(a.gameKey).title.toLowerCase();\n                    valB = this.getGameByKey(b.gameKey).title.toLowerCase();\n                    break;\n                default :\n                    valA = a[order.field];\n                    valB = b[order.filed];\n            }\n\n            valA = this.sanitizeForSorting(valA);\n            valB = this.sanitizeForSorting(valB);\n\n            return valA <= valB ? -1 * dirNum : dirNum;\n        });\n\n        //console.log(rulesArr);\n\n        let rulesCollection = this.arrayWithKeyToObjectCollection(rulesArr);\n        \n        return rulesCollection;\n    }\n\n    sanitizeForSorting = (val) => {\n\n        let badChars = ['\"',\"'\",'-','(',')'];\n\n        badChars.forEach((char) => {\n            \n            let startReg = new RegExp(`^[${char}]+`);\n            let endReg = new RegExp(`[${char}]+$`);\n\n            val = val.replace(startReg,'').replace(endReg,'');\n        });\n\n        return val;\n    }\n\n    getNewRuleKey = (gameKey) => {\n\n        return `${gameKey}_rule${Date.now()}`;\n    }\n\n    getNewGameKey = () => `game${Date.now()}`;\n\n    sortGamesBy = (field,dir = 'asc',games) => {\n        \n        if(games === undefined)\n            return  {};\n\n        //console.log('sort games',games);\n        //console.log('sort games',games);\n\n        let fieldArr = []\n        let toRet = {};\n        let dirNum = dir.toLowerCase().indexOf('asc') === 0 ? 1 : -1;\n\n        this.forEach((key) => {\n            let game = this.getGameByKey(key);\n\n            if(!game)\n                return;\n\n            try\n            {\n\n                fieldArr.push(\n                    {\n                        key : key,\n                        [field] : game[field]\n                    }\n                );\n            }\n            catch(e)\n            {\n                console.log(game,e);\n                return;\n            }\n        },games);\n\n        fieldArr.sort((a,b) => {\n\n            switch(typeof a[field])\n            {\n                case 'string' :\n                default : \n                    return a[field] && b[field] ? a[field].toLowerCase() < b[field].toLowerCase() ? dirNum * -1 : dirNum * 1 : 0;\n            }\n\n        })\n\n        fieldArr.forEach((game) => {\n            toRet[game.key] = this.getGameByKey(game.key);\n        });\n\n        return toRet;\n\n    }\n\n    getParentGames = (gameOrKey) => {\n\n        let game = typeof gameOrKey === 'object' ? gameOrKey : this.getGameByKey(gameOrKey);\n\n        let parents = game.parent_game && game.parent_game.length > 0 ? game.parent_game.map((parentKey) => {\n\n            let parent = this.getGameByKey(parentKey);\n                parent.gameKey = parentKey;\n\n                return parent;\n        }) : [];\n\n        return parents;\n        \n    }\n\n    gamesToKeys = (games) => {\n\n        return games.map((game) => {\n            return game.gameKey;\n        })\n    }\n\n    getAncestors = (key) => {\n        let ancestors = [];\n        //let game = this.getGameByKey(key);\n        \n        let curKey = key;\n        let parent = undefined; //this.getParentGame(key);\n\n        while(parent !== undefined)\n        {\n            curKey = parent.key;\n            parent = this.getParentGames(curKey);\n\n            ancestors.push(parent);\n            \n        }\n\n        return ancestors.reverse();\n    }\n\n    gameHasOtherUserGames = (gameKey,user) => {\n        \n        let childGames = this.getChildGames(gameKey);\n        let success = true;\n\n        this.forEach((key) => {\n\n            let game = this.getGameByKey(key);\n\n            if(game.owner !== user)\n            {\n                success = false;\n                return;\n            }\n            \n        },childGames);\n\n        return success;\n    }\n\n    gameHasOtherUserOwnedRules = (game,user) => {\n\n        let hasOthers = false;\n\n        this.forEach((key)=>{\n\n            let rule = game.rules[key];\n\n            //console.log(rule);\n            \n            if(rule && Object.keys(rule).length > 0 && rule.owner && rule.owner !== user)\n            {\n                hasOthers = true;\n                return;\n            }\n\n        },game.rules);\n        return hasOthers;\n    }\n}\nexport default DataHelper;\n","import React from 'react';\nimport PropTypes from 'prop-types'\n\nclass Loader extends React.Component\n{\n    static propTypes = {\n        message : PropTypes.string\n    };\n    static defaultProps =  {\n        message : ''\n    }\n\n    render()\n    {\n        return (\n            <div className=\"Loader\">\n                <div className=\"lds-dual-ring\"></div>\n                {this.props.message !== '' ? <h4 className=\"Loader__message\">{this.props.message}</h4> : null}\n            </div>);\n    }loading\n}\n\nexport default Loader;","import React from 'react';\n\nclass NotFound extends React.Component\n{\n    render()\n    {\n        return (\n            <div className=\"NotFound\">\n                <h1>Page Not Found</h1>\n            </div>);\n    }\n}\n\nexport default NotFound;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass EditButton extends React.Component\n{\n    static propTypes = {\n        handler : PropTypes.func.isRequired\n    };\n\n    state = {\n        currentMode : 'display'\n    };\n\n    setEditing = (editing) => {\n        this.setState({editing : editing});\n    }\n\n    handleClick = (e) => {\n    \n        e.preventDefault();\n\n        this.setState ({ currentMode : this.state.currentMode === 'display' ? 'confirm' : 'display'});\n        \n        this.props.handler(e);\n    }\n\n    render()\n    {\n        return (\n            <button className={`EditButton EditButton--${this.state.currentMode}`} onClick={this.handleClick} title=\"Edit Game\">\n                <span className=\"sr-only\">\n                    {this.state.currentMode === 'display' ? 'Edit' : 'Confirm'}\n                </span>\n                <i className=\"EditButton__icon\" role=\"presentation\"></i>\n            </button>);\n    }\n}\n\nexport default EditButton;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass DeleteButton extends React.Component\n{\n    static propTypes = {\n        handler : PropTypes.func.isRequired\n    };\n\n    state = {\n        currentMode : 'display'\n    };\n\n    handleClick = (e) => {\n    \n        e.preventDefault();\n\n        this.setState ({ currentMode : this.state.currentMode === 'display' ? 'confirm' : 'display'});\n        \n        this.props.handler(e);\n    }\n\n    render()\n    {\n        return (\n            <button className={`DeleteButton DeleteButton--${this.state.currentMode}`} onClick={this.handleClick} title=\"Delete Game\">\n                <span className=\"sr-only\">\n                    {this.state.currentMode === 'display' ? 'Edit' : 'Confirm'}\n                </span>\n                <i className=\"DeleteButton__icon\" role=\"presentation\"></i>\n            </button>);\n    }\n}\n\nexport default DeleteButton;","import React from 'react';\nimport PropTypes from 'prop-types'\nimport DataHelper from '../DataHelper';\n\nclass GameSelect extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        defaultValue : PropTypes.string,\n        excludedGames : PropTypes.array //doesn't work... yet\n    };\n\n    static defaultProps =  {\n        includeToplevel : false,\n        defaultValue : 'game0',\n        onChange : function(e){},\n        excludedGames : []\n    }\n\n    innerSelect = React.createRef();\n\n    test = () => this.innerSelect;\n\n    outPutOptions = () => {\n        \n        let options = [];\n\n        this.data = new DataHelper(this.props.games);\n\n        this.data.forEach((key) => {\n            let game = this.data.getGameByKey(key);\n\n            options.push(<option key={'game-select_' + key} value={key} selected={key === this.props.defaultValue ? 'selected' : ''}>\n                {game.title}\n            </option>)\n        },this.data.sortGamesBy('title','asc',this.props.games));\n\n        return options;\n    }\n    render()\n    {\n        //console.log(this.props.defaultValue);\n        return (\n            <select className=\"GameSelect\" ref={this.innerSelect} onChange={this.props.onChange} defaultValue={this.props.defaultValue}>\n                {/* this.props.includeToplevel ? <option value=\"\">Top Level</option> : null */}\n                {this.outPutOptions()}\n            </select>);\n    }\n}\n\nexport default GameSelect;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EditButton from './EditButton';\nimport DeleteButton from './DeleteButton';\nimport DataHelper from '../DataHelper';\nimport {Link} from 'react-router-dom';\nimport GameSelect from './GameSelect';\n\nclass RuleRow extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            editing : false,\n            rule : null\n        }\n    }\n    \n\n    ruleField = React.createRef();\n    drinksField = React.createRef();\n    gameSelect = React.createRef();\n\n    static propTypes = {\n        ruleIndex : PropTypes.string.isRequired,\n        gameIndex : PropTypes.string.isRequired, //this is for the game showing the rule, not the game owning the rule\n                                                //using getGameRules() will return a struct of rules each with a new gameKey field for\n                                                //the key of the game that owns that rule\n        rule : PropTypes.object.isRequired,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired\n    };\n    \n    static defaultProps =  {\n        \n    }\n\n    componentDidUpdate()\n    {\n        if(this.ruleField && this.ruleField.current)\n        {\n            this.ruleField.current.focus();\n        }\n    }\n\n    handleRuleEdit = (e) => {\n\n        let editing = this.state.editing;\n        \n\n        //let drinksField = this.state.drinksField.current;\n        //let ruleField = this.state.ruleField.current;\n\n        console.log(this.drinksField,this.ruleField);\n\n        if(this.drinksField \n            && this.ruleField\n            && this.drinksField.current\n            && this.ruleField.current)\n        {\n            let drinks = this.drinksField.current.value;\n            let rule = this.ruleField.current.value;\n\n            if(drinks === '')\n            {\n                drinks = this.state.rule.drinks;\n            }\n\n            if(rule === '')\n            {\n                rule = this.state.rule.rule;\n            }\n\n            let ruleObj = {...this.state.rule};\n                ruleObj.rule = rule;\n                ruleObj.drinks = drinks;\n            \n                ruleObj.gameKey = this.gameSelect.current.innerSelect.current.value;//.innerSelect.value;\n\n            this.props.editRule(this.props.rule.gameKey,this.props.ruleIndex,ruleObj);\n\n            this.setState({\n                rule : ruleObj\n            });\n        }\n        \n\n        this.setState({\n            editing : !editing})\n\n            /*\n        if(editing)\n        {\n            let rule = {\n            rule : this.ruleField.current ? this.ruleField.current.value : this.state.rule.rule,\n            drinks : this.drinksField.current.value\n        };\n            this.props.editRule(this.props.rule.gameKey,this.props.ruleIndex,rule);\n        }\n        else\n        {\n            console.log(this.rule);\n            //this.ruleField.current.focus();\n        }\n\n        this.setState({\n            rule : rule\n        }); */\n\n    }\n\n    handleRuleDelete = (e) => { \n        \n        if(this.state.editing)\n        {\n            this.setState({editing : false});\n        }\n        else\n        {\n            if(window.confirm(`Are you sure you want to Delete the rule ${this.state.rule.rule} (${this.state.rule.drinks})?`))\n            {\n                this.props.deleteRule(this.props.rule.gameKey,this.props.ruleIndex);\n    \n                this.setState({editing : false});\n            }\n        }\n    }\n\n    renderRule = () =>\n    {\n        let input = <input className=\"RuleRow__title-field editable\" onKeyUp={(e) => {\n\n            this.closeOnEscape(e);\n\n            if(e.which === 13)\n            {\n                this.handleRuleEdit();\n            }\n        }} type=\"text\" ref={this.ruleField} defaultValue={this.state.rule.rule} />;\n        let span = <span className=\"RuleRow__title-field\">{this.state.rule.rule}</span>;\n\n        return this.state.editing ? input : span;\n    }\n\n    componentWillMount()\n    {\n        this.setState({rule : this.props.rule});\n        this.data = new DataHelper(this.props.games);\n    }\n    renderOwner = (ownerhash) => {\n        \n        let user = this.props.getUser(ownerhash);\n\n        return <span className=\"RuleRow__owner\">{user ? user.email : 'Unknown User'}</span>\n\n    }\n    renderDrinks = () => {\n        let input = <input \n            className=\"RuleRow__drinks-field editable\" \n            type=\"text\" \n            disabled={!this.state.editing} \n            ref={this.drinksField} \n            defaultValue={this.props.rule.drinks}\n            onKeyUp={(e) => {\n\n                console.log(e.which);\n\n                this.closeOnEscape(e);\n\n                if(e.which === 13)\n                {\n                    this.handleRuleEdit();\n                }\n            }} />\n        let span = <span className=\"RuleRow__drinks-field\">{this.props.rule.drinks}</span>;\n\n        return this.state.editing ? input : span;\n    }\n\n    handleDoubleClick = (e) => {\n        \n        if(!this.state.editing)\n        {\n            this.setState({editing : true});\n        }\n    }\n\n    renderGame = (game) => {\n        \n        return this.state.editing ? \n                <GameSelect\n                    games={this.props.games}\n                    defaultValue={this.props.rule.gameKey}\n                    ref={this.gameSelect} />\n                : <Link to={`/game/${this.props.rule.gameKey}`} className=\"RuleRow__game-link\">{game.title}</Link>;\n    }\n\n    closeOnEscape = (e) => {\n\n        if(e.which === 27)\n        {\n            this.setState({editing : false});\n        }\n    }\n\n    render()\n    {\n        let game = this.data.getGameByKey(this.props.rule.gameKey);\n\n        return (\n            <tr className=\"RuleRow\" onDoubleClick={this.handleDoubleClick}>\n                \n                <td className=\"RuleRow__rule-cell\">\n                    {this.renderRule()}\n                </td>\n                <td className=\"RuleRow__drinks-cell\">\n                    {this.renderDrinks()}\n                </td>\n                <td className=\"RuleRow__game-cell\">\n                    {this.renderGame(game)}\n                </td>\n                {/* <td className=\"RuleRow__owner-cell\">\n                    {this.renderOwner(this.props.rule.owner)}\n                </td> */}\n                <td className=\"RuleRow__controls-cell\">\n                    {this.props.canEditRule(this.props.rule) ? <EditButton handler={this.handleRuleEdit} /> : null}\n                    {this.props.canDeleteRule(this.props.rule) ? <DeleteButton handler={this.handleRuleDelete} /> : null}\n                </td>\n            </tr>);\n    }\n}\n\nexport default RuleRow;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DataHelper from '../DataHelper';\nimport RuleRow from './RuleRow';\n\nclass RulesList extends React.Component\n{\n    state = {\n        rules : undefined,\n        currentFilter : '',\n        order : null\n    };\n\n    static propTypes = {\n        recursive : PropTypes.bool,\n        index : PropTypes.string.isRequired,\n        games : PropTypes.object.isRequired,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        getUser : PropTypes.func.isRequired \n    };\n\n    static defaultProps =  {\n        recursive : false\n    }\n\n    filterField = React.createRef();\n\n    componentDidMount()\n    {\n        window.addEventListener('keydown',(e) => {\n            \n            if(this.filterField && this.filterField.current)//ctrl/cmd + shift + f\n            {\n                if((e.shiftKey && (e.metaKey || e.ctrlKey) && e.which === 70))\n                {\n                    this.filterField.current.focus();\n                }\n                else if(e.which === 27)\n                {\n                    this.filterField.current.value = '';\n                    this.filterField.current.blur();\n                    this.setState({currentFilter : ''});\n                }\n            }\n        })\n    }\n\n    ruleMatchesFilter = (ruleText) => {\n\n        //console.log(this.state.currentFilter,ruleText);\n\n        if(this.state.currentFilter === '') return true;\n\n        return this.state.currentFilter.toLowerCase().indexOf(ruleText.toLowerCase()) > -1 ||\n            ruleText.toLowerCase().indexOf(this.state.currentFilter.toLowerCase()) > -1;\n    }\n\n    renderRuleRows = () =>\n    {\n        return <tbody>{this.data.forEach((key)=>{\n\n            let rule = this.rules[key];\n\n            if(this.ruleMatchesFilter(rule.rule))\n            {\n                return <RuleRow \n                    games={this.props.games}\n                    key={key} \n                    rule={rule} \n                    ruleIndex={key}\n                    gameIndex={this.props.index} \n                    deleteRule={this.deleteRule} \n                    editRule={this.props.editRule}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteRule={this.props.canEditRule}\n                    getUser={this.props.getUser}\n                />\n            }\n            \n        },this.rules)}</tbody>\n    }\n\n    onFilterKeyUp = (e) => {\n    \n        //e.preventDefault();\n        let target = e.currentTarget;\n        let val = target.value;\n\n        this.setState({currentFilter : val});\n        \n    }\n\n    deleteRule = (gameIndex,ruleIndex) => {\n\n        let rules = {...this.rules};\n\n        if(rules[ruleIndex])\n        {\n            delete rules[ruleIndex];\n            this.setState({rules});\n\n            //console.log(gameIndex,ruleIndex);\n            this.props.deleteRule(gameIndex,ruleIndex);\n        }\n    }\n\n    onHeaderCellClick = (e) => {\n        let target = e.target;\n\n        if(target)\n        {\n            let field = target.getAttribute('data-field');\n\n            let order = this.state.order ? {...this.state.order} : {field : '',direction : ''};\n\n            if(order.field === field)\n            {\n                order.direction = order.direction === 'asc' ? 'desc' : 'asc';\n            }\n            else\n            {\n                order.direction = 'asc';\n                order.field = field;\n            }\n\n            this.setState({order});\n        }\n    }\n\n    renderSortLabel = (field) => {\n\n        if(!this.state.order) return null;\n\n        return field === this.state.order.field ?\n            this.state.order.direction === 'asc' ? <span className=\"RulesList__sort-direction fa fa-chevron-up\"></span> : <span className=\"RulesList__sort-direction fa fa-chevron-down\"></span>\n            : null\n    }\n\n    getSnapshotBeforeUpdate(prevProps,prevState)\n    {\n        this.currentGameKey = this.props.index;\n\n        return null;\n    }\n\n    getSnapshotAfterUpdate()\n    {\n        this.currentGameKey = this.props.index;\n    }\n    \n    render()\n    {\n        if(this.currentGameKey !== this.props.index && this.currentGameKey)\n        {\n            setTimeout(() => {\n                this.filterField.current.value = '';\n                this.onFilterKeyUp({currentTarget : this.filterField.current});\n            }, 1);\n        }\n\n        this.data = new DataHelper(this.props.games);\n\n        this.rules = this.data.getGameRules(this.props.index,true);\n\n        if(this.state.order)\n        {\n            this.rules = this.data.sortRules(this.rules,this.state.order);\n            //console.log(this.rules);\n        }\n\n        return (\n            <div className=\"RulesList\">\n                <header className=\"RulesList__header\">\n                    <input \n                        ref={this.filterField}\n                        type=\"search\" \n                        className=\"RulesList__filter-field\" \n                        placeholder=\"Find A Rule\" \n                        onKeyUp={this.onFilterKeyUp} />\n                </header>\n                \n                <table cellPadding=\"0\" cellSpacing=\"0\">\n                    <thead className=\"RulesList__header\">\n                        <tr>\n                            <th className=\"RulesList__rule-cell\" \n                                data-field=\"rule\"\n                                onClick={this.onHeaderCellClick}>Rule{this.renderSortLabel('rule')}</th>\n                            <th className=\"RulesList__drinks-cell\" \n                                data-field=\"drinks\"\n                                onClick={this.onHeaderCellClick}>Drinks{this.renderSortLabel('drinks')}</th>\n                            <th className=\"RulesList__game-cell\" \n                                data-field=\"game\"\n                                onClick={this.onHeaderCellClick}>Game{this.renderSortLabel('game')}</th>\n                            {/* <th className=\"RulesList__owner-cell\" \n                                data-field=\"owner\">Owner</th> */}\n                            <th className=\"RulesList__controls-cell\">&nbsp;</th>\n                        </tr>\n                    </thead>\n                    \n                    {this.renderRuleRows()}\n                </table>\n            </div>);\n    }\n}\n\nexport default RulesList;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GameSelect from './GameSelect';\nimport DataHelper from '../DataHelper';\n\nclass AddRulesForm extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        gameIndex : PropTypes.string.isRequired,\n        addRule : PropTypes.func.isRequired\n    };\n\n    static defaultProps =  {}\n\n    gameSelect = React.createRef();\n    ruleField = React.createRef();\n    drinksField = React.createRef();\n    \n    componentWillMount()\n    {\n        this.data = new DataHelper(this.props.games);\n        \n        window.addEventListener('keypress',this.onWindowKeyPress);\n    }\n\n    onWindowKeyPress = (e) => {\n\n        //console.log(e);\n\n        if(e.which === 174 && e.altKey) //alt + r\n        {\n            this.ruleField.current.focus();\n            e.preventDefault();\n        }\n    }\n\n    resetForm = () => \n    {\n        this.gameSelect.current.test().current.value = this.props.gameIndex;\n        this.ruleField.current.focus();\n    }\n\n    clearForm = () =>\n    {\n        this.ruleField.current.value =\n        this.drinksField.current.value = '';\n    }\n\n    handleAddClick = (e) => {\n        let gameKey = this.gameSelect.current.innerSelect.current.value;\n\n        let ruleTitle = this.ruleField.current.value;\n        let drinks = this.drinksField.current.value;\n        \n        if(ruleTitle === '' || drinks === '' || !gameKey || gameKey === '')\n        {\n            alert('Please choose a game, enter a rule and a drink penalty.');\n\n            return;\n        }\n        let rule = {\n            rule : ruleTitle,\n            drinks : drinks\n        };\n\n        this.props.addRule(gameKey,rule);     \n        this.clearForm();\n        this.resetForm();   \n    }\n\n    onKeyUp = (e) => {\n\n        if(e.which === 13) // Enter\n        {\n            this.handleAddClick();\n            e.preventDefault();\n        }\n    }\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        let parentGame = this.data.getGameByKey(this.props.gameIndex);\n        //console.log(parentGame);\n        \n        let games = this.data.sortGamesBy('title','asc',this.props.games);\n        \n        return (\n            <div className=\"AddRulesForm\">\n                <GameSelect \n                    games={games} \n                    name=\"game\" \n                    defaultValue={this.props.gameIndex} \n                    ref={this.gameSelect} className=\"AddRulesForm__game-select\" />\n                <textarea placeholder=\"Rule\" name=\"rule\" ref={this.ruleField} className=\"AddRulesForm__rule-field\"></textarea>\n                <input \n                    type=\"text\" \n                    name=\"drinks\" \n                    ref={this.drinksField}\n                    onKeyUp={this.onKeyUp} \n                    placeholder=\"Drinks\" \n                    className=\"AddRulesForm__drinks-field\" />\n                <button type=\"button\" onClick={this.handleAddClick}>Add Rule</button>\n            </div>);\n    }\n}\n\nexport default AddRulesForm;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Alert extends React.Component\n{\n    static propTypes = {\n        tag : PropTypes.string,\n        type : PropTypes.string\n    };\n    \n    static defaultProps = {\n        tag : 'span',\n        type : 'info'\n    };\n\n    render()\n    {\n        const Tag = `${this.props.tag}`;\n\n        return (\n            <Tag className={`Alert Alert--${this.props.type}`}>\n                {this.props.children}\n            </Tag>);\n    }\n}\n\nexport default Alert;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GameList from './GameList';\nimport EditButton from './EditButton';\nimport DeleteButton from './DeleteButton';\nimport { Link } from \"react-router-dom\";\nimport DataHelper from '../DataHelper';\n\nclass GameListItem extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            editing :false,\n            game : {}\n        }\n    }\n\n    titleField = React.createRef();\n\n    static propTypes = {\n        index : PropTypes.string.isRequired,\n        game : PropTypes.object.isRequired,\n        games : PropTypes.object.isRequired,\n        showChildren : PropTypes.bool,\n        editGame : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        copyGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        highlight : PropTypes.bool\n    };\n\n    static defaultProps =  {\n        showChildren :  false,\n        highlight : false\n    }\n\n    onAddEditClick = (e) => {\n\n        let editing = !this.state.editing;\n\n        if(!editing)\n        {\n            this.props.game.title = this.titleField.current.value;\n            this.props.editGame(this.props.index,this.props.game);\n        }\n\n        this.setState({editing : editing});\n    }\n\n    onDeleteClick = (e) => {\n        if(window.confirm(`Are you sure you want to delete \"${this.game.title}\"`))\n        {\n            this.props.deleteGame(this.props.index);\n        }\n        \n    }\n\n    componentWillMount()\n    {\n        this.setState({game : this.props.game});\n        \n    }\n\n    //onClick={(e) => this.props.history.push(`/game/${this.props.index}`)} \n    onNameInputKeyPress = (e) => {\n        \n        switch(e.which)\n        {\n            case 13: //enter\n                this.onAddEditClick();\n                break;\n            case 27: //esc\n                this.setState({editing : false});\n                break;\n        }\n    }\n    renderName = () => {\n        let input = <input \n                        onClick={this.viewGame} \n                        name=\"GameListItem__title\" \n                        ref={this.titleField} \n                        className=\"GameListItem__title editable\" \n                        onKeyUp={this.onNameInputKeyPress}\n        defaultValue={this.game.title} />;\n        const link = <Link \n                        to={`/game/${this.props.index}`}\n                        className=\"GameListItem__title\" \n                        >\n                        {this.game.title}\n                        </Link>;\n\n        return this.state.editing ? input : link;\n    }\n\n    handleDoubleClick = (e) => {\n        \n        if(!this.state.editing)\n        {\n            this.setState({editing : true});\n        }\n    }\n\n    onCopyClick = (e) =>\n    {\n        this.props.copyGame(this.props.index);\n    }\n\n    componentDidUpdate()\n    {\n        if(this.titleField && this.titleField.current)\n        {\n            this.titleField.current.focus();\n        }\n    }\n    \n    render()\n    {\n\n        this.data = new DataHelper(this.props.games);\n\n        this.game = this.data.getGameByKey(this.props.index);\n\n        //console.log(this.game.title,this.props.highlight);\n\n        //console.log(this.props.canDeleteGame);\n\n        return (\n            <li className={`GameListItem ${this.props.highlight ? ' GameListItem--highlight' : ''}`} id={this.props.index} onDoubleClick={this.handleDoubleClick}>\n                <header className=\"GameListItem__header\">\n                    {this.renderName()}\n\n                    <span className=\"GameListItem__controls-shell\">\n                        {this.props.canEditGame(this.game) ? <EditButton handler={this.onAddEditClick} /> : null}\n                        {this.props.canDeleteGame(this.props.index) ? <DeleteButton handler={this.onDeleteClick} /> : null}\n                        {this.props.userLoggedIn() ? <button type=\"button\" className=\"GameListItem__copy-btn\" onClick={this.onCopyClick} title=\"Copy Game\">\n                            <span className=\"sr-only\">duplicate this game</span>\n                            <i className=\"fa fa-copy\"></i>\n                        </button> : null}\n                    </span>\n\n                </header>\n                {\n                    this.props.showChildren ? <GameList \n                        game={this.game} \n                        games={this.props.games} \n                        parent={this.props.index}\n                        canEditGame={this.props.canEditGame}\n                        canEditRule={this.props.canEditRule}\n                        canDeleteGame={this.props.canDeleteGame}\n                        canDeleteRule={this.props.canEditRule}\n                        copyGame={this.props.copyGame} /> : null\n                }     \n            </li>);\n    }\n}\n\nexport default GameListItem;","import React from 'react';\nimport DataHelper from '../DataHelper';\nimport PropTypes from 'prop-types';\nimport Alert from './Alert';\nimport GameListItem from './GameListItem';\n\nclass GameList extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            filter : ''\n        };\n    }\n    static propTypes = {\n        editGame : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired, //the object of all raw games data from App.state.games\n        parent : PropTypes.string, //the key of the parent game, for which to show child games. Undefined = top level games\n        currentIndex : PropTypes.string\n    };\n\n    static defaultProps =  {\n        parent : undefined,\n        currentIndex : undefined\n    }\n\n    componentWillMount()\n    {\n        this.data = new DataHelper(this.props.games);\n    }\n\n    gameMatchesFilter = (gameKey) => {\n\n        if(this.state.filter === '') return true;\n\n        let game = this.data.getGameByKey(gameKey);\n        let title = game.title.toLowerCase();\n        let q = this.state.filter.toLowerCase();\n\n        return title.indexOf(q) > -1;\n    }\n\n    renderGameList = () => {\n\n        let _this = this;\n\n        if(!this.data || !this.data.hasData())\n        {\n            //console.log('te');\n            return <Alert type=\"error\" tag=\"li\">No Games</Alert>\n        }\n        else\n        {\n            this.data = new DataHelper(this.props.games);\n\n            //return null;\n\n            //console.log(this.props.currentIndex);\n            \n            //this.prop\n            let childGames = this.props.parent !== undefined ? \n                this.data.getChildGames(this.props.parent) : this.data.sortGamesBy('title','asc',this.props.games);\n\n            childGames = this.data.sortGamesBy('title','asc',childGames);\n\n            return this.data.forEach((key) => {\n        \n                return this.gameMatchesFilter(key) ? <GameListItem \n                    deleteGame={this.props.deleteGame} \n                    editGame={this.props.editGame}\n                    copyGame={this.props.copyGame} \n                    key={key} \n                    index={key} \n                    games={childGames} \n                    game={this.data.getGameByKey(key)}\n                    highlight={this.props.currentIndex === key}\n                    canEditGame={this.props.canEditGame}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteGame={this.props.canDeleteGame}\n                    userLoggedIn={this.props.userLoggedIn}\n                canDeleteRule={this.props.canEditRule} /> : null;\n            },childGames);\n                \n        }\n    }\n\n    handleFilterKeyUp = (e) => {\n\n        let q = e.currentTarget.value;\n\n        if(e.which === 27)\n        {\n            q = e.currentTarget.value = '';\n        }\n\n        this.setState({filter : q});\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        //console.log('game list render');\n        \n\n        return (\n            <div className=\"GameList\">\n                <input className=\"GameList__filter-field\" placeholder=\"Find a Game\" onKeyUp={this.handleFilterKeyUp} />\n                <ul className=\"GameList__items\">\n                    {this.renderGameList()}\n                </ul>\n            </div>);\n    }\n}\n\nexport default GameList;","export const GENERAL_RULES_KEY = 'game0';\n\nexport const RAYMOND_UID = 'uGqTXpxQHzg4K7DRhObVWvValvF3';","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DataHelper from '../DataHelper';\nimport { GENERAL_RULES_KEY } from '../constants';\n\nclass GameAutoComplete extends React.Component\n{\n    constructor(props){\n\n        super(props);\n\n        this.state = {\n            suggestions : [],\n            selectedGames : [],\n            currentSelection : 0,\n            currentSuggestion : 0\n        }\n    }\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        selectedGames : PropTypes.array.isRequired,\n        excludedGames : PropTypes.array,\n        defaultValue : PropTypes.array, //an array of games to autofill into the field\n        onGameSelect : PropTypes.func.isRequired,\n        placeholder : PropTypes.string,\n        includeGeneralRules : PropTypes.bool\n    };\n\n    static defaultProps = {\n       placeholder : 'Game Title',\n       excludedGames : [],\n       includeGeneralRules : false\n    }\n\n    titleField = React.createRef();\n\n    data = new DataHelper(this.props.games);\n\n    onTitleFieldKeyPress = (e) => {\n\n        if(this.state && this.state.suggestions && !this.allSuggestionsSelected())\n        {\n            switch(e.which)\n            {\n                case 40: //down / next\n                    this.nextSuggestion();\n                    break;\n                case 38: //up /previous\n                    this.previousSuggestion();\n                    break;\n                case 27: //esc / clear\n                    this.clearSuggestions();\n                    break;\n                case 13:\n                    \n                    let game = this.state.suggestions[this.state.currentSuggestion];\n\n\n                    if(game && game.gameKey)\n                    {\n                        this.chooseGame(game);\n                    }    \n\n                    e.preventDefault();\n                    break;\n                default :\n                    console.log(e.which);\n            }\n        }\n\n        this.renderAutoComplete(e.target.value);\n        \n    }\n\n    isSelected = (game) => {\n\n        let success = false;\n\n        for(let g in this.props.selectedGames)\n        {\n            if(this.props.selectedGames[g].gameKey === game.gameKey)\n            {\n                success = true;\n                break;\n            }\n        }\n\n        return success;\n    }\n\n    clearSuggestions = () => {\n        \n        this.titleField.current.value = '';\n        this.renderAutoComplete('');\n\n        this.setState({\n            currentSuggestion : 0\n        });\n    }\n\n    renderAutoComplete = (q) => {\n\n        let suggestions = [];\n\n        q = q.toLowerCase();\n\n        if(q !== '')\n        {\n            this.data.forEach((key) => {\n\n                let game = this.props.games[key];\n                let shouldInclude = true;\n\n                if(game.title.toLowerCase().indexOf(q) > -1)\n                {\n                    if(game.gameKey === GENERAL_RULES_KEY)\n                    {\n                        shouldInclude = this.props.includeGeneralRules;\n                    }\n\n                    shouldInclude = !this.props.excludedGames.includes(game.gameKey);\n                    \n                    if(shouldInclude)\n                    {\n                        game.gameKey = key;\n\n                        suggestions.push(game);\n                    }\n                    \n                }\n    \n            },this.props.games);\n        }\n        \n\n        this.setState({suggestions});\n    }\n    \n    chooseGame = (game) => {\n\n        this.titleField.current.value = game.title;\n\n        this.props.onGameSelect(game);\n\n        this.clearTitleField();\n\n        this.titleField.current.focus();\n    }\n\n    clearTitleField = () => {\n        this.titleField.current.value = '';\n        this.setState({suggestions : []});\n    }\n\n    setCurrentSuggestion = (i) => {\n        this.setState({currentSuggestion : i});\n    }\n\n    previousSuggestion = () => {\n\n        let previousSuggestion = this.findPreviousSuggestion(this.state.currentSuggestion || this.state.suggestions.length || 0);\n\n        this.setCurrentSuggestion(previousSuggestion);\n    }\n\n    findPreviousSuggestion = (current) => {\n\n        let prevIndex = current === 0 ? this.state.suggestions.length - 1 : current - 1;\n\n        console.log(current,prevIndex);\n\n        return this.isSelected(this.state.suggestions[prevIndex]) ? this.findPreviousSuggestion(prevIndex) : prevIndex;\n    }\n\n    nextSuggestion = () => {\n\n        let nextSuggestion = this.findNextSuggestion(this.state.currentSuggestion || 0);\n\n        this.setCurrentSuggestion(nextSuggestion);\n    }\n\n    findNextSuggestion = (current) => {\n\n        let nextIndex = current === this.state.suggestions.length - 1 ? 0 : current + 1;\n\n        return this.isSelected(this.state.suggestions[nextIndex]) ? this.findNextSuggestion(nextIndex) : nextIndex;\n    }\n\n    allSuggestionsSelected = () => {\n\n        let allSelected = this.state.suggestions.length > 0;\n\n        for(let i in this.state.suggestions)\n        {\n            let game = this.state.suggestions[i];\n\n            if(!this.isSelected(game))\n            {\n                allSelected = false;\n                break;\n            }\n        }\n        \n        return allSelected;\n    }\n\n    renderSuggestions = () => {\n\n        if(this.state && this.state.suggestions && this.state.suggestions.length > 0)\n        {\n            return (<ul className=\"GameAutoComplete__suggestions\" style={{height : `${this.state.suggestions.length * 1.55}em`}}>\n                {this.state.suggestions.map((game,i) => {\n\n                    let shouldInclude = true;\n\n                    let classes = ['GameAutoComplete__suggestion'];\n\n                    if(this.isSelected(game))\n                    {\n                        classes.push('GameAutoComplete__suggestion--selected');    \n                    }\n                    \n                    if(i === this.state.currentSuggestion || (!this.state.currentSuggestion && i === 0))\n                    {\n                        classes.push('GameAutoComplete__suggestion--current')\n                    }\n\n                    return (shouldInclude ? <li className={classes.join(' ')} \n                                                key={`gac_${game.gameKey}`} \n                                                onClick={(e) => {this.chooseGame(game);}}\n                                                onMouseEnter={(e) => {\n                                                    if(!this.isSelected(game))\n                                                    {\n                                                        this.setCurrentSuggestion(i,game);\n                                                    }\n                                                    }}>\n                        {game.title}\n                    </li> : null);\n                })}\n            </ul>);\n        }\n    }\n\n    render()\n    {\n        //console.log(this.props.selectedGames);\n        return (<div className=\"GameAutoComplete\">\n                    <input type=\"text\" ref={this.titleField} placeholder={this.props.placeholder} onKeyUp={this.onTitleFieldKeyPress} />\n                    {this.renderSuggestions()}\n                </div>);\n    }\n}\n\nexport default GameAutoComplete;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router-dom';\n\nclass GamePill extends React.Component\n{\n    static propTypes = {\n        game : PropTypes.object.isRequired,\n        tag : PropTypes.string,\n        onClick : PropTypes.func,\n        onClose : PropTypes.func,\n        showCloseBtn : PropTypes.bool,\n        linkGame : PropTypes.bool\n    };\n\n    static defaultProps = {\n        tag : 'li',\n        showCloseBtn : true,\n        linkGame : false\n    }\n\n    onClose = (e) => {\n\n        this.props.onClose(e,this.props.game);\n    }\n\n    render()\n    {\n        const Tag = `${this.props.tag}`;\n\n        return (\n            <Tag className={`GamePill GamePill--${this.props.game.gameKey}`}>\n                {this.props.linkGame ? <Link to={`/game/${this.props.game.gameKey}`}>{this.props.game.title}</Link> : this.props.game.title}\n                {this.props.showCloseBtn ? <button className=\"GamePill__close-btn\" onClick={this.onClose}>&times;</button> : null}\n            </Tag>);\n    }\n}\n\nexport default GamePill;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GameAutoComplete from './GameAutoComplete';\nimport GamePill from './GamePill';\nimport { GENERAL_RULES_KEY } from '../constants';\nimport DataHelper from '../DataHelper';\n\nclass GameMultiSelect extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        includeToplevel : PropTypes.bool,\n        defaultValue : PropTypes.array,\n        placeholder : PropTypes.string,\n        onError : PropTypes.func.isRequired,\n        selectedGames : PropTypes.array,\n        excludedGames : PropTypes.array\n    };\n\n    static defaultProps = {\n        selectedGames : [],\n        excludedGames : []\n    }\n\n    state = {\n        selectedGames : this.props.selectedGames,\n        includeToplevel : true\n    }\n\n    /*\n        check the array of selected games for any collisions or unecessary data\n        -no need to add a game's parent\n    */\n    sanitizeGames = (games) => {\n\n        if(!this.gameSelected(GENERAL_RULES_KEY))\n        {\n            let data = new DataHelper(this.props.games);\n            let gen = data.getGameByKey(GENERAL_RULES_KEY);\n                gen.gameKey = GENERAL_RULES_KEY;\n                games.push(gen);\n        }\n\n        return games;\n    }\n\n    clearGames = () => {\n        this.setState({selectedGames : []});\n    }\n\n    newGameSelect = (game) => {\n        \n        if(!this.gameSelected(game))\n        {\n            let games = this.state.selectedGames;\n                games.push(game);\n            \n            this.setState({\n                selectedGames : games\n            });\n        }\n    }\n\n    gameSelected = (game) => {\n\n        let selected = false;\n        let gameKey = typeof game === 'object' ? game.gameKey : game;\n\n        this.state.selectedGames.forEach((selectedGame,i) => {\n\n            if(gameKey === selectedGame.gameKey)\n            {\n                selected = true;\n                return;\n            }\n        });\n\n        return selected;\n    }\n\n    onGameRemoved = (e,gameToRemove) => {\n\n        let games = this.state.selectedGames;\n            games = games.filter((game) => {\n                return gameToRemove.gameKey !== game.gameKey;\n            });\n        \n            this.setState({selectedGames : games});\n    }\n\n    renderGames =() => {\n        \n        return this.state.selectedGames.map((game) => {\n            \n            return (<GamePill \n                        key={`gms_${game.gameKey}`} \n                        game={game}\n                        onClose={this.onGameRemoved} />);\n        });\n    }\n\n    render()\n    {\n\n        return (\n            <ul className=\"GameMultiSelect\">\n                {this.renderGames()}\n                <li className=\"GameMultiSelect__add-game\">\n                    <GameAutoComplete \n                        games={this.props.games}\n                        selectedGames={this.state.selectedGames} \n                        onGameSelect={this.newGameSelect} \n                        placeholder={this.props.placeholder}\n                        excludedGames={this.props.excludedGames} />\n                </li>\n            </ul>);\n    }\n}\n\nexport default GameMultiSelect;","import React from 'react';\nimport PropTypes from 'prop-types'\nimport GameMultiSelect from './GameMultiSelect';\n//import DataHelper from '../DataHelper';\n\n//import {GENERAL_RULES_KEY} from '../constants';\n\nclass AddGameForm extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        addGame : PropTypes.func.isRequired,\n        parent : PropTypes.array,\n        listenForShortcuts : PropTypes.bool\n    };\n\n    static defaultProps =  {\n        parent : ['game0'],\n        listenForShortcuts : false\n    };\n\n    titleField = React.createRef();\n    gameSelect = React.createRef();\n\n    resetForm = () => {\n        this.clearForm();\n        this.titleField.current.focus();\n    }\n\n    clearForm = () => {\n        this.titleField.current.value = '';\n        this.gameSelect.current.clearGames();\n    }\n\n    onKeyUp = (e) => {\n\n        //console.log('key up');\n        \n        if(this.props.listenForShortcuts && e.which === 13) // Enter\n        {\n            this.onAddGameClick();\n            e.preventDefault();\n        }\n    }\n\n    onAddGameClick = (e) => {\n\n       //console.log(this.gameSelect.current.innerSelect.current.value);\n\n        let title = this.titleField.current.value;\n        let parents = this.gameSelect.current.state.selectedGames;//.value;\n\n        // if(title === '' || !parent || parent === '')\n        // {\n        //     //if the parent or title arent filled,  don't do anything. The alerts below were firing twice\n        //     //when hitting enter on the Add Game button so this return prevents the alert when a game is successfully being added\n\n        //     return; //todo: figure out WHY keyup fires on the button too\n            \n        //     // if(title === '')\n        //     // {\n        //     //     alert('Please enter a game title');\n        //     // }\n        //     // else if(!parent || parent === '')\n        //     // {\n        //     //     alert('Please choose a parent from the drop down.');\n        //     // }\n            \n        //     // return;\n        // }\n        \n        this.props.addGame(title,parents);\n        this.resetForm();\n    }\n\n    //handle all error or info events from multiselect\n    onMultiSelectError = (e) => {\n        console.log(e);\n    }\n\n    render()\n    {\n        //console.log(this.props);\n        //let data = new DataHelper(this.props.games);\n\n        return (\n            <div className=\"AddGameForm\">\n                {/* <label>Parent Game</label>  */}<GameMultiSelect\n                    games={this.props.games}\n                    includeToplevel={true}\n                    defaultValue={this.props.parent}\n                    ref={this.gameSelect}\n                    placeholder=\"Add a Parent Game\"\n                    onError={this.onMultiSelectError}\n                />\n                <input type=\"text\" placeholder=\"Game Title\" ref={this.titleField} onKeyUp={this.onKeyUp} />\n                <button type=\"text\" onClick={this.onAddGameClick}>Add Game</button>\n            </div>);\n    }\n}\n\nexport default AddGameForm;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass ComboCounter extends React.Component\n{\n    static propTypes = {\n        setSessionCombo : PropTypes.func.isRequired,\n        count : PropTypes.number\n    };\n    \n    static defaultTypes = {\n        count : 0\n    };\n\n    state = {\n        //count : 0,\n        animating : false,\n        open : true\n    }\n\n    maxCombo = 10;\n\n    animateSpeed = 180;\n\n    componentWillMount()\n    {\n        window.addEventListener('keyup', this.onGlobalKeyPress);\n    }\n\n    onGlobalKeyPress = (e) => {\n\n        let targetTag = e.target.tagName.toLowerCase();\n\n        if(targetTag === 'input' || \n            targetTag === 'textarea' || \n            targetTag === 'select') return;\n\n        switch(e.which)\n        {\n            case 107 : //plus\n                this.addDrink();\n                break;\n            case 109 : //minus\n                this.removeDrink();\n                break;\n            case 106 : //multiply / asterisk (to clear)\n                this.clearDrinks();\n                break;\n\n            default : break;\n        }\n    }\n\n    addDrink = () => {\n\n        if(this.props.count < this.maxCombo)\n        {\n            let count = this.props.count + 1;\n\n            this.props.setSessionCombo(count);\n            \n        }\n    }\n\n    removeDrink = () =>\n    {\n        if(this.props.count > 0)\n        {\n            this.props.setSessionCombo(this.props.count - 1);\n        }\n    }\n\n    clearDrinks = () => {\n\n        this.props.setSessionCombo(0);\n        \n    }\n\n    handleRemoveDrinkClick = (e) => {\n\n        if(this.props.count > 0)\n        {\n            this.removeDrink();    \n            this.animateCount();\n        }\n    }\n\n    handleClearDrinksClick = (e) => {\n\n        this.clearDrinks();\n    }\n\n    animateCount = () => {\n        \n        this.setState({\n            animating : true\n        });\n\n        setTimeout(() => {\n            this.setState({\n                animating : false\n            });\n    \n        }, this.animateSpeed);\n    }\n\n    handleAddDrinkClick = (e) => {\n\n        if(this.props.count < this.maxCombo)\n        {\n            this.addDrink();\n    \n            this.animateCount();\n        }\n        \n    }\n\n    calcShotHeight = () => {\n        \n        if(this.props.count === 0) return 0;\n\n        return ((this.props.count / this.maxCombo) * 100) + '%';\n    }\n\n    handleToggleClick = (e) => {\n\n        this.setState({\n            open : !this.state.open\n        })\n    }\n\n\n    render()\n    {\n        return (\n            <aside className={`ComboCounter${this.state.animating ? ' ComboCounter--animating' : ' ComboCounter--animated'}${this.props.count === this.maxCombo ? ' ComboCounter--full' : ''}${this.props.count === 0 ? ' ComboCounter--empty' : ''}${this.state.open ? ' ComboCounter--open' : ' ComboCounter--closed'}`}>\n                \n                <button className=\"ComboCounter__toggle-btn ComboCounter__toggle-btn--open\" onClick={this.handleToggleClick}>\n                    <i className=\"fa fa-chevron-left\"></i>\n                </button>\n                \n                <div className=\"ComboCounter__count\">\n                    {this.props.count}\n                </div>\n\n                <div className=\"ComboCounter__glass-wrap\">\n\n                    <div className=\"ComboCounter__shot-glass\">\n                        <div className=\"ComboCounter__shot-volume\" style={{height : this.calcShotHeight()}}></div>\n                    </div>\n\n                    <div className=\"ComboCounter__button-shell\">\n                        <button className=\"ComboCounter__remove-drink-btn\" onClick={this.handleRemoveDrinkClick}>-</button>\n                        <button className=\"ComboCounter__clear-drinks-btn\" onClick={this.handleClearDrinksClick}>&times;</button>\n                    </div>\n                </div>\n                \n                <button className=\"ComboCounter__add-drink-btn\" onClick={this.handleAddDrinkClick}>+</button>\n\n                <button className=\"ComboCounter__toggle-btn ComboCounter__toggle-btn--close\" onClick={this.handleToggleClick}>\n                    <i className=\"fa fa-chevron-right\"></i>\n                </button>\n\n            </aside>);\n    }\n}\n\nexport default ComboCounter;","import React from 'react';\nimport DataHelper from '../DataHelper';\nimport PropTypes from 'prop-types';\nimport NotFound from './NotFound';\nimport RulesList from './RulesList';\nimport AddRulesForm from './AddRulesForm';\nimport GameList from './GameList';\nimport AddGameForm from './AddGameForm';\n//import {changePageTitle} from '../helpers';\n//import GameSelect from './GameSelect';\nimport EditButton from './EditButton';\n//import GameListItem from './GameListItem';\nimport DeleteButton from './DeleteButton';\nimport {Link} from 'react-router-dom';\nimport ComboCounter from './ComboCounter';\n//import {GENERAL_RULES_KEY} from '../constants';\nimport GamePill from './GamePill';\nimport GameMultiSelect from './GameMultiSelect';\nimport {Helmet} from \"react-helmet\";\n\nclass Game extends React.Component\n{\n    state = {\n        game : undefined,\n        editing : false\n    }\n\n    static propTypes = {\n        index : PropTypes.string.isRequired,\n        games : PropTypes.object,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        editGame : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        canEditGame : PropTypes.func.isRequired,\n        canDeleteGame : PropTypes.func.isRequired,\n        getUser : PropTypes.func.isRequired\n    }\n\n    titleInput = React.createRef();\n    editButton = React.createRef();\n    shell = React.createRef();\n    parentsMS = React.createRef();\n\n    gameScrollPostBeforeUpdate = 0;\n\n    onParentChange = (e) => {\n        \n        let newParent = e.currentTarget.value;\n\n        let thisGameKey = this.props.index;\n\n        let game = {...this.data.getGameByKey(thisGameKey)};\n\n        game.parent_game = newParent;\n\n        console.log(game);\n\n        this.props.editGame(thisGameKey,game);\n    }\n\n    handleTitleEditClick = (e) => {\n\n        if(this.state.editing)\n        {\n            let game = this.data.getGameByKey(this.props.index);\n            let newTitle = this.titleInput.current.value;//.replace(/(^[ ]+|[ ]+$)/,'');\n\n            if(newTitle === '')\n            {\n                this.titleInput.current.value = game.title;\n            }\n            else //if(this.titleInput.current.value !== game.title)\n            {\n                this.data = new DataHelper(this.props.games);\n\n                game.title = this.titleInput.current.value;\n                \n                game.parent_game = this.data.gamesToKeys(this.parentsMS.current.state.selectedGames);\n\n                this.props.editGame(this.props.index,game);\n            }\n            \n        }\n        else\n        {\n            this.titleInput.current.focus();\n            \n        }\n        \n        this.setState({editing : !this.state.editing});\n    }\n\n    \n\n\n    onDeleteClick = (e) => {\n        this.data = new DataHelper(this.props.games);\n\n        let game = this.data.getGameByKey(this.props.index);\n\n        if(this.state.editing)\n        {\n            this.setState({editing : false});\n        }\n        else if(window.confirm(`Are you sure you want to delete \"${game.title}\"?`))\n        {\n            this.props.deleteGame(this.props.index);\n        }\n        \n    }\n\n    renderParentPills = () => {\n\n        let game = this.data.getGameByKey(this.props.index);\n        let parents = this.data.getParentGames(game);\n\n        if(this.state.editing)\n        {\n            return (<div className=\"Game__parents\"><GameMultiSelect\n                        ref={this.parentsMS}\n                        selectedGames={parents}\n                        excludedGames={[this.props.index]}\n                        games={this.props.games} /></div>);\n        }\n        else\n        {\n            \n                return (parents && parents.length > 0 ? <ul className=\"Game__parents\">{parents.map((parent) => {\n                    return <GamePill linkGame={true} key={`pill_${parent.gameKey}`} game={parent} showCloseBtn={false} />\n                })}</ul> : null);\n        }\n        \n    }\n\n    renderBreadCrumbs = () => {\n\n        let ancestors = this.data.getAncestors(this.props.index);\n\n        let html = [];\n\n        ancestors.forEach((ancestor,i) => {\n\n            html.push(<Link to={`/game/${ancestor.key}`}>\n                {ancestor.game.title}\n            </Link>);\n    \n            if(i < ancestors.length - 1)\n            {\n                html.push(<span class=\"Game__parent-delimiter\">&gt;</span>);\n            }\n        });\n\n        return html;\n    }\n\n    getSnapshotBeforeUpdate(prevProps,prevState)\n    {\n        this.gameScrollPostBeforeUpdate = this.shell.current ? this.shell.current.scrollTop : 0;\n        this.currentGameKey = this.props.index;\n\n        return null;\n    }\n\n    componentDidUpdate(prevProps)\n    {\n        setTimeout(() => {\n            \n            if(this.shell.current)\n                this.shell.current.scrollTo(0,this.gameScrollPostBeforeUpdate);\n\n                \n        }, 1);\n\n        if(this.state.editing)\n        {\n            this.titleInput.current.focus();\n        }\n\n        if(this.shell.current)\n            this.shell.current.scrollTo(0,0);\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        let game = this.data.getGameByKey(this.props.index);\n\n        //let parentGame = game.parent_game ? this.data.getGameByKey(game.parent_game) : null;\n\n        if(!game) return NotFound;\n\n        //changePageTitle(game.title + ' | Drinking Games'); \n        \n        return (\n            <div className={`Game ${this.state.editing ? ' Game--editing' : ''}`} ref={this.shell}>\n            <Helmet>\n                <title>\n                    {game.title + ' | Drinking Games'}\n                </title>\n            </Helmet>\n                <ComboCounter setSessionCombo={this.props.setSessionCombo} count={this.props.currentComboCount} />\n                {this.renderParentPills()}\n                <h1 className=\"Game__title\" onDoubleClick={(e) => {\n                            \n                            this.handleTitleEditClick();\n                        }}>\n                    <input \n                        name={this.props.index + Date.now()} \n                        key={this.props.index + Date.now()} \n                        type=\"text\"\n                        style={{width: `${game.title.length}ch`}} \n                        defaultValue={game.title}\n                        ref={this.titleInput}\n                        disabled={!this.state.editing}\n                        className=\"Game__title-value editable\"\n                        \n                        onKeyUp={(e) => {\n\n                            switch(e.which)\n                            {\n                                case 13:\n                                    this.handleTitleEditClick();\n                                    break;\n                                case 27:\n                                    this.setState({editing : false});\n                                    break;\n                            }\n                        }} />\n                    {this.props.canEditGame(this.props.index) ? <div className=\"Game__parent-change-select\">\n                        \n                        <EditButton handler={this.handleTitleEditClick} ref={this.editButton} />\n                        {this.props.canDeleteGame(this.props.index) ? <DeleteButton handler={this.onDeleteClick} /> : null}\n                     </div> : null}\n                     \n                </h1>\n\n                <section className=\"Game__rules\">\n                <h2>Rules</h2>\n\n                <RulesList \n                    games={this.props.games} \n                    index={this.props.index} \n                    recursive={true} \n                    deleteRule={this.props.deleteRule} \n                    editRule={this.props.editRule}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteRule={this.props.canEditRule}\n                    getUser={this.props.getUser} />\n\n                </section>\n\n                {this.props.userLoggedIn() ? <section className=\"Game__add-rules\">\n                    \n\n                    <h3>Add Rule</h3>    \n\n                    <AddRulesForm \n                        games={this.props.games} \n                        gameIndex={this.props.index}\n                        addRule={this.props.addRule} />\n                </section> : null}\n\n                <section className=\"Game__child-games\">\n                    <h2>Sub Games</h2>    \n\n                    <GameList \n                        parent={this.props.index} \n                        editGame={this.props.editGame} \n                        games={this.props.games}\n                        deleteGame={this.props.deleteGame}\n                        copyGame={this.props.copyGame}\n                        canEditGame={this.props.canEditGame}\n                        canEditRule={this.props.canEditRule}\n                        canDeleteGame={this.props.canDeleteGame}\n                        canDeleteRule={this.props.canEditRule}\n                        userLoggedIn={this.props.userLoggedIn}\n                        />\n                    \n                    <h3>Add A Sub Game</h3>\n\n                    {this.props.userLoggedIn() ? <AddGameForm\n                        games={this.props.games}\n                        parent={[this.props.index]}\n                        addGame={this.props.addGame} /> : null }\n                </section>\n            </div>);\n    }\n}\n\nexport default Game;","import React from 'react';\nimport DataHelper from '../DataHelper';\nimport GameList from './GameList';\nimport AddGameForm from './AddGameForm';\nimport PropTypes from 'prop-types';\n\nclass Games extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            visible : true\n        };\n\n        setTimeout(() => {\n            this.setState({visible : false});\n        }, 1500);\n    }\n    static propTypes = {\n        editGame : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired,\n        addGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        currentIndex : PropTypes.string\n    }\n\n    static defaultProps =  {\n        parent : 'game0',\n        currentIndex : undefined\n    };\n\n    data = null;\n\n    onToggleClick = (e) => {\n        this.setState({\n            visible : !this.state.visible\n        });\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        let games = this.props.games;//this.data.sortGamesBy('title','asc');\n        \n        //console.log(this.props.canDeleteGame);\n        \n        return (\n            <div className={`Games ${this.state.visible ? 'Games--visible' : ''}`}>\n                <button \n                    type=\"button\" \n                    className=\"Games__toggle-btn\"\n                    onClick={this.onToggleClick}\n                >\n                    {this.state.visible ? <i className=\"fa fa-chevron-left\"></i> : <i class=\"fa fa-bars\"></i>}\n                </button>\n                <h1>Drinking Games</h1>\n\n                <GameList \n                    games={games} \n                    deleteGame={this.props.deleteGame} \n                    editGame={this.props.editGame}\n                    canEditGame={this.props.canEditGame}\n                    canEditRules={this.props.canEditRules}\n                    canDeleteGame={this.props.canDeleteGame}\n                    canDeleteRules={this.props.canEditRules}\n                    copyGame={this.props.copyGame}\n                    currentIndex={this.props.currentIndex}\n                    userLoggedIn={this.props.userLoggedIn}\n                     />\n\n                {this.props.userLoggedIn() ? \n                    <section className=\"Games__add-a-game\">\n                        <h2>Add a Game</h2>\n                        <AddGameForm\n                                games={this.props.games}\n                                listenForShortcuts={true}\n                                addGame={this.props.addGame} />\n                    </section> \n                : null}\n            </div>);\n    }\n}\n\nexport default Games;","import React from 'react';\nimport PropTypes from 'prop-types'\n\nclass SessionManager extends React.Component\n{\n    static propTypes = {\n        currentSession : PropTypes.object,\n        leaveSession : PropTypes.func.isRequired,\n        createSession : PropTypes.func.isRequired,\n        joinSession : PropTypes.func.isRequired\n    };\n    //static defaultTypes = {}\n\n    state = {\n        currentSession : this.props.currentSession\n    }\n\n    keyField = React.createRef();\n\n    handleCreateSession = (e) => {\n        \n        this.props.createSession();\n\n    }\n\n    leaveSession = () => {\n        this.setState({currentSession : undefined});\n        this.props.leaveSession();\n    }\n\n    handleJoinSession = (e) => {\n\n        let key = this.keyField.current.value;\n        this.props.joinSession(key);\n    }\n\n    renderSessionButtons = () => {\n\n        if(this.props.currentSession === undefined)\n        {\n            return (<div className=\"SessionManager__buttons\">\n                        <button className=\"SessionManager__create-session\" onClick={this.handleCreateSession}>Create Session</button>\n                        <input type=\"text\" className=\"SessionManager__key-field\" ref={this.keyField} placeholder=\"Session Code\" />\n                        <button className=\"SessionManager__join-session\" onClick={this.handleJoinSession}>Join Session</button>\n                    </div>);\n        }\n        else\n        {\n            return <div className=\"SessionManager__current-session\">\n                <a title=\"Copy this link address and send to people you want to join the session\" href={`/join/${this.props.currentSession}`} className=\"SeassionManager__session-key\">{this.props.currentSession}</a>\n                <button className=\"SessionManager__leave-session-btn\" onClick={this.leaveSession}>Leave Session</button>\n            </div>;\n        }\n    }\n\n    render()\n    {\n        return (\n            <div className=\"SessionManager\">\n                {this.renderSessionButtons()}\n            </div>);\n    }\n}\n\nexport default SessionManager;","import React from 'react';\n//import PropTypes from 'prop-types'\n\nclass ShortcutsModal extends React.Component\n{\n    //static propTypes = {};\n    \n    //static defaultTypes = {}\n\n    state = {\n        open : false\n    }\n\n    shortcuts = [\n        {\n            combo : '+ (plus)',\n            desc : 'Adds a drink to the Combo Counter'\n        },\n        {\n            combo : '- (minus)',\n            desc : 'Removes a drink from the Combo Counter'\n        },\n        {\n            combo : '* (asterisk)',\n            desc : 'Resets the Combo Count to 0'\n        },\n        {\n            combo : 'cmd / ctrl + shift + F',\n            desc : 'Focuses the rule filter field in a Game to filter the rules'\n        },\n        {\n            combo : 'option / alt + R',\n            desc : 'Focus Add a Rule form'\n        }\n\n    ]\n\n    show = () => {\n        //this.dialog.current.showModal();\n        this.setState({open : true});\n    }\n\n    close = () => {\n        this.setState({open : false});\n    }\n\n    renderShortcuts = () => {\n\n        return this.shortcuts.map((shortcut,i) => {\n            return (<li key={`shortcut_${i}`} className=\"ShortcutsModal__shortcut\">\n                <div className=\"ShortcutsModal__shortcut-keys\">\n                    {shortcut.combo}\n                </div>\n                <div className=\"ShortcutsModal__shortcut-description\">\n                    {shortcut.desc}\n                </div>\n            </li>);\n        });\n    }\n\n    componentWillMount()\n    {\n\n        window.addEventListener('keyup',(e) => {\n\n            if(e.which === 27)\n            {\n                this.close();\n            }\n        })\n    }\n\n    render()\n    {\n        return (\n            <div className={`ShortcutsModal${this.state.open ? ' ShortcutsModal--open' : ''}`}>\n                <div className=\"ShortcutsModal__dialog\">\n                    <header className=\"ShortcutsModal__dialog-header\">\n                        <h2 className=\"ShortcutsModal__title\">Keyboard Shortcuts</h2>\n                        <button className=\"ShortcutsModal__close-btn\" onClick={this.close}>&times;</button>\n                    </header>\n                    <div className=\"ShortcutsModal__body\">\n                        <ul className=\"ShortcutsModal__shortcuts\">\n                            {this.renderShortcuts()}\n                        </ul>\n                    </div>\n                </div>\n            </div>);\n    }\n}\n\nexport default ShortcutsModal;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Game from './Game';\nimport Games from './Games';\nimport Alert from './Alert';\nimport SessionManager from './SessionManager';\nimport {Link,withRouter} from 'react-router-dom';\nimport ShortcutsModal from './ShortCutsModal';\n\nclass Desktop extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        addRule : PropTypes.func.isRequired,\n        editGame : PropTypes.func.isRequired,\n        addGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        getUser : PropTypes.func.isRequired,\n        currentIndex : PropTypes.string\n    };\n\n    static defaultProps =  {\n        currentIndex : undefined\n    }\n\n    shortcuts = React.createRef();\n\n    showShortcuts = () => {\n        this.shortcuts.current.show();\n    }\n\n    render()\n    {\n        //console.log(this.props.games);\n        //console.log(this.props.canDeleteGame);\n\n        return (\n            <main className=\"Desktop\">\n                <Games \n                    games={this.props.games} \n                    editGame={this.props.editGame} \n                    addGame={this.props.addGame} \n                    deleteGame={this.props.deleteGame}\n                    canEditGame={this.props.canEditGame}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteGame={this.props.canDeleteGame}\n                    canDeleteRule={this.props.canEditRule}\n                    copyGame={this.props.copyGame}\n                    userLoggedIn={this.props.userLoggedIn}\n                    getUser={this.props.getUser}\n                    currentIndex={this.props.match.params.ID}\n                     />\n\n                {this.props.mode === 'game' ? <div className=\"GameShell\">\n                <header className=\"App__header\">\n                    <span>\n                        <Link to=\"/\" className=\"App__home-link\">Home</Link>\n                        {this.props.renderAuthButton()}\n                    </span>\n\n                    <SessionManager\n                        createSession={this.props.createSession}\n                        leaveSession={this.props.leaveSession}\n                        joinSession={this.props.joinSession}\n                        currentSession={this.props.currentSession}\n                    />\n                    \n                    <span className=\"App__current-user\">\n                        \n                        {this.props.user.email}\n                    </span>\n\n                    <button className=\"App__shortcuts-ref\" onClick={this.showShortcuts}>\n                        <i className=\"fa fa-keyboard-o\"></i>\n                    </button>\n                </header>\n                <Game \n                            index={this.props.match.params.ID} \n                            games={this.props.games} \n                            editRule={this.props.editRule} \n                            deleteRule={this.props.deleteRule}\n                            deleteGame={this.props.deleteGame}\n                            addRule={this.props.addRule}\n                            editGame={this.props.editGame}\n                            addGame={this.props.addGame}\n                            canEditGame={this.props.canEditGame}\n                            canEditRule={this.props.canEditRule}\n                            canDeleteGame={this.props.canDeleteGame}\n                            canDeleteRule={this.props.canEditRule}\n                            copyGame={this.props.copyGame}\n                            userLoggedIn={this.props.userLoggedIn}\n                            getUser={this.props.getUser}\n                            setSessionCombo={this.props.setSessionCombo}\n                            currentComboCount={this.props.currentComboCount}\n                             /></div> \n                        : <div className=\"Desktop__alert-shell\"><Alert tag=\"div\" type=\"info\">Choose a game from the left hand menu</Alert></div>}\n                <ShortcutsModal ref={this.shortcuts} />\n            </main>);\n    }\n}\n\nexport default withRouter(Desktop);","import React from 'react';\nimport Alert from './Alert';\nimport {Link} from 'react-router-dom';\n\nclass Login extends React.Component\n{\n    userField = React.createRef();\n    passwordField = React.createRef();\n\n    authenticate = (e) => {\n        \n        console.log('loader auth');\n\n        let user = this.userField.current.value;\n        let pass = this.passwordField.current.value;\n\n        this.props.authenticate(user,pass);\n    }\n\n    render()\n    {\n        return (\n            <div className=\"Login\">\n                <form className=\"Login__form\">\n                    <h2>Login</h2>\n                    <p>Sign in to start drinking</p>\n\n                    {this.props.error ? <Alert type=\"error\">{this.props.error}</Alert> : null}\n\n                    <input type=\"text\" required ref={this.userField} placeholder=\"Email\" />\n                    <input type=\"password\" required ref={this.passwordField} placeholder=\"Password\" />\n\n                    <button type=\"button\" className=\"Login__login\" onClick={this.authenticate}>Turn Down For What</button>\n                    <Link className=\"Login__signup \" to=\"/signup\">Get Started Turnin' Up</Link>\n                </form>\n            </div>);\n    }\n}\n\nexport default Login;","const config = {\n    firebase : {\n        apiKey: \"AIzaSyBqPifaPtgVVbc222q6U09NBRuHTn9ECr0\",\n        authDomain: \"raymond-catch-of-the-day.firebaseapp.com\",\n        databaseURL: \"https://raymond-catch-of-the-day.firebaseio.com\",\n        projectId: \"raymond-catch-of-the-day\",\n        storageBucket: \"raymond-catch-of-the-day.appspot.com\",\n        messagingSenderId: \"425132188904\",\n        appId: \"1:425132188904:web:04405d03ba6769cc5f555d\",\n        measurementId: \"G-SJZ98PJSWE\"\n    }\n}\n\nexport default config;","import Rebase from 're-base';\nimport firebase from 'firebase';\nimport config from './config';\n\nconst firebaseApp = firebase.initializeApp(config.firebase);\n\nconst base = Rebase.createClass(firebaseApp.database());\n\nexport {firebaseApp};\n\nexport default base;","import React from 'react';\nimport Alert from './Alert';\n//import {Link} from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nclass Signup extends React.Component\n{\n    userField = React.createRef();\n    passwordField = React.createRef();\n    passwordField2 = React.createRef();\n\n    state = {\n        error : null\n    }\n\n    static propTypes = {\n        error : PropTypes.string,\n        signup : PropTypes.func.isRequired,\n    }\n\n    static defaultProps =  {\n        error : null\n    }\n\n    componentWillMount()\n    {\n        this.setState({error : this.props.error});\n    }\n\n    signup = (e) => {\n\n        let user = this.userField.current.value;\n        let pass1 = this.passwordField.current.value;\n        let pass2 = this.passwordField2.current.value;\n\n        if(pass1 !== pass2)\n        {\n            //console.log(pass1,pass2);\n            this.setState({error : `Passwords don't match`});\n        }\n        else\n        {\n            this.props.signup(user,pass1);\n        }\n        \n    }\n\n    render()\n    {\n        //console.log('signup render');\n\n        let error = this.props.error || this.state.error;\n\n        return (\n            <div className=\"Signup\">\n                <form className=\"Signup__form\">\n                    <h2>Signup</h2>\n                    <p>Sign in to start drinking</p>\n\n                    {error ? <Alert type=\"error\">{error}</Alert> : null}\n\n                    <input type=\"text\" required ref={this.userField} placeholder=\"Email\" />\n                    <input type=\"password\" required ref={this.passwordField} placeholder=\"Password\" />\n                    <input type=\"password\" required ref={this.passwordField2} placeholder=\"Confirm Password\" />\n\n                    <button type=\"button\" className=\"Signup__Signup\" onClick={this.signup}>Turn Down For What</button>\n                </form>\n            </div>);\n    }\n}\n\nexport default Signup;","import React from 'react';\n//import Games from './Games';\n//import Game from './Game';\n//import NotFound from './NotFound';\nimport fakeGames from '../fakeGames.js';\nimport DataHelper from '../DataHelper';\nimport Loader from './Loader';\nimport Desktop from './Desktop';\nimport Login from './Login';\nimport firebase from 'firebase';\nimport base from '../base';\nimport Signup from './Signup';\nimport {GENERAL_RULES_KEY,RAYMOND_UID} from '../constants';\nimport {Link,withRouter} from 'react-router-dom';\nimport ShortCutsModal from './ShortCutsModal';\n\nclass App extends React.Component\n{\n    state = {\n        games : {},\n        mobile : false,\n        user : {uid : ''},\n        users : {},\n        loading : true,\n        signupError : null,\n        loginError : null,\n        loggingIn : false,\n        currentSession : undefined,\n        sessions : {},\n        gamesInited : false\n    }\n\n    \n\n    sessionKeyLength = 4;\n\n    sessionLife = 1000 * 60 * 60 * 24;//24 hours\n\n    shortCutsModal = React.createRef();\n    \n    editGame = (key,game) => {\n        \n        const games = {...this.state.games};\n\n        games[key] = game;\n\n        this.setState({games});\n    }\n\n    getCurrentSessionComboCount = () => {\n        return this.inASession() ? this.state.sessions[this.state.currentSession].currentComboCount : 0;\n    }\n\n    setSession = (key) => {\n\n        let session = {\n            created : new Date().getTime(),\n            currentComboCount : 0\n        };\n\n        let sessions = {...this.state.sessions};\n            sessions = this.pruneSessions(sessions);\n\n        sessions[key] = session;\n\n        //console.log(sessions); return;\n\n        this.setState({sessions : sessions});\n\n        setTimeout(() => {\n            this.joinSession(key);\n        }, 10);\n        \n    }\n\n    inASession = () => {\n        return this.state.currentSession !== undefined;\n    }\n\n    setSessionCombo = (count) => {\n\n        if(this.inASession())\n        {\n            let sessions = {...this.state.sessions};\n                sessions[this.state.currentSession].currentComboCount = count;\n            \n            this.setState({sessions});\n        }\n        else\n        {\n            alert('The Combo Counter can only be used in a session');\n        }\n    }\n\n    pruneSessions = (sessions) => {\n\n        let now = new Date().getTime();\n\n        this.data.forEach((key) => {\n\n            let session = sessions[key];\n\n            if(now - session.created >= this.sessionLife)\n            {\n                sessions[key] = null;\n            }\n\n        },sessions);\n\n        //console.log(sessions);\n\n        return sessions;\n    }\n\n    joinSession = (key) => {\n        \n        key = key.toUpperCase();\n\n        if(this.sessionKeyExists(key))\n        {\n            this.setState({currentSession : key});\n\n            window.sessionStorage.setItem('currentSession',key);\n\n            return true;\n        }\n        else\n        {\n            //console.log(key,this.state.sessions);\n\n            alert(`No session with the code \"${key}\" currently exists.`);\n            return false;\n        }\n    }\n\n    leaveSession = () => {\n        this.setState({currentSession : undefined});\n        window.sessionStorage.removeItem('currentSession');\n    }\n\n    sessionKeyExists = (key) => {\n        return this.state.sessions[key] !== undefined\n    }\n\n    generateSessionKey = () => {\n\n        let key = '';\n        let code;\n\n        for(let i = 0; i < this.sessionKeyLength; i++)\n        {\n            code = Math.round(Math.random() * 25) + 65;\n\n            //console.log(code,key);\n            key += String.fromCharCode(code);    \n        }\n\n        return key.toUpperCase();\n    }\n\n    generateUniqueSessionKey = () => {\n        let key = this.generateSessionKey();\n\n        do\n        {\n            key = this.generateSessionKey();\n        }\n        while(this.state.sessions[key] !== undefined);\n        \n        return key;\n    }\n\n    createSession = () => {\n\n        let key = this.generateUniqueSessionKey();\n\n        this.setSession(key);\n\n        return key;\n    }\n\n    componentWillUpdate()\n    {\n        //console.log(this.props.location.pathname);\n    }\n\n    componentDidMount()\n    {\n        let db = window.location.hostname === 'localhost' ? 'dev' : 'live';\n        \n        //console.log(db);\n        this.fbRefU = base.syncState(`drinking-games/${db}/users`,{\n            context : this,\n            state : 'users'});\n\n        this.fbRefSessions = base.syncState(`drinking-games/${db}/sessions`,{\n            context : this,\n            state : 'sessions',\n            then : (t) => {\n                let ssKey = window.sessionStorage.getItem('currentSession');\n        \n                if(ssKey && !this.inASession())\n                {\n                    this.joinSession(ssKey);\n                }\n            }});\n\n        //base.listenTo('drinking-games/games',)\n        this.fbRef = base.syncState(`drinking-games/${db}/games`,{\n            context : this,\n            state : 'games',\n            then : (t) => {\n\n                //console.log('got games from fb',this.state.games);\n\n                this.data = new DataHelper(this.state.games);\n\n                //after we sync the state to firebase, if there are no games, load up some fake ones for testing\n                if(Object.keys(this.state.games).length === 0)\n                {\n                    this.setState({games : fakeGames });\n                }\n\n                this.setState({loading:false});\n\n                //the first time tha games sync, check if any parent_game keys are strings and make them arrays.\n                \n                // if(!this.state.gamesInited)\n                // {\n                //     let games = {...this.state.games};\n\n                //     this.data.forEach((key)=>{\n\n                //         let game = games[key];\n\n                //         if(typeof game['parent_game'] == 'string')\n                //         {\n                //             games[key]['parent_game'] = [game['parent_game']];\n                //         }\n\n                //         if(games[key].parent_game && !games[key].parent_game.includes(GENERAL_RULES_KEY))\n                //         {\n                //             games[key].parent_game.push(GENERAL_RULES_KEY);\n                //         }\n                //     },games);\n\n                //     this.setState({\n                //         games : games,\n                //         gamesInited : true\n                //     });\n                // }\n            }\n        });\n\n        \n        \n        firebase.auth().onAuthStateChanged(user => {\n            \n            if(user)\n            {\n                this.authHandler({user});\n            }\n        });\n    }\n\n    canEditRule = (rule) => {\n\n        return this.userLoggedIn(); //this.state.user.uid === this.RAYMOND_UID || rule.owner === this.state.user.uid;\n    }\n\n    canEditGame = (gameKey) => {\n\n        /* console.log('======================CHECKING CAN EDIT');\n        console.log(game);\n        \n        console.table({\n            'state user id' : this.state.user.uid,\n            'raymond user id' : this.RAYMOND_UID,\n            'game owner' : game.owner\n        }); */\n        let game = typeof gameKey === 'string' ? this.data.getGameByKey(gameKey) : gameKey;\n\n        //console.log(game.title,this.state.user.uid === this.RAYMOND_UID || (game.owner && game.owner === this.state.user.uid));\n        return this.state.user.uid === RAYMOND_UID || (game.owner && game.owner === this.state.user.uid);\n    }\n\n    canDeleteRule = (rule) => {\n\n        return this.state.user.uid === RAYMOND_UID || rule.owner === this.state.user.uid;\n    }\n\n    canDeleteGame = (gameKey) => {\n\n        let game = this.data.getGameByKey(gameKey);\n\n        if(this.state.user.uid === RAYMOND_UID) return true;\n\n        if(!game.owner || game.owner !== this.state.user.uid) return false;\n\n        //console.log('game owner');\n\n        let success = this.data.gameHasOtherUserGames(gameKey,this.state.user.uid);// && !this.data.gameHasOtherUserOwnedRules(gameKey,this.state.user.uid);\n\n        return success;\n    }\n\n\n\n    editRule = (gameKey,ruleKey,newRule) =>\n    {\n        console.log(gameKey,ruleKey,newRule);\n\n        let games = {...this.state.games};\n\n        let game = games[gameKey];\n        \n        newRule.drinks = this.sanitizeDrinks(newRule.drinks);\n\n        if(game && game.rules && game.rules[ruleKey] && gameKey === newRule.gameKey)\n        {\n            games[gameKey].rules[ruleKey] = newRule;\n        }\n        else\n        {\n            console.log('dif gam game');\n\n            let oldGame = game;\n            let newGame = games[newRule.gameKey];\n\n            if(oldGame && newGame)\n            {\n                if(!newGame.rules)\n                {\n                    newGame.rules = {};\n                }\n\n                games[gameKey].rules[ruleKey] = null;\n                games[newRule.gameKey].rules[ruleKey] = newRule;\n            }\n            else\n            {\n                \n            }\n        }\n\n        this.setState({games});\n    }\n\n    deleteRule = (gameKey,ruleKey) =>\n    {\n        let games = {...this.state.games};\n\n        //console.log(gameKey,ruleKey);\n\n        if(games && games[gameKey] && games[gameKey].rules[ruleKey])\n        {\n            games[gameKey].rules[ruleKey] = null;\n\n            //console.log(games);\n            \n            this.setState({games});\n        }\n    }\n\n    addRule = (gameKey,rule) =>\n    {\n        //console.log(gameKey,rule);\n\n        rule.owner = this.state.user.uid;\n\n        let ruleKey = this.data.getNewRuleKey(gameKey);\n\n        let games = {...this.state.games};\n\n        if(!games[gameKey].rules)\n        games[gameKey].rules = {};\n\n        games[gameKey].rules[ruleKey] = rule;\n\n        //console.log(games);\n        \n        this.setState({games});\n    }\n\n    addGame = (gameTitle,parents) =>\n    {\n        let game = {\n            title : gameTitle,\n            rules : {}\n        };\n\n        let parentKey = parents.map((game)=>{\n            return game.gameKey;\n        });\n\n        if(!parentKey.includes(GENERAL_RULES_KEY))\n        {\n            parentKey.push(GENERAL_RULES_KEY);\n        };\n\n        console.log(parentKey);\n\n        game.owner = this.state.user.uid;\n\n        if(parentKey !== '')\n        {\n            game.parent_game = parentKey;\n        }\n\n        let games = {...this.state.games};\n        let newGameKey = this.data.getNewGameKey();\n\n        games[newGameKey] = game;\n\n        this.setState({games});\n\n        this.viewGame(newGameKey);\n\n    }\n\n    copyRules = (rules,oldGameKey,newGameKey) => {\n\n        rules = {...rules};\n\n        let newRules = {};\n\n        this.data.forEach((key) => {\n\n            let newRuleKey = key.replace(oldGameKey,newGameKey);\n\n           //console.log(oldGameKey,newGameKey);\n            //console.log(newRuleKey,key);\n\n            newRules[newRuleKey] = {...rules[key]};\n            newRules[newRuleKey].gameKey = newGameKey;\n            newRules[newRuleKey].owner = this.state.user.uid;\n\n        },rules);\n\n        return newRules;\n    }\n\n    copyGame = (key) => {\n\n        this.data = new DataHelper(this.state.games);\n\n        let games = {...this.state.games};\n\n        let game = {...this.data.getGameByKey(key)};\n\n        let newKey = this.data.getNewGameKey();\n\n        game.title += ' Copy';\n        game.owner = this.state.user.uid;\n\n        games[newKey] = game;\n\n        //if(game.rules && Object.keys(game.rules).length > 0)\n        games[newKey].rules = this.copyRules(game.rules,key,newKey);\n        \n       //console.log(game,games);\n\n        this.setState({games});\n\n        this.viewGame(newKey);\n\n        //console.log(this.data);\n    }\n\n    deleteGame = (key) => {\n\n        let games = {...this.state.games};\n\n        games[key] = null;\n\n        this.setState({games});\n\n        if(key === this.props.match.params.ID)\n        {\n            this.props.history.replace('/');\n        }\n    }\n\n    mobileCheck = (match) => {\n\n        this.setState({mobile : match.matches});\n    }\n\n    viewGame = (key) => this.props.history.push(`/game/${key}`);\n\n    componentWillMount()\n    {\n        //console.log('app will mount');\n        let mobileCheck = window.matchMedia('(max-width: 1000px)');\n            this.mobileCheck(mobileCheck);\n            mobileCheck.addListener(this.mobileCheck);\n    }\n\n    authHandler = async resp => {\n        \n        if(!this.userExists(resp.user))\n        {\n            this.addUser(resp.user);\n        }\n\n        this.setState({\n            user : resp.user,\n            loggingIn : false\n        });\n\n        if(this.props.location.pathname === '/signup')\n        {\n            this.props.history.push('/');\n        }\n        \n    }\n\n    authenticate = (u,p) =>\n    {\n        \n        //let provider = new firebase.auth().signInWithEmailAndPassword('test@test.com','test4$').then(this.authHandler);\n        \n        this.setState({loading : true});\n\n        //console.log('app auth');\n\n        new firebase.auth().signInWithEmailAndPassword(u,p).then((resp) => {\n\n            this.authHandler(resp);\n\n            console.log('firebase login',resp);\n            \n            this.setState({\n                loading : false,\n                signInError : null\n            });\n\n        }).catch((error) => {\n            this.setState({signInError : error.message});\n        });\n    }\n\n    logout = async () => {\n        await firebase.auth().signOut();\n        this.setState({user : {\n            uid : ''\n        }});\n    }\n\n    addUser = (user) => {\n        \n        //console.log(user);\n        \n        let stateUser = {\n            email : user.email\n        }\n\n        let users = {...this.state.users};\n            users[user.uid] = stateUser;\n\n            this.setState({users});\n    }\n\n    getUser = (hash) => {\n        \n        let toRet = null;\n\n        if(this.userExists(hash))\n        {\n            toRet = this.state.users[hash];\n        }\n\n        return toRet;\n    }\n\n    /**\n     * takes some val for a rule's drinks and sanitizes it for addition to the DB\n     */\n    sanitizeDrinks = (val) => {\n        \n        val = val.replace(/([\\d]+) drink(s)?/gi,'$1');\n\n        return val;\n    }\n\n    userExists = (user) => {\n        \n        if(user === undefined) return false;\n\n        try\n        {\n            let uid = typeof user === 'string' ? user : user.uid;\n    \n            return this.state.users[uid] !== undefined;\n            \n        }\n        catch(e)\n        {\n            console.error('Error checking for user',user);\n            return false;\n        }\n    }\n\n    signup = (email,pass) =>\n    {\n        //console.log('app signup');\n\n        firebase.auth().createUserWithEmailAndPassword(email,pass).then((res) => {\n            \n            this.authHandler(res);\n\n        }).catch((error) => {\n\n            //console.log(error);\n\n            this.setState({signupError : error.message});\n        })\n    }\n\n    onLoginClick = (e) => {\n        this.setState({loggingIn : true});\n    }\n\n    userLoggedIn = () => this.state.user.uid !== '';\n\n    renderAuthButton = () => {\n        \n        //<button className=\"App__login-button\" onClick={this.onLoginClick}>Log In</button>\n        //button onClick={this.logout} className=\"App__logout\">Turn Down</button>\n        //<Link to=\"/signup\" className=\"button-link App__sign-up-btn\">Signup</Link>\n\n        if(this.state.user.uid === '')\n        {\n            return (\n                <span>\n                    <button className=\"App__login-button link-button\" onClick={this.onLoginClick}>Log In</button>\n                    <Link to=\"/signup\" className=\"App__sign-up-btn\">Signup</Link>\n                </span>\n            );\n        }\n        else\n        {\n            return (\n                <span>\n                    <button onClick={this.logout} className=\"App__logout-button link-button\">Turn Down</button>\n                </span>\n            );\n        }\n    }\n\n    showShortcuts = () => {\n        this.shortCutsModal.current.show();\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.state.games);\n\n        //console.log('render app');\n        //return <Loader message=\"Loading...\"/>\n        //console.log(this.state.games);\n\n\n        if(this.state.loggingIn && this.mode !== 'signup')\n            return <Login authenticate={this.authenticate} error={this.state.signInError} />;\n\n        if(Object.keys(this.state.games).length === 0)\n        {\n            //console.log('delay for fb');\n            return <Loader message=\"Turning Up...\" />;\n        }\n\n        //console.log('render app',this.state.loading);\n\n        if(this.state.loading)\n        {\n            return <Loader message=\"Turning Up...\" />;\n        }\n\n        let view = null;\n        \n        // if(this.state.mobile)\n        // {\n        //     switch(this.props.mode)\n        //     {\n        //         case 'join' :\n        //             let key = this.props.match.params.key;\n                    \n        //             if(this.joinSession(key))\n        //             {\n        //                 this.props.history.push('/');\n        //             }\n                    \n        //             break;\n        //         case 'games' :\n        //             view = <Games \n        //                 games={this.state.games} \n        //                 editGame={this.editGame} \n        //                 addGame={this.addGame} \n        //                 deleteGame={this.deleteGame}\n        //                 copyGame={this.copyGame}\n        //                 editRule={this.editRule} \n        //                 deleteRule={this.deleteRule}\n        //                 addRule={this.addRule}\n        //                 mode={this.props.mode}\n        //                 match={this.props.match}\n        //                 canEditGame={this.canEditGame}\n        //                 canEditRule={this.canEditRule}\n        //                 canDeleteGame={this.canDeleteGame}\n        //                 canDeleteRule={this.canDeleteRule}\n        //                 userLoggedIn={this.userLoggedIn}\n        //                 getUser={this.getUser} />;\n        //             break;\n        //         case 'game' :\n        //             view = <Game \n        //                     index={this.props.match.params.ID} \n        //                     games={this.state.games} \n        //                     editGame={this.editGame} \n        //                     addGame={this.addGame} \n        //                     deleteGame={this.deleteGame}\n        //                     copyGame={this.copyGame}\n        //                     editRule={this.editRule} \n        //                     deleteRule={this.deleteRule}\n        //                     addRule={this.addRule}\n        //                     mode={this.props.mode}\n        //                     match={this.props.match}\n        //                     canEditGame={this.canEditGame}\n        //                     canEditRule={this.canEditRule}\n        //                     canDeleteGame={this.canDeleteGame}\n        //                     canDeleteRule={this.canDeleteRule}\n        //                     userLoggedIn={this.userLoggedIn}\n        //                     getUser={this.getUser}\n        //                     setSessionCombo={this.setSessionCombo} />;\n        //             break;\n        //         case 'signup' :\n        //             view = <Signup error={this.state.signupError} signup={this.signup} />;\n        //             break;\n        //         default :\n        //             view = <NotFound />;\n        //     }\n        // }\n        // else\n        // {\n            switch(this.props.mode)\n            {\n                case 'signup' :\n                    view = <Signup signup={this.signup} error={this.state.signupError} />;\n                    break;\n                case 'join' :\n                    let key = this.props.match.params.key;\n\n                    if(this.joinSession(key))\n                    {\n                        this.props.history.push('/');\n                    }\n                    \n                    break;\n                default :\n                    view = <Desktop \n                    games={this.state.games} \n                    editGame={this.editGame} \n                    addGame={this.addGame} \n                    deleteGame={this.deleteGame}\n                    copyGame={this.copyGame}\n                    editRule={this.editRule} \n                    deleteRule={this.deleteRule}\n                    addRule={this.addRule}\n                    mode={this.props.mode}\n                    match={this.props.match}\n                    canEditGame={this.canEditGame}\n                    canEditRule={this.canEditRule}\n                    canDeleteGame={this.canDeleteGame}\n                    canDeleteRule={this.canDeleteRule}\n                    userLoggedIn={this.userLoggedIn}\n                    getUser={this.getUser}\n                    setSessionCombo={this.setSessionCombo}\n                    currentComboCount={this.getCurrentSessionComboCount()}\n                    createSession={this.createSession}\n                    leaveSession={this.leaveSession}\n                    joinSession={this.joinSession}\n                    currentSession={this.state.currentSession}\n                    renderAuthButton={this.renderAuthButton}\n                    user={this.state.user} />\n            }\n            \n        //}\n\n        //view = null;\n        \n        return (\n            \n            <div className={`App App--${this.state.mobile ? 'mobile' : 'desktop'}`}>\n               \n                {view}\n                <ShortCutsModal ref={this.shortCutsModal} />\n            </div>\n            );\n    }\n}\n\nexport default withRouter(App);","import React from 'react';\nimport {BrowserRouter, Route, Switch} from 'react-router-dom';\nimport App from './App';\nimport NotFound from './NotFound';\n\nclass Router extends React.Component\n{\n    render()\n    {\n        return (\n            <BrowserRouter>\n                <Switch>\n                    <Route path=\"/join/:key\" render={(props) => <App {...props} mode=\"join\" />} />\n                    <Route path=\"/game/:ID\" render={(props) => <App {...props} mode=\"game\" />} />\n                    <Route exact path=\"/signup\" render={(props) => <App {...props} mode=\"signup\" />} />\n                    <Route exact path=\"/\" render={(props) => <App {...props} mode=\"games\" />} />\n                    <Route component={NotFound} />\n                </Switch>\n            </BrowserRouter>\n        );\n    }\n}\n\nexport default Router;","import React from 'react';\nimport {render} from 'react-dom';\n\nimport Router from './components/Router';\n\nimport './css/style.css';\n\nrender (<Router />, document.querySelector('#main'));"],"sourceRoot":""}