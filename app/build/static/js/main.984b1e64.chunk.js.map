{"version":3,"sources":["fakeGames.js","DataHelper.js","components/Loader.js","components/NotFound.js","components/EditButton.js","components/DeleteButton.js","components/GameSelect.js","components/RuleRow.js","components/RulesList.js","components/AddRulesForm.js","components/Alert.js","components/GameListItem.js","components/GameList.js","constants.js","components/GameAutoComplete.js","components/EyeButton.js","localStorageManager.js","components/GamePill.js","components/GameMultiSelect.js","components/AddGameForm.js","components/ComboCounter.js","components/Game.js","components/Games.js","components/SessionManager.js","components/ShortCutsModal.js","helpers.js","components/GameCardFreeSquare.js","components/FieldSet.js","components/Modal.js","components/Slider.js","components/GridPicker.js","components/GameCardSettingsModal.js","components/GameCard.js","components/Desktop.js","components/Login.js","config.js","base.js","components/Signup.js","components/search/Result.js","components/search/Index.js","components/App.js","components/Router.js","index.js"],"names":["fakeGames","DataHelper","data","hasData","Object","keys","length","forEach","func","undefined","Error","map","getGameByKey","key","getChildGames","parentKey","games","game","parent_game","gameHasRules","rules","getGameRules","includeParents","order","_this","ruleKey","assign","gameKey","objectCollectionToArrayWithKey","collection","keyFieldName","arr","obj","push","arrayWithKeyToObjectCollection","sortRules","rulesArr","sort","a","b","dirNum","direction","valA","valB","field","toLowerCase","title","filed","sanitizeForSorting","val","char","startReg","RegExp","endReg","replace","getNewRuleKey","Date","now","getNewGameKey","sortGamesBy","dir","fieldArr","toRet","indexOf","e","console","log","rulesObjectToArray","rule","id","getParentGames","gameOrKey","parent","gamesToKeys","getAncestors","ancestors","curKey","reverse","gameHasOtherUserGames","user","childGames","success","owner","gameHasOtherUserOwnedRules","hasOthers","this","Loader","className","props","message","React","Component","defaultProps","NotFound","EditButton","state","currentMode","setEditing","editing","setState","handleClick","preventDefault","handler","onClick","role","DeleteButton","GameSelect","innerSelect","createRef","test","outPutOptions","options","value","selected","defaultValue","ref","onChange","includeToplevel","excludedGames","RuleRow","ruleField","drinksField","gameSelect","handleRuleEdit","current","drinks","ruleObj","editRule","ruleIndex","handleRuleDelete","window","confirm","deleteRule","renderRule","input","onKeyUp","closeOnEscape","which","type","span","renderOwner","ownerhash","getUser","email","renderDrinks","disabled","handleDoubleClick","renderGame","Link","to","focus","onDoubleClick","canEditRule","canDeleteRule","RulesList","currentFilter","filterField","ruleMatchesFilter","ruleText","renderRuleRows","hiddenGames","includes","gameIndex","index","onFilterKeyUp","currentTarget","onHeaderCellClick","target","getAttribute","renderSortLabel","addEventListener","shiftKey","metaKey","ctrlKey","blur","prevProps","prevState","currentGameKey","setTimeout","placeholder","cellPadding","cellSpacing","data-field","recursive","AddRulesForm","onWindowKeyPress","altKey","resetForm","clearForm","handleAddClick","ruleTitle","addRule","alert","name","Alert","Tag","tag","children","GameListItem","titleField","onAddEditClick","editGame","onDeleteClick","deleteGame","onNameInputKeyPress","renderName","viewGame","link","onCopyClick","copyGame","highlight","canEditGame","canDeleteGame","userLoggedIn","showChildren","GameList","gameMatchesFilter","filter","q","renderGameList","currentIndex","handleFilterKeyUp","childGamesCount","RAYMOND_UID","GameAutoComplete","onTitleFieldKeyPress","suggestions","allSuggestionsSelected","nextSuggestion","previousSuggestion","clearSuggestions","currentSuggestion","chooseGame","renderAutoComplete","isSelected","g","selectedGames","includeGeneralRules","onGameSelect","clearTitleField","setCurrentSuggestion","i","findPreviousSuggestion","prevIndex","findNextSuggestion","nextIndex","allSelected","renderSuggestions","style","height","classes","join","onMouseEnter","currentSelection","EyeButton","open","useState","isOpen","setOpen","class","lsKey","lsGames","localStorage","getItem","setGames","setItem","JSON","stringify","parse","showParent","child","getHiddenGames","splice","hideParent","GamePill","onClose","toggleGameVisibility","show","childKey","onVisibilityToggle","visible","showVisibilityBtn","linkGame","showCloseBtn","GameMultiSelect","sanitizeGames","gameSelected","gen","clearGames","newGameSelect","selectedGame","onGameRemoved","gameToRemove","renderGames","AddGameForm","listenForShortcuts","onAddGameClick","parents","addGame","onMultiSelectError","onError","ComboCounter","maxCombo","animateSpeed","onGlobalKeyPress","targetTag","tagName","addDrink","removeDrink","clearDrinks","count","setSessionCombo","handleRemoveDrinkClick","animateCount","handleClearDrinksClick","animating","handleAddDrinkClick","calcShotHeight","handleToggleClick","Game","titleInput","editButton","shell","parentsMS","gameScrollPostBeforeUpdate","onParentChange","newParent","thisGameKey","handleTitleEditClick","handleParentPillVisibility","childHiddenGames","renderParentPills","renderBreadCrumbs","html","ancestor","scrollTop","scrollTo","Helmet","currentComboCount","width","href","innerWidth","Games","onToggleClick","renderAuthButton","canEditRules","canDeleteRules","SessionManager","currentSession","keyField","handleCreateSession","createSession","leaveSession","handleJoinSession","joinSession","renderSessionButtons","ShortcutsModal","shortcuts","combo","desc","close","renderShortcuts","shortcut","randoIndex","Math","floor","random","rando","GameCardFreeSquare","subtitle","onCogClick","FieldSet","legend","Modal","buttonText","currentState","buttonClassName","theme","showButton","openInitial","useEffect","closeOnEsc","removeEventListener","Slider","min","max","valuePrecision","startingValue","curVal","setCurVal","trackRef","useRef","handleRef","handleX","setHandleX","calcHandlePos","offsetWidth","onTrackClick","path","offset","round","calcValue","offsetX","newX","transform","GridPicker","size","startingSize","gridSize","setGridSize","squares","r","c","setGrid","renderGrid","GameCardSettingsModal","onApply","settings","settingsIn","setSettings","updateParentRatio","ratio","findIndex","p","findParentSettingsIndex","prevSettings","prevParents","slice","find","grid","oldSettings","GameCard","cardRules","setCardRules","settingsOpen","setSettingsOpen","defaultSettings","savedSettings","document","body","classList","add","querySelector","innerText","gameRules","shuffle","ceil","parentGames","ruleIndexes","numparentGames","reduce","prev","cur","parentRules","rows","cols","freeSquareRule","highlighted","freeIndex","num","columnSize","columnTemplate","gridTemplateRows","gridTemplateColumns","l","highlightRule","newSettings","Desktop","showShortcuts","mode","match","params","ID","withRouter","Login","userField","passwordField","authenticate","pass","error","required","config","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","initializeApp","base","Rebase","createClass","database","Signup","passwordField2","signup","pass1","Result","result","Index","gamesObj","setQ","uniqueGame","item","pos","byTitleDesc","makeResult","tot","results","setResults","qLCase","matches","matchChildren","m","matchChild","mc","concat","App","mobile","uid","users","loading","signupError","loginError","loggingIn","sessions","gamesInited","sessionKeyLength","sessionLife","shortCutsModal","getCurrentSessionComboCount","inASession","setSession","session","created","getTime","pruneSessions","toUpperCase","sessionKeyExists","sessionStorage","removeItem","generateSessionKey","code","String","fromCharCode","generateUniqueSessionKey","newRule","sanitizeDrinks","oldGame","newGame","gameTitle","newGameKey","copyRules","oldGameKey","newRules","newRuleKey","newKey","history","mobileCheck","authHandler","resp","userExists","addUser","location","pathname","u","auth","signInWithEmailAndPassword","then","signInError","catch","logout","signOut","stateUser","hash","createUserWithEmailAndPassword","res","onLoginClick","db","fbRefU","syncState","context","fbRefSessions","t","ssKey","fbRef","onAuthStateChanged","matchMedia","addListener","view","ShortCutsModal","Router","BrowserRouter","Switch","Route","render","exact","component"],"mappings":"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","file":"static/js/main.984b1e64.chunk.js","sourcesContent":["const fakeGames = {\n    \"game0\" : {\n      \"rules\" : {\n        \"game0_rule1585428503206\" : {\n          \"drinks\" : \"2 drinks\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"The name of the episode or movie is said or written\"\n        },\n        \"game0_rule1585443393434\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"obvious stock footage\"\n        },\n        \"game0_rule1585443993724\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"ESL Characters speaking English for no reason\"\n        },\n        \"game0_rule1585444223055\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"nut shot\"\n        },\n        \"game0_rule1585445102020\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"obviously empty coffee cup\"\n        },\n        \"game0_rule1585447770911\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"someone rips up a photo \"\n        },\n        \"game0_rule1585507595857\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Incorrect portrayal of \\\"hacking\\\"\"\n        },\n        \"game0_rule1585528860565\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game0\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"romantic tension between non spouses (will they / wont they characters)\"\n        }\n      },\n      \"title\" : \"General Rules\"\n    },\n    \"game1\" : {\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1_rule1\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game1\",\n          \"rule\" : \"Bone snap\"\n        },\n        \"game1_rule1585442777686\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Explosion\"\n        },\n        \"game1_rule1585442794346\" : {\n          \"drinks\" : \"2\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"cool explosion (ex: slow mo)\"\n        },\n        \"game1_rule1585442823231\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"unrealistic survival / healing\"\n        },\n        \"game1_rule1585442901374\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"glass breaks\"\n        },\n        \"game1_rule1585442925083\" : {\n          \"drinks\" : \"3\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"decapitation\"\n        },\n        \"game1_rule1585443336960\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"slow motion\"\n        },\n        \"game1_rule1585444849287\" : {\n          \"drinks\" : \"3\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"\\\"turn in your badge and gun\\\" / \\\"youre suspended!\\\" / etc\"\n        },\n        \"game1_rule1585448652082\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"headshot\"\n        }\n      },\n      \"title\" : \"Action\"\n    },\n    \"game1585442982618\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1585442982618_rule1585442993103\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Any dino related pun\"\n        },\n        \"game1585442982618_rule1585443044303\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Anytime you see a choker or midriff\"\n        },\n        \"game1585442982618_rule1585443065678\" : {\n          \"drinks\" : \"drink til it stops\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Dino roar\"\n        },\n        \"game1585442982618_rule1585443084585\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"bad cgi\"\n        },\n        \"game1585442982618_rule1585443110038\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"T Rex does something with his hands\"\n        },\n        \"game1585442982618_rule1585443158546\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Dinosaur is too big to fit in something\"\n        },\n        \"game1585442982618_rule1585443171333\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"poor dino disguising / someone doesnt notice the dino is alive\"\n        },\n        \"game1585442982618_rule1585448716738\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585442982618\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"someone grabs someone else's dick\"\n        }\n      },\n      \"title\" : \"Tammy and the T Rex\"\n    },\n    \"game1585446169128\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game1585446169128_rule1585446187228\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585446169128\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"\\\"enhance\\\"\"\n        }\n      },\n      \"title\" : \"Police / Crime\"\n    },\n    \"game1585519764301\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game1585519764301_rule1585519780902\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585519764301\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Cross Fade\"\n        },\n        \"game1585519764301_rule1585519789583\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585519764301\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Saxophone Soundtrack\"\n        }\n      },\n      \"title\" : \"Man Hunt\"\n    },\n    \"game1585541082218\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1585541104293\",\n      \"rules\" : {\n        \"game1585541082218_rule1585541134205\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Something is bejewelled\"\n        },\n        \"game1585541082218_rule1585541642525\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"a tiger hurts or scares someone\"\n        },\n        \"game1585541082218_rule1585545303143\" : {\n          \"drinks\" : \"1\",\n          \"gameKey\" : \"game1585541082218\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"tacky / trashy decorations\"\n        }\n      },\n      \"title\" : \"Tiger King\"\n    },\n    \"game1585541104293\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game1585541104293_rule1585751022903\" : {\n          \"drinks\" : \"1 drink\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Someone Cries\"\n        }\n      },\n      \"title\" : \"Reality TV\"\n    },\n    \"game1585600289161\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1\",\n      \"title\" : \"Jason Statham\"\n    },\n    \"game1585600326133\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game1585600289161\",\n      \"rules\" : {\n        \"game1585600326133_rule1585600342757\" : {\n          \"drinks\" : \"1\",\n          \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n          \"rule\" : \"Statham uses his boomerang\"\n        }\n      },\n      \"title\" : \"In The Name of the king\"\n    },\n    \"game1585662389801\" : {\n      \"owner\" : \"\",\n      \"parent_game\" : \"game1585541104293\",\n      \"title\" : \"90 Day Fiance\"\n    },\n    \"game1585662406239\" : {\n      \"owner\" : \"\",\n      \"parent_game\" : \"game1585541104293\",\n      \"rules\" : {\n        \"game1585662406239_rule1585662454054\" : {\n          \"drinks\" : \"everyone but the closest guess drinks. Price is right rules\",\n          \"gameKey\" : \"game1585662406239\",\n          \"owner\" : \"\",\n          \"rule\" : \"Everyone guesses the budget of each bride before they say it\"\n        }\n      },\n      \"title\" : \"Say Yes To The Dress\"\n    },\n    \"game1585872782855\" : {\n      \"owner\" : \"uGqTXpxQHzg4K7DRhObVWvValvF3\",\n      \"parent_game\" : \"game0\",\n      \"title\" : \"test to delete\"\n    },\n    \"game2\" : {\n      \"parent_game\" : \"game1\",\n      \"rules\" : {\n        \"game2_rule1\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game2\",\n          \"rule\" : \"Splits\"\n        }\n      },\n      \"title\" : \"Jean Claude Van Damme\"\n    },\n    \"game3\" : {\n      \"parent_game\" : \"game0\",\n      \"rules\" : {\n        \"game3_rule1\" : {\n          \"drinks\" : \"1 sip\",\n          \"gameKey\" : \"game3\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"Jump Scare\"\n        },\n        \"game3_rule1585427944776\" : {\n          \"drinks\" : \"1 drink\",\n          \"gameKey\" : \"game3\",\n          \"owner\" : \"WCRKE62ab8gw6FB2iCYkOX4XmIg2\",\n          \"rule\" : \"rule added by raymond@raymond\"\n        }\n      },\n      \"title\" : \"Horror Movies\"\n    },\n    \"game4\" : {\n      \"parent_game\" : \"game0\",\n      \"title\" : \"Cartoons\"\n    },\n    \"game5\" : {\n      \"parent_game\" : \"game4\",\n      \"rules\" : {\n        \"game5_rule1\" : {\n          \"drinks\" : \"drink til it stops\",\n          \"gameKey\" : \"game5\",\n          \"rule\" : \"CGI Webslinging\"\n        }\n      },\n      \"title\" : \"Adventures of Spiderman\"\n    }\n  }\n\nexport default fakeGames;","class DataHelper {\n  constructor(data) {\n    this.data = data;\n  }\n\n  data = {};\n\n  hasData = () => this.data && Object.keys(this.data).length > 0;\n\n  forEach = (func, data) => {\n    if (data === undefined) {\n      throw new Error(\"DataHelper.forEach requires a data parameter\");\n    }\n\n    return Object.keys(data).map(func);\n  };\n\n  getGameByKey = (key) => {\n    //console.log(this.data[key]);\n\n    return this.data[key];\n  };\n\n  getChildGames = (parentKey) => {\n    //console.log('get child games');\n\n    let games = {};\n\n    Object.keys(this.data).map((key) => {\n      let game = this.getGameByKey(key);\n\n      if (game.parent_game && game.parent_game[0] === parentKey) {\n        //console.log(game,game.parent_game,'===',parentKey);\n        games[key] = game;\n      }\n\n      return null;\n    });\n\n    //console.log(games);\n\n    return games; //this.sortGamesBy('title','asc',games);\n  };\n\n  gameHasRules = (game) => game.rules && Object.keys(game.rules).length > 0;\n\n  getGameRules = (key, includeParents = true, order) => {\n    let game = this.getGameByKey(key);\n    let rules = {};\n    let _this = this;\n\n    if (this.gameHasRules(game)) {\n      this.forEach((ruleKey) => {\n        rules[ruleKey] = Object.assign(game.rules[ruleKey], { gameKey: key });\n      }, game.rules);\n    }\n\n    if (includeParents && game.parent_game && game.parent_game.length > 0) {\n      //console.log('parent rules too');\n\n      game.parent_game.map((parentKey) => {\n        return Object.assign(\n          rules,\n          _this.getGameRules(parentKey, false, order)\n        );\n      });\n    }\n\n    return rules;\n  };\n\n  // getGameRules = (key,recursive = false,order) => {\n\n  //     let game = this.getGameByKey(key);\n  //     let rules = {};\n  //     let _this = this;\n\n  //     if(this.gameHasRules(game))\n  //     {\n  //         this.forEach((ruleKey) => {\n  //             rules[ruleKey] = Object.assign(game.rules[ruleKey],{gameKey : key});\n  //         },game.rules);\n  //     }\n\n  //     if(recursive && game.parent_game)\n  //     {\n  //         game.parent_game.forEach((key) => {\n  //             let parentGame = this.getGameByKey(key);\n\n  //             if(parentGame && game.parent_game)\n  //             {\n  //                 rules = Object.assign(rules,_this.getGameRules(key,recursive,order));\n  //             }\n  //         });\n  //     }\n\n  //     return rules;\n  // }\n\n  objectCollectionToArrayWithKey = (collection, keyFieldName = \"key\") => {\n    let arr = [];\n\n    this.forEach((key) => {\n      var obj = collection[key];\n\n      if (obj === undefined) return;\n\n      obj[keyFieldName] = key;\n\n      arr.push(obj);\n    }, collection);\n    return arr;\n  };\n\n  arrayWithKeyToObjectCollection = (arr, keyFieldName = \"key\") => {\n    let collection = {};\n\n    arr.forEach((obj) => {\n      let key = obj[keyFieldName];\n\n      obj[keyFieldName] = null;\n\n      collection[key] = obj;\n    });\n\n    return collection;\n  };\n\n  sortRules = (rules, order) => {\n    let rulesArr = this.objectCollectionToArrayWithKey(rules);\n\n    //console.log(rulesArr);\n\n    rulesArr.sort((a, b) => {\n      let dirNum = order.direction === \"asc\" ? 1 : -1;\n      let valA = \"\";\n      let valB = \"\";\n\n      switch (order.field) {\n        case \"rule\":\n        case \"drinks\":\n          valA = a[order.field].toLowerCase();\n          valB = b[order.field].toLowerCase();\n          break;\n        case \"game\":\n          valA = this.getGameByKey(a.gameKey).title.toLowerCase();\n          valB = this.getGameByKey(b.gameKey).title.toLowerCase();\n          break;\n        default:\n          valA = a[order.field];\n          valB = b[order.filed];\n      }\n\n      valA = this.sanitizeForSorting(valA);\n      valB = this.sanitizeForSorting(valB);\n\n      return valA <= valB ? -1 * dirNum : dirNum;\n    });\n\n    //console.log(rulesArr);\n\n    let rulesCollection = this.arrayWithKeyToObjectCollection(rulesArr);\n\n    return rulesCollection;\n  };\n\n  sanitizeForSorting = (val) => {\n    let badChars = ['\"', \"'\", \"-\", \"(\", \")\"];\n\n    badChars.forEach((char) => {\n      let startReg = new RegExp(`^[${char}]+`);\n      let endReg = new RegExp(`[${char}]+$`);\n\n      val = val.replace(startReg, \"\").replace(endReg, \"\");\n    });\n\n    return val;\n  };\n\n  getNewRuleKey = (gameKey) => {\n    return `${gameKey}_rule${Date.now()}`;\n  };\n\n  getNewGameKey = () => `game${Date.now()}`;\n\n  sortGamesBy = (field, dir = \"asc\", games) => {\n    if (games === undefined) return {};\n\n    //console.log('sort games',games);\n    //console.log('sort games',games);\n\n    let fieldArr = [];\n    let toRet = {};\n    let dirNum = dir.toLowerCase().indexOf(\"asc\") === 0 ? 1 : -1;\n\n    this.forEach((key) => {\n      let game = this.getGameByKey(key);\n\n      if (!game) return;\n\n      try {\n        fieldArr.push({\n          key: key,\n          [field]: game[field],\n        });\n      } catch (e) {\n        console.log(game, e);\n        return;\n      }\n    }, games);\n\n    fieldArr.sort((a, b) => {\n      switch (typeof a[field]) {\n        case \"string\":\n        default:\n          return a[field] && b[field]\n            ? a[field].toLowerCase() < b[field].toLowerCase()\n              ? dirNum * -1\n              : dirNum * 1\n            : 0;\n      }\n    });\n\n    fieldArr.forEach((game) => {\n      toRet[game.key] = this.getGameByKey(game.key);\n    });\n\n    return toRet;\n  };\n\n  rulesObjectToArray = (game) => {\n    const arr = [];\n\n    for (let ruleKey in game) {\n      const rule = {\n        ...game[ruleKey],\n        id: ruleKey,\n      };\n\n      arr.push(rule);\n    }\n\n    return arr;\n  };\n\n  getParentGames = (gameOrKey) => {\n    let game =\n      typeof gameOrKey === \"object\" ? gameOrKey : this.getGameByKey(gameOrKey);\n\n    let parents =\n      game.parent_game && game.parent_game.length > 0\n        ? game.parent_game.map((parentKey) => {\n            let parent = this.getGameByKey(parentKey);\n\n            if (parent === undefined) return undefined;\n\n            parent.gameKey = parentKey;\n\n            return parent;\n          })\n        : [];\n\n    return parents;\n  };\n\n  gamesToKeys = (games) => {\n    return games.map((game) => {\n      return game.gameKey;\n    });\n  };\n\n  getAncestors = (key) => {\n    let ancestors = [];\n    //let game = this.getGameByKey(key);\n\n    let curKey = key;\n    let parent = undefined; //this.getParentGame(key);\n\n    while (parent !== undefined) {\n      curKey = parent.key;\n      parent = this.getParentGames(curKey);\n\n      ancestors.push(parent);\n    }\n\n    return ancestors.reverse();\n  };\n\n  gameHasOtherUserGames = (gameKey, user) => {\n    let childGames = this.getChildGames(gameKey);\n    let success = true;\n\n    this.forEach((key) => {\n      let game = this.getGameByKey(key);\n\n      if (game.owner !== user) {\n        success = false;\n        return;\n      }\n    }, childGames);\n\n    return success;\n  };\n\n  gameHasOtherUserOwnedRules = (game, user) => {\n    let hasOthers = false;\n\n    this.forEach((key) => {\n      let rule = game.rules[key];\n\n      //console.log(rule);\n\n      if (\n        rule &&\n        Object.keys(rule).length > 0 &&\n        rule.owner &&\n        rule.owner !== user\n      ) {\n        hasOthers = true;\n        return;\n      }\n    }, game.rules);\n    return hasOthers;\n  };\n}\nexport default DataHelper;\n","import React from 'react';\nimport PropTypes from 'prop-types'\n\nclass Loader extends React.Component\n{\n    static propTypes = {\n        message : PropTypes.string\n    };\n    static defaultProps =  {\n        message : ''\n    }\n\n    render()\n    {\n        return (\n            <div className=\"Loader\">\n                <div className=\"lds-dual-ring\"></div>\n                {this.props.message !== '' ? <h4 className=\"Loader__message\">{this.props.message}</h4> : null}\n            </div>);\n    }loading\n}\n\nexport default Loader;","import React from 'react';\n\nclass NotFound extends React.Component\n{\n    render()\n    {\n        return (\n            <div className=\"NotFound\">\n                <h1>Page Not Found</h1>\n            </div>);\n    }\n}\n\nexport default NotFound;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass EditButton extends React.Component\n{\n    static propTypes = {\n        handler : PropTypes.func.isRequired\n    };\n\n    state = {\n        currentMode : 'display'\n    };\n\n    setEditing = (editing) => {\n        this.setState({editing : editing});\n    }\n\n    handleClick = (e) => {\n    \n        e.preventDefault();\n\n        this.setState ({ currentMode : this.state.currentMode === 'display' ? 'confirm' : 'display'});\n        \n        this.props.handler(e);\n    }\n\n    render()\n    {\n        return (\n            <button className={`EditButton EditButton--${this.state.currentMode}`} onClick={this.handleClick} title=\"Edit Game\">\n                <span className=\"sr-only\">\n                    {this.state.currentMode === 'display' ? 'Edit' : 'Confirm'}\n                </span>\n                <i className=\"EditButton__icon\" role=\"presentation\"></i>\n            </button>);\n    }\n}\n\nexport default EditButton;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass DeleteButton extends React.Component\n{\n    static propTypes = {\n        handler : PropTypes.func.isRequired\n    };\n\n    state = {\n        currentMode : 'display'\n    };\n\n    handleClick = (e) => {\n    \n        e.preventDefault();\n\n        this.setState ({ currentMode : this.state.currentMode === 'display' ? 'confirm' : 'display'});\n        \n        this.props.handler(e);\n    }\n\n    render()\n    {\n        return (\n            <button className={`DeleteButton DeleteButton--${this.state.currentMode}`} onClick={this.handleClick} title=\"Delete Game\">\n                <span className=\"sr-only\">\n                    {this.state.currentMode === 'display' ? 'Edit' : 'Confirm'}\n                </span>\n                <i className=\"DeleteButton__icon\" role=\"presentation\"></i>\n            </button>);\n    }\n}\n\nexport default DeleteButton;","import React from 'react';\nimport PropTypes from 'prop-types'\nimport DataHelper from '../DataHelper';\n\nclass GameSelect extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        defaultValue : PropTypes.string,\n        excludedGames : PropTypes.array //doesn't work... yet\n    };\n\n    static defaultProps =  {\n        includeToplevel : false,\n        defaultValue : 'game0',\n        onChange : function(e){},\n        excludedGames : []\n    }\n\n    innerSelect = React.createRef();\n\n    test = () => this.innerSelect;\n\n    outPutOptions = () => {\n        \n        let options = [];\n\n        this.data = new DataHelper(this.props.games);\n\n        this.data.forEach((key) => {\n            let game = this.data.getGameByKey(key);\n\n            options.push(<option key={'game-select_' + key} value={key} selected={key === this.props.defaultValue ? 'selected' : ''}>\n                {game.title}\n            </option>)\n        },this.data.sortGamesBy('title','asc',this.props.games));\n\n        return options;\n    }\n    render()\n    {\n        //console.log(this.props.defaultValue);\n        return (\n            <select className=\"GameSelect\" ref={this.innerSelect} onChange={this.props.onChange} defaultValue={this.props.defaultValue}>\n                {/* this.props.includeToplevel ? <option value=\"\">Top Level</option> : null */}\n                {this.outPutOptions()}\n            </select>);\n    }\n}\n\nexport default GameSelect;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EditButton from './EditButton';\nimport DeleteButton from './DeleteButton';\nimport DataHelper from '../DataHelper';\nimport {Link} from 'react-router-dom';\nimport GameSelect from './GameSelect';\n\nclass RuleRow extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            editing : false,\n            rule : null\n        }\n    }\n    \n\n    ruleField = React.createRef();\n    drinksField = React.createRef();\n    gameSelect = React.createRef();\n\n    static propTypes = {\n        ruleIndex : PropTypes.string.isRequired,\n        gameIndex : PropTypes.string.isRequired, //this is for the game showing the rule, not the game owning the rule\n                                                //using getGameRules() will return a struct of rules each with a new gameKey field for\n                                                //the key of the game that owns that rule\n        rule : PropTypes.object.isRequired,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired\n    };\n    \n    static defaultProps =  {\n        \n    }\n\n    componentDidUpdate()\n    {\n        if(this.ruleField && this.ruleField.current)\n        {\n            this.ruleField.current.focus();\n        }\n    }\n\n    handleRuleEdit = (e) => {\n\n        let editing = this.state.editing;\n        \n\n        //let drinksField = this.state.drinksField.current;\n        //let ruleField = this.state.ruleField.current;\n\n        console.log(this.drinksField,this.ruleField);\n\n        if(this.drinksField \n            && this.ruleField\n            && this.drinksField.current\n            && this.ruleField.current)\n        {\n            let drinks = this.drinksField.current.value;\n            let rule = this.ruleField.current.value;\n\n            if(drinks === '')\n            {\n                drinks = this.state.rule.drinks;\n            }\n\n            if(rule === '')\n            {\n                rule = this.state.rule.rule;\n            }\n\n            let ruleObj = {...this.state.rule};\n                ruleObj.rule = rule;\n                ruleObj.drinks = drinks;\n            \n                ruleObj.gameKey = this.gameSelect.current.innerSelect.current.value;//.innerSelect.value;\n\n            this.props.editRule(this.props.rule.gameKey,this.props.ruleIndex,ruleObj);\n\n            this.setState({\n                rule : ruleObj\n            });\n        }\n        \n\n        this.setState({\n            editing : !editing})\n\n            /*\n        if(editing)\n        {\n            let rule = {\n            rule : this.ruleField.current ? this.ruleField.current.value : this.state.rule.rule,\n            drinks : this.drinksField.current.value\n        };\n            this.props.editRule(this.props.rule.gameKey,this.props.ruleIndex,rule);\n        }\n        else\n        {\n            console.log(this.rule);\n            //this.ruleField.current.focus();\n        }\n\n        this.setState({\n            rule : rule\n        }); */\n\n    }\n\n    handleRuleDelete = (e) => { \n        \n        if(this.state.editing)\n        {\n            this.setState({editing : false});\n        }\n        else\n        {\n            if(window.confirm(`Are you sure you want to Delete the rule ${this.state.rule.rule} (${this.state.rule.drinks})?`))\n            {\n                this.props.deleteRule(this.props.rule.gameKey,this.props.ruleIndex);\n    \n                this.setState({editing : false});\n            }\n        }\n    }\n\n    renderRule = () =>\n    {\n        let input = <input className=\"RuleRow__title-field editable\" onKeyUp={(e) => {\n\n            this.closeOnEscape(e);\n\n            if(e.which === 13)\n            {\n                this.handleRuleEdit();\n            }\n        }} type=\"text\" ref={this.ruleField} defaultValue={this.state.rule.rule} />;\n        let span = <span className=\"RuleRow__title-field\">{this.state.rule.rule}</span>;\n\n        return this.state.editing ? input : span;\n    }\n\n    componentWillMount()\n    {\n        this.setState({rule : this.props.rule});\n        this.data = new DataHelper(this.props.games);\n    }\n    renderOwner = (ownerhash) => {\n        \n        let user = this.props.getUser(ownerhash);\n\n        return <span className=\"RuleRow__owner\">{user ? user.email : 'Unknown User'}</span>\n\n    }\n    renderDrinks = () => {\n        let input = <input \n            className=\"RuleRow__drinks-field editable\" \n            type=\"text\" \n            disabled={!this.state.editing} \n            ref={this.drinksField} \n            defaultValue={this.props.rule.drinks}\n            onKeyUp={(e) => {\n\n                console.log(e.which);\n\n                this.closeOnEscape(e);\n\n                if(e.which === 13)\n                {\n                    this.handleRuleEdit();\n                }\n            }} />\n        let span = <span className=\"RuleRow__drinks-field\">{this.props.rule.drinks}</span>;\n\n        return this.state.editing ? input : span;\n    }\n\n    handleDoubleClick = (e) => {\n        \n        if(!this.state.editing)\n        {\n            this.setState({editing : true});\n        }\n    }\n\n    renderGame = (game) => {\n        \n        return this.state.editing ? \n                <GameSelect\n                    games={this.props.games}\n                    defaultValue={this.props.rule.gameKey}\n                    ref={this.gameSelect} />\n                : <Link to={`/game/${this.props.rule.gameKey}`} className=\"RuleRow__game-link\">{game.title}</Link>;\n    }\n\n    closeOnEscape = (e) => {\n\n        if(e.which === 27)\n        {\n            this.setState({editing : false});\n        }\n    }\n\n    render()\n    {\n        let game = this.data.getGameByKey(this.props.rule.gameKey);\n\n        return (\n            <tr className=\"RuleRow\" onDoubleClick={this.handleDoubleClick}>\n                \n                <td className=\"RuleRow__rule-cell\">\n                    {this.renderRule()}\n                </td>\n                <td className=\"RuleRow__drinks-cell\">\n                    {this.renderDrinks()}\n                </td>\n                <td className=\"RuleRow__game-cell\">\n                    {this.renderGame(game)}\n                </td>\n                {/* <td className=\"RuleRow__owner-cell\">\n                    {this.renderOwner(this.props.rule.owner)}\n                </td> */}\n                <td className=\"RuleRow__controls-cell\">\n                    {this.props.canEditRule(this.props.rule) ? <EditButton handler={this.handleRuleEdit} /> : null}\n                    {this.props.canDeleteRule(this.props.rule) ? <DeleteButton handler={this.handleRuleDelete} /> : null}\n                </td>\n            </tr>);\n    }\n}\n\nexport default RuleRow;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DataHelper from '../DataHelper';\nimport RuleRow from './RuleRow';\n\nclass RulesList extends React.Component\n{\n    state = {\n        rules : undefined,\n        currentFilter : '',\n        order : null\n    };\n\n    static propTypes = {\n        recursive : PropTypes.bool,\n        index : PropTypes.string.isRequired,\n        games : PropTypes.object.isRequired,\n        editRule : PropTypes.func.isRequired,\n        deleteRule : PropTypes.func.isRequired,\n        getUser : PropTypes.func.isRequired,\n        hiddenGames : PropTypes.array \n    };\n\n    static defaultProps =  {\n        recursive : false,\n        hiddenGames : []\n    }\n\n    filterField = React.createRef();\n\n    componentDidMount()\n    {\n        window.addEventListener('keydown',(e) => {\n            \n            if(this.filterField && this.filterField.current)//ctrl/cmd + shift + f\n            {\n                if((e.shiftKey && (e.metaKey || e.ctrlKey) && e.which === 70))\n                {\n                    this.filterField.current.focus();\n                }\n                else if(e.which === 27)\n                {\n                    this.filterField.current.value = '';\n                    this.filterField.current.blur();\n                    this.setState({currentFilter : ''});\n                }\n            }\n        })\n    }\n\n    ruleMatchesFilter = (ruleText) => {\n\n        //console.log(this.state.currentFilter,ruleText);\n\n        if(this.state.currentFilter === '') return true;\n\n        return this.state.currentFilter.toLowerCase().indexOf(ruleText.toLowerCase()) > -1 ||\n            ruleText.toLowerCase().indexOf(this.state.currentFilter.toLowerCase()) > -1;\n    }\n\n    renderRuleRows = () =>\n    {\n        return <tbody>{this.data.forEach((key)=>{\n\n            let rule = this.rules[key];\n\n            \n\n            if(this.ruleMatchesFilter(rule.rule) && !this.props.hiddenGames.includes(rule.gameKey))\n            {\n                return <RuleRow \n                    games={this.props.games}\n                    key={key} \n                    rule={rule} \n                    ruleIndex={key}\n                    gameIndex={this.props.index} \n                    deleteRule={this.deleteRule} \n                    editRule={this.props.editRule}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteRule={this.props.canEditRule}\n                    getUser={this.props.getUser}\n                />\n            }\n            \n        },this.rules)}</tbody>\n    }\n\n    onFilterKeyUp = (e) => {\n    \n        //e.preventDefault();\n        let target = e.currentTarget;\n        let val = target.value;\n\n        this.setState({currentFilter : val});\n        \n    }\n\n    deleteRule = (gameIndex,ruleIndex) => {\n\n        let rules = {...this.rules};\n\n        if(rules[ruleIndex])\n        {\n            delete rules[ruleIndex];\n            this.setState({rules});\n\n            //console.log(gameIndex,ruleIndex);\n            this.props.deleteRule(gameIndex,ruleIndex);\n        }\n    }\n\n    onHeaderCellClick = (e) => {\n        let target = e.target;\n\n        if(target)\n        {\n            let field = target.getAttribute('data-field');\n\n            let order = this.state.order ? {...this.state.order} : {field : '',direction : ''};\n\n            if(order.field === field)\n            {\n                order.direction = order.direction === 'asc' ? 'desc' : 'asc';\n            }\n            else\n            {\n                order.direction = 'asc';\n                order.field = field;\n            }\n\n            this.setState({order});\n        }\n    }\n\n    renderSortLabel = (field) => {\n\n        if(!this.state.order) return null;\n\n        return field === this.state.order.field ?\n            this.state.order.direction === 'asc' ? <span className=\"RulesList__sort-direction fa fa-chevron-up\"></span> : <span className=\"RulesList__sort-direction fa fa-chevron-down\"></span>\n            : null\n    }\n\n    getSnapshotBeforeUpdate(prevProps,prevState)\n    {\n        this.currentGameKey = this.props.index;\n\n        return null;\n    }\n\n    getSnapshotAfterUpdate()\n    {\n        this.currentGameKey = this.props.index;\n    }\n    \n    render()\n    {\n        if(this.currentGameKey !== this.props.index && this.currentGameKey)\n        {\n            setTimeout(() => {\n                this.filterField.current.value = '';\n                this.onFilterKeyUp({currentTarget : this.filterField.current});\n            }, 1);\n        }\n\n        this.data = new DataHelper(this.props.games);\n\n        this.rules = this.data.getGameRules(this.props.index,true);\n\n        if(this.state.order)\n        {\n            this.rules = this.data.sortRules(this.rules,this.state.order);\n            //console.log(this.rules);\n        }\n\n        return (\n            <div className=\"RulesList\">\n                <header className=\"RulesList__header\">\n                    <input \n                        ref={this.filterField}\n                        type=\"search\" \n                        className=\"RulesList__filter-field\" \n                        placeholder=\"Find A Rule\" \n                        onKeyUp={this.onFilterKeyUp} />\n                </header>\n                \n                <table cellPadding=\"0\" cellSpacing=\"0\">\n                    <thead className=\"RulesList__header\">\n                        <tr>\n                            <th className=\"RulesList__rule-cell\" \n                                data-field=\"rule\"\n                                onClick={this.onHeaderCellClick}>Rule{this.renderSortLabel('rule')}</th>\n                            <th className=\"RulesList__drinks-cell\" \n                                data-field=\"drinks\"\n                                onClick={this.onHeaderCellClick}>Drinks{this.renderSortLabel('drinks')}</th>\n                            <th className=\"RulesList__game-cell\" \n                                data-field=\"game\"\n                                onClick={this.onHeaderCellClick}>Game{this.renderSortLabel('game')}</th>\n                            {/* <th className=\"RulesList__owner-cell\" \n                                data-field=\"owner\">Owner</th> */}\n                            <th className=\"RulesList__controls-cell\">&nbsp;</th>\n                        </tr>\n                    </thead>\n                    \n                    {this.renderRuleRows()}\n                </table>\n            </div>);\n    }\n}\n\nexport default RulesList;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GameSelect from './GameSelect';\nimport DataHelper from '../DataHelper';\n\nclass AddRulesForm extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        gameIndex : PropTypes.string.isRequired,\n        addRule : PropTypes.func.isRequired\n    };\n\n    static defaultProps =  {}\n\n    gameSelect = React.createRef();\n    ruleField = React.createRef();\n    drinksField = React.createRef();\n    \n    componentWillMount()\n    {\n        this.data = new DataHelper(this.props.games);\n        \n        window.addEventListener('keypress',this.onWindowKeyPress);\n    }\n\n    onWindowKeyPress = (e) => {\n\n        //console.log(e);\n\n        if(e.which === 174 && e.altKey) //alt + r\n        {\n            this.ruleField.current.focus();\n            e.preventDefault();\n        }\n    }\n\n    resetForm = () => \n    {\n        this.gameSelect.current.test().current.value = this.props.gameIndex;\n        this.ruleField.current.focus();\n    }\n\n    clearForm = () =>\n    {\n        this.ruleField.current.value =\n        this.drinksField.current.value = '';\n    }\n\n    handleAddClick = (e) => {\n        let gameKey = this.gameSelect.current.innerSelect.current.value;\n\n        let ruleTitle = this.ruleField.current.value;\n        let drinks = this.drinksField.current.value;\n        \n        if(ruleTitle === '' || drinks === '' || !gameKey || gameKey === '')\n        {\n            alert('Please choose a game, enter a rule and a drink penalty.');\n\n            return;\n        }\n        let rule = {\n            rule : ruleTitle,\n            drinks : drinks\n        };\n\n        this.props.addRule(gameKey,rule);     \n        this.clearForm();\n        this.resetForm();   \n    }\n\n    onKeyUp = (e) => {\n\n        if(e.which === 13) // Enter\n        {\n            this.handleAddClick();\n            e.preventDefault();\n        }\n    }\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        //let parentGame = this.data.getGameByKey(this.props.gameIndex);\n        //console.log(parentGame);\n        \n        let games = this.data.sortGamesBy('title','asc',this.props.games);\n        \n        return (\n            <div className=\"AddRulesForm\">\n                <GameSelect \n                    games={games} \n                    name=\"game\" \n                    defaultValue={this.props.gameIndex} \n                    ref={this.gameSelect} className=\"AddRulesForm__game-select\" />\n                <textarea placeholder=\"Rule\" name=\"rule\" ref={this.ruleField} className=\"AddRulesForm__rule-field\"></textarea>\n                <input \n                    type=\"text\" \n                    name=\"drinks\" \n                    ref={this.drinksField}\n                    onKeyUp={this.onKeyUp} \n                    placeholder=\"Drinks\" \n                    className=\"AddRulesForm__drinks-field\" />\n                <button type=\"button\" onClick={this.handleAddClick}>Add Rule</button>\n            </div>);\n    }\n}\n\nexport default AddRulesForm;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Alert extends React.Component\n{\n    static propTypes = {\n        tag : PropTypes.string,\n        type : PropTypes.string\n    };\n    \n    static defaultProps = {\n        tag : 'span',\n        type : 'info'\n    };\n\n    render()\n    {\n        const Tag = `${this.props.tag}`;\n\n        return (\n            <Tag className={`Alert Alert--${this.props.type}`}>\n                {this.props.children}\n            </Tag>);\n    }\n}\n\nexport default Alert;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GameList from './GameList';\nimport EditButton from './EditButton';\nimport DeleteButton from './DeleteButton';\nimport { Link } from \"react-router-dom\";\nimport DataHelper from '../DataHelper';\n\nclass GameListItem extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            editing :false,\n            game : {}\n        }\n    }\n\n    titleField = React.createRef();\n\n    static propTypes = {\n        index : PropTypes.string.isRequired,\n        game : PropTypes.object.isRequired,\n        games : PropTypes.object.isRequired,\n        showChildren : PropTypes.bool,\n        editGame : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        copyGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        highlight : PropTypes.bool\n    };\n\n    static defaultProps =  {\n        showChildren :  false,\n        highlight : false\n    }\n\n    onAddEditClick = (e) => {\n\n        let editing = !this.state.editing;\n\n        if(!editing)\n        {\n            this.props.game.title = this.titleField.current.value;\n            this.props.editGame(this.props.index,this.props.game);\n        }\n\n        this.setState({editing : editing});\n    }\n\n    onDeleteClick = (e) => {\n\n        if(this.state.editing)\n        {\n            this.setState({editing : false});\n        }\n        else if(window.confirm(`Are you sure you want to delete \"${this.game.title}\"`))\n        {\n            this.props.deleteGame(this.props.index);\n        }\n        \n    }\n\n    componentWillMount()\n    {\n        this.setState({game : this.props.game});\n        \n    }\n\n    //onClick={(e) => this.props.history.push(`/game/${this.props.index}`)} \n    onNameInputKeyPress = (e) => {\n        \n        switch(e.which)\n        {\n            case 13: //enter\n                this.onAddEditClick();\n                break;\n            case 27: //esc\n                this.setState({editing : false});\n                break;\n            default : break;\n        }\n    }\n    renderName = () => {\n        let input = <input \n                        onClick={this.viewGame} \n                        name=\"GameListItem__title\" \n                        ref={this.titleField} \n                        className=\"GameListItem__title editable\" \n                        onKeyUp={this.onNameInputKeyPress}\n        defaultValue={this.game.title} />;\n        const link = <Link \n                        to={`/game/${this.props.index}`}\n                        className=\"GameListItem__title\" \n                        >\n                        {this.game.title}\n                        </Link>;\n\n        return this.state.editing ? input : link;\n    }\n\n    handleDoubleClick = (e) => {\n        \n        if(!this.state.editing)\n        {\n            this.setState({editing : true});\n        }\n    }\n\n    onCopyClick = (e) =>\n    {\n        this.props.copyGame(this.props.index);\n    }\n\n    componentDidUpdate()\n    {\n        if(this.titleField && this.titleField.current)\n        {\n            this.titleField.current.focus();\n        }\n    }\n    \n    render()\n    {\n\n        this.data = new DataHelper(this.props.games);\n\n        this.game = this.data.getGameByKey(this.props.index);\n\n        //console.log(this.game.title,this.props.highlight);\n\n        //console.log(this.props.canDeleteGame);\n\n        return (\n            <li className={`GameListItem ${this.props.highlight ? ' GameListItem--highlight' : ''}`} id={this.props.index} onDoubleClick={this.handleDoubleClick}>\n                <header className=\"GameListItem__header\">\n                    {this.renderName()}\n\n                    <span className=\"GameListItem__controls-shell\">\n                        {this.props.canEditGame(this.game) ? <EditButton handler={this.onAddEditClick} /> : null}\n                        {this.props.canDeleteGame(this.props.index) ? <DeleteButton handler={this.onDeleteClick} /> : null}\n                        {this.props.userLoggedIn() ? <button type=\"button\" className=\"GameListItem__copy-btn\" onClick={this.onCopyClick} title=\"Copy Game\">\n                            <span className=\"sr-only\">duplicate this game</span>\n                            <i className=\"fa fa-copy\"></i>\n                        </button> : null}\n                    </span>\n\n                </header>\n                {\n                    this.props.showChildren ? <GameList \n                        game={this.game} \n                        games={this.props.games} \n                        parent={this.props.index}\n                        canEditGame={this.props.canEditGame}\n                        canEditRule={this.props.canEditRule}\n                        canDeleteGame={this.props.canDeleteGame}\n                        canDeleteRule={this.props.canEditRule}\n                        copyGame={this.props.copyGame} /> : null\n                }     \n            </li>);\n    }\n}\n\nexport default GameListItem;","import React from 'react';\nimport DataHelper from '../DataHelper';\nimport PropTypes from 'prop-types';\nimport Alert from './Alert';\nimport GameListItem from './GameListItem';\n\nclass GameList extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            filter : ''\n        };\n    }\n    static propTypes = {\n        editGame : PropTypes.func.isRequired,\n        deleteGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired, //the object of all raw games data from App.state.games\n        parent : PropTypes.string, //the key of the parent game, for which to show child games. Undefined = top level games\n        currentIndex : PropTypes.string\n    };\n\n    static defaultProps =  {\n        parent : undefined,\n        currentIndex : undefined\n    }\n\n    componentWillMount()\n    {\n        this.data = new DataHelper(this.props.games);\n    }\n\n    gameMatchesFilter = (gameKey) => {\n\n        if(this.state.filter === '') return true;\n\n        let game = this.data.getGameByKey(gameKey);\n        let title = game.title.toLowerCase();\n        let q = this.state.filter.toLowerCase();\n\n        return title.indexOf(q) > -1;\n    }\n\n    renderGameList = () => {\n\n        if(!this.data || !this.data.hasData())\n        {\n            //console.log('te');\n            return <Alert type=\"error\" tag=\"li\">No Games</Alert>\n        }\n        else\n        {\n            this.data = new DataHelper(this.props.games);\n\n            //return null;\n\n            //console.log(this.props.currentIndex);\n            \n            //this.prop\n            let childGames = this.props.parent !== undefined ? \n                this.data.getChildGames(this.props.parent) : this.data.sortGamesBy('title','asc',this.props.games);\n\n            childGames = this.data.sortGamesBy('title','asc',childGames);\n\n            return this.data.forEach((key) => {\n        \n                return this.gameMatchesFilter(key) ? <GameListItem \n                    deleteGame={this.props.deleteGame} \n                    editGame={this.props.editGame}\n                    copyGame={this.props.copyGame} \n                    key={key} \n                    index={key} \n                    games={childGames} \n                    game={this.data.getGameByKey(key)}\n                    highlight={this.props.currentIndex === key}\n                    canEditGame={this.props.canEditGame}\n                    canEditRule={this.props.canEditRule}\n                    canDeleteGame={this.props.canDeleteGame}\n                    userLoggedIn={this.props.userLoggedIn}\n                canDeleteRule={this.props.canEditRule} /> : null;\n            },childGames);\n                \n        }\n    }\n\n    handleFilterKeyUp = (e) => {\n\n        let q = e.currentTarget.value;\n\n        if(e.which === 27)\n        {\n            q = e.currentTarget.value = '';\n        }\n\n        this.setState({filter : q});\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        let childGames = this.props.parent !== undefined ? \n            this.data.getChildGames(this.props.parent) : this.data.sortGamesBy('title','asc',this.props.games);\n        \n            let childGamesCount = Object.keys(childGames).length;\n            \n        //console.log(childGamesCount);\n        \n\n        return (\n            <div className=\"GameList\">\n                {childGamesCount > 0 ? <input className=\"GameList__filter-field\" placeholder=\"Find a Game\" onKeyUp={this.handleFilterKeyUp} /> : null}\n                <ul className=\"GameList__items\">\n                    {this.renderGameList()}\n                </ul>\n            </div>);\n    }\n}\n\nexport default GameList;","export const GENERAL_RULES_KEY = 'game0';\n\nexport const RAYMOND_UID = 'uGqTXpxQHzg4K7DRhObVWvValvF3';","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DataHelper from '../DataHelper';\nimport { GENERAL_RULES_KEY } from '../constants';\n\nclass GameAutoComplete extends React.Component\n{\n    constructor(props){\n\n        super(props);\n\n        this.state = {\n            suggestions : [],\n            selectedGames : [],\n            currentSelection : 0,\n            currentSuggestion : 0\n        }\n    }\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        selectedGames : PropTypes.array.isRequired,\n        excludedGames : PropTypes.array,\n        defaultValue : PropTypes.array, //an array of games to autofill into the field\n        onGameSelect : PropTypes.func.isRequired,\n        placeholder : PropTypes.string,\n        includeGeneralRules : PropTypes.bool\n    };\n\n    static defaultProps = {\n       placeholder : 'Game Title',\n       excludedGames : [],\n       includeGeneralRules : false\n    }\n\n    titleField = React.createRef();\n\n    data = new DataHelper(this.props.games);\n\n    onTitleFieldKeyPress = (e) => {\n\n        if(this.state && this.state.suggestions && !this.allSuggestionsSelected())\n        {\n            switch(e.which)\n            {\n                case 40: //down / next\n                    this.nextSuggestion();\n                    break;\n                case 38: //up /previous\n                    this.previousSuggestion();\n                    break;\n                case 27: //esc / clear\n                    this.clearSuggestions();\n                    break;\n                case 13:\n                    \n                    let game = this.state.suggestions[this.state.currentSuggestion];\n\n\n                    if(game && game.gameKey)\n                    {\n                        this.chooseGame(game);\n                    }    \n\n                    e.preventDefault();\n                    break;\n                default :\n                    console.log(e.which);\n            }\n        }\n\n        this.renderAutoComplete(e.target.value);\n        \n    }\n\n    isSelected = (game) => {\n\n        let success = false;\n\n        for(let g in this.props.selectedGames)\n        {\n            if(this.props.selectedGames[g].gameKey === game.gameKey)\n            {\n                success = true;\n                break;\n            }\n        }\n\n        return success;\n    }\n\n    clearSuggestions = () => {\n        \n        this.titleField.current.value = '';\n        this.renderAutoComplete('');\n\n        this.setState({\n            currentSuggestion : 0\n        });\n    }\n\n    renderAutoComplete = (q) => {\n\n        let suggestions = [];\n\n        q = q.toLowerCase();\n\n        if(q !== '')\n        {\n            this.data.forEach((key) => {\n\n                let game = this.props.games[key];\n                let shouldInclude = true;\n\n                if(game.title.toLowerCase().indexOf(q) > -1)\n                {\n                    if(game.gameKey === GENERAL_RULES_KEY)\n                    {\n                        shouldInclude = this.props.includeGeneralRules;\n                    }\n\n                    shouldInclude = !this.props.excludedGames.includes(game.gameKey);\n                    \n                    if(shouldInclude)\n                    {\n                        game.gameKey = key;\n\n                        suggestions.push(game);\n                    }\n                    \n                }\n    \n            },this.props.games);\n        }\n        \n\n        this.setState({suggestions});\n    }\n    \n    chooseGame = (game) => {\n\n        this.titleField.current.value = game.title;\n\n        this.props.onGameSelect(game);\n\n        this.clearTitleField();\n\n        this.titleField.current.focus();\n    }\n\n    clearTitleField = () => {\n        this.titleField.current.value = '';\n        this.setState({suggestions : []});\n    }\n\n    setCurrentSuggestion = (i) => {\n        this.setState({currentSuggestion : i});\n    }\n\n    previousSuggestion = () => {\n\n        let previousSuggestion = this.findPreviousSuggestion(this.state.currentSuggestion || this.state.suggestions.length || 0);\n\n        this.setCurrentSuggestion(previousSuggestion);\n    }\n\n    findPreviousSuggestion = (current) => {\n\n        let prevIndex = current === 0 ? this.state.suggestions.length - 1 : current - 1;\n\n        console.log(current,prevIndex);\n\n        return this.isSelected(this.state.suggestions[prevIndex]) ? this.findPreviousSuggestion(prevIndex) : prevIndex;\n    }\n\n    nextSuggestion = () => {\n\n        let nextSuggestion = this.findNextSuggestion(this.state.currentSuggestion || 0);\n\n        this.setCurrentSuggestion(nextSuggestion);\n    }\n\n    findNextSuggestion = (current) => {\n\n        let nextIndex = current === this.state.suggestions.length - 1 ? 0 : current + 1;\n\n        return this.isSelected(this.state.suggestions[nextIndex]) ? this.findNextSuggestion(nextIndex) : nextIndex;\n    }\n\n    allSuggestionsSelected = () => {\n\n        let allSelected = this.state.suggestions.length > 0;\n\n        for(let i in this.state.suggestions)\n        {\n            let game = this.state.suggestions[i];\n\n            if(!this.isSelected(game))\n            {\n                allSelected = false;\n                break;\n            }\n        }\n        \n        return allSelected;\n    }\n\n    renderSuggestions = () => {\n\n        if(this.state && this.state.suggestions && this.state.suggestions.length > 0)\n        {\n            return (<ul className=\"GameAutoComplete__suggestions\" style={{height : `${this.state.suggestions.length * 1.55}em`}}>\n                {this.state.suggestions.map((game,i) => {\n\n                    let shouldInclude = true;\n\n                    let classes = ['GameAutoComplete__suggestion'];\n\n                    if(this.isSelected(game))\n                    {\n                        classes.push('GameAutoComplete__suggestion--selected');    \n                    }\n                    \n                    if(i === this.state.currentSuggestion || (!this.state.currentSuggestion && i === 0))\n                    {\n                        classes.push('GameAutoComplete__suggestion--current')\n                    }\n\n                    return (shouldInclude ? <li className={classes.join(' ')} \n                                                key={`gac_${game.gameKey}`} \n                                                onClick={(e) => {this.chooseGame(game);}}\n                                                onMouseEnter={(e) => {\n                                                    if(!this.isSelected(game))\n                                                    {\n                                                        this.setCurrentSuggestion(i,game);\n                                                    }\n                                                    }}>\n                        {game.title}\n                    </li> : null);\n                })}\n            </ul>);\n        }\n    }\n\n    render()\n    {\n        //console.log(this.props.selectedGames);\n        return (<div className=\"GameAutoComplete\">\n                    <input type=\"text\" ref={this.titleField} placeholder={this.props.placeholder} onKeyUp={this.onTitleFieldKeyPress} />\n                    {this.renderSuggestions()}\n                </div>);\n    }\n}\n\nexport default GameAutoComplete;","import React, { useState } from \"react\";\r\n\r\nconst EyeButton = ({onClick,open = true}) => {\r\n\r\n    //initOpen = initOpen === undefined ? true : initOpen;\r\n\r\n    const [isOpen,setOpen] = useState(open);\r\n\r\n    const handleClick = e => {\r\n\r\n        setOpen(!isOpen);\r\n\r\n        onClick(!isOpen);\r\n    }\r\n\r\n    return (<button className=\"EyeButton\" onClick={handleClick}>\r\n        <i class={`fa fa-${isOpen ? 'eye' : 'eye-slash'}`}></i>\r\n    </button>);\r\n}\r\n\r\nexport default EyeButton;","const lsKey = 'drinking-games';\r\n\r\nlet lsGames = localStorage.getItem(lsKey);\r\n\r\nconst setGames = (games = lsGames) => {\r\n    localStorage.setItem(lsKey,JSON.stringify(games));\r\n}\r\n\r\nif(lsGames === null || lsGames === '')\r\n{\r\n    localStorage.setItem(lsKey,'{}');\r\n    lsGames = {};\r\n}\r\nelse\r\n{\r\n    lsGames = JSON.parse(lsGames);\r\n}\r\n\r\n\r\nexport const showParent = (child,parent) => {\r\n\r\n    let games = getHiddenGames(child);\r\n\r\n    if(games.includes(parent))\r\n    {\r\n        games.splice(games.indexOf(parent),1);\r\n\r\n        console.log(child,parent,games,games.indexOf(parent));\r\n\r\n        lsGames[child] = games;\r\n        setGames();\r\n    }\r\n}\r\n\r\nexport const hideParent = (child,parent) => {\r\n\r\n    let games = getHiddenGames(child);\r\n\r\n    if(!games.includes(parent))\r\n    {\r\n        games.push(parent);\r\n        lsGames[child] = games;\r\n        setGames();\r\n    }\r\n}   \r\n\r\nexport const getHiddenGames = (child) => {\r\n\r\n    if(lsGames[child] === undefined)\r\n    {\r\n        lsGames[child] = [];\r\n        setGames();\r\n        return [];\r\n    }\r\n    else\r\n    {\r\n        return lsGames[child];\r\n    }\r\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router-dom';\nimport EyeButton from './EyeButton';\nimport {getHiddenGames} from '../localStorageManager';\n\nclass GamePill extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n        this.state = {\n            visible : \n            !getHiddenGames(this.props.childKey).includes(this.props.game.gameKey)\n        };\n    }\n\n    static propTypes = {\n        game : PropTypes.object.isRequired,\n        parentKey : PropTypes.string.isRequired,\n        childKey : PropTypes.string.isRequired,\n        tag : PropTypes.string,\n        onClick : PropTypes.func,\n        onClose : PropTypes.func,\n        showCloseBtn : PropTypes.bool,\n        showVisibilityBtn : PropTypes.bool,\n        linkGame : PropTypes.bool,\n        onVisibilityToggle : PropTypes.func\n    };\n\n    static defaultProps = {\n        tag : 'li',\n        showCloseBtn : true,\n        linkGame : false,\n        showVisibilityBtn : true\n    }\n\n    onClose = (e) => {\n\n        this.props.onClose(e,this.props.game);\n    }\n\n    toggleGameVisibility = (show) => {\n        \n        const parentKey = this.props.game.gameKey;\n        const childKey = this.props.childKey;\n\n        this.props.onVisibilityToggle(show,parentKey,childKey);\n\n        this.setState({\n            visible : show\n        })\n    }\n\n    render()\n    {\n        const Tag = `${this.props.tag}`;\n\n        return (\n            <Tag className={`GamePill GamePill--${this.props.game.gameKey} ${this.state.visible ? ' GamePill--visible' : ''}`}>\n                {this.props.showVisibilityBtn ? \n                    <EyeButton \n                        onClick={this.toggleGameVisibility} \n                        open={this.state.visible} />\n                : null}\n                {this.props.linkGame ? <Link to={`/game/${this.props.game.gameKey}`}>{this.props.game.title}</Link> : this.props.game.title}\n                {this.props.showCloseBtn ? <button className=\"GamePill__close-btn\" onClick={this.onClose}>&times;</button> : null}\n            </Tag>);\n    }\n}\n\nexport default GamePill;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GameAutoComplete from './GameAutoComplete';\nimport GamePill from './GamePill';\nimport { GENERAL_RULES_KEY } from '../constants';\nimport DataHelper from '../DataHelper';\n\nclass GameMultiSelect extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            selectedGames : this.props.selectedGames,\n            includeToplevel : true\n        }\n    }\n\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        includeToplevel : PropTypes.bool,\n        defaultValue : PropTypes.array,\n        placeholder : PropTypes.string,\n        onError : PropTypes.func.isRequired,\n        selectedGames : PropTypes.array,\n        excludedGames : PropTypes.array\n    };\n\n    static defaultProps = {\n        selectedGames : [],\n        excludedGames : [],\n        defaultValue : []\n    }\n\n    /*\n        check the array of selected games for any collisions or unecessary data\n        -no need to add a game's parent\n    */\n    sanitizeGames = (games) => {\n\n        if(!this.gameSelected(GENERAL_RULES_KEY))\n        {\n            let data = new DataHelper(this.props.games);\n            let gen = data.getGameByKey(GENERAL_RULES_KEY);\n                gen.gameKey = GENERAL_RULES_KEY;\n                games.push(gen);\n        }\n\n        return games;\n    }\n\n    clearGames = () => {\n        this.setState({selectedGames : []});\n    }\n\n    newGameSelect = (game) => {\n        \n        if(!this.gameSelected(game))\n        {\n            let games = this.state.selectedGames;\n                games.push(game);\n            \n            this.setState({\n                selectedGames : games\n            });\n        }\n    }\n\n    gameSelected = (game) => {\n\n        let selected = false;\n        let gameKey = typeof game === 'object' ? game.gameKey : game;\n\n        this.state.selectedGames.forEach((selectedGame,i) => {\n\n            if(gameKey === selectedGame.gameKey)\n            {\n                selected = true;\n                return;\n            }\n        });\n\n        return selected;\n    }\n\n    onGameRemoved = (e,gameToRemove) => {\n\n        let games = this.state.selectedGames;\n            games = games.filter((game) => {\n                return gameToRemove.gameKey !== game.gameKey;\n            });\n        \n            this.setState({selectedGames : games});\n    }\n\n    renderGames =() => {\n        \n        return this.state.selectedGames.map((game) => {\n            \n\n            return (<GamePill \n                        key={`gms_${game.gameKey}`} \n                        game={game}\n                        onClose={this.onGameRemoved} />);\n        });\n    }\n\n    render()\n    {\n\n        return (\n            <ul className=\"GameMultiSelect\">\n                {this.renderGames()}\n                <li className=\"GameMultiSelect__add-game\">\n                    <GameAutoComplete \n                        games={this.props.games}\n                        selectedGames={this.state.selectedGames} \n                        onGameSelect={this.newGameSelect} \n                        placeholder={this.props.placeholder}\n                        excludedGames={this.props.excludedGames} />\n                </li>\n            </ul>);\n    }\n}\n\nexport default GameMultiSelect;","import React from 'react';\nimport PropTypes from 'prop-types'\nimport GameMultiSelect from './GameMultiSelect';\n//import DataHelper from '../DataHelper';\n\n//import {GENERAL_RULES_KEY} from '../constants';\n\nclass AddGameForm extends React.Component\n{\n    static propTypes = {\n        games : PropTypes.object.isRequired,\n        addGame : PropTypes.func.isRequired,\n        parent : PropTypes.array,\n        listenForShortcuts : PropTypes.bool\n    };\n\n    static defaultProps =  {\n        parent : [],\n        listenForShortcuts : false\n    };\n\n    titleField = React.createRef();\n    gameSelect = React.createRef();\n\n    resetForm = () => {\n        this.clearForm();\n        this.titleField.current.focus();\n    }\n\n    clearForm = () => {\n        this.titleField.current.value = '';\n        this.gameSelect.current.clearGames();\n    }\n\n    onKeyUp = (e) => {\n\n        //console.log('key up');\n        \n        if(this.props.listenForShortcuts && e.which === 13) // Enter\n        {\n            this.onAddGameClick();\n            e.preventDefault();\n        }\n    }\n\n    onAddGameClick = (e) => {\n\n       //console.log(this.gameSelect.current.innerSelect.current.value);\n\n        let title = this.titleField.current.value;\n        let parents = this.gameSelect.current.state.selectedGames;//.value;\n\n        // if(title === '' || !parent || parent === '')\n        // {\n        //     //if the parent or title arent filled,  don't do anything. The alerts below were firing twice\n        //     //when hitting enter on the Add Game button so this return prevents the alert when a game is successfully being added\n\n        //     return; //todo: figure out WHY keyup fires on the button too\n            \n        //     // if(title === '')\n        //     // {\n        //     //     alert('Please enter a game title');\n        //     // }\n        //     // else if(!parent || parent === '')\n        //     // {\n        //     //     alert('Please choose a parent from the drop down.');\n        //     // }\n            \n        //     // return;\n        // }\n        \n        this.props.addGame(title,parents);\n        this.resetForm();\n    }\n\n    //handle all error or info events from multiselect\n    onMultiSelectError = (e) => {\n        console.log(e);\n    }\n\n    render()\n    {\n        //console.log(this.props.parent);\n        //let data = new DataHelper(this.props.games);\n\n        return (\n            <div className=\"AddGameForm\">\n                {/* <label>Parent Game</label>  */}<GameMultiSelect\n                    games={this.props.games}\n                    includeToplevel={true}\n                    selectedGames={this.props.parent}\n                    ref={this.gameSelect}\n                    placeholder=\"Add a Parent Game\"\n                    onError={this.onMultiSelectError}\n                />\n                <input type=\"text\" placeholder=\"Game Title\" ref={this.titleField} onKeyUp={this.onKeyUp} />\n                <button type=\"text\" onClick={this.onAddGameClick}>Add Game</button>\n            </div>);\n    }\n}\n\nexport default AddGameForm;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass ComboCounter extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            //count : 0,\n            animating : false,\n            open : false\n        }\n    }\n    static propTypes = {\n        setSessionCombo : PropTypes.func.isRequired,\n        count : PropTypes.number\n    };\n    \n    static defaultProps = {\n        count : 0\n    };\n\n    \n\n    maxCombo = 10;\n\n    animateSpeed = 180;\n\n    componentWillMount()\n    {\n        window.addEventListener('keyup', this.onGlobalKeyPress);\n    }\n\n    onGlobalKeyPress = (e) => {\n\n        let targetTag = e.target.tagName.toLowerCase();\n\n        if(targetTag === 'input' || \n            targetTag === 'textarea' || \n            targetTag === 'select') return;\n\n        switch(e.which)\n        {\n            case 107 : //plus\n                this.addDrink();\n                break;\n            case 109 : //minus\n                this.removeDrink();\n                break;\n            case 106 : //multiply / asterisk (to clear)\n                this.clearDrinks();\n                break;\n\n            default : break;\n        }\n    }\n\n    addDrink = () => {\n\n        if(this.props.count < this.maxCombo)\n        {\n            let count = this.props.count + 1;\n\n            this.props.setSessionCombo(count);\n            \n        }\n    }\n\n    removeDrink = () =>\n    {\n        if(this.props.count > 0)\n        {\n            this.props.setSessionCombo(this.props.count - 1);\n        }\n    }\n\n    clearDrinks = () => {\n\n        this.props.setSessionCombo(0);\n        \n    }\n\n    handleRemoveDrinkClick = (e) => {\n\n        if(this.props.count > 0)\n        {\n            this.removeDrink();    \n            this.animateCount();\n        }\n    }\n\n    handleClearDrinksClick = (e) => {\n\n        this.clearDrinks();\n    }\n\n    animateCount = () => {\n        \n        this.setState({\n            animating : true\n        });\n\n        setTimeout(() => {\n            this.setState({\n                animating : false\n            });\n    \n        }, this.animateSpeed);\n    }\n\n    handleAddDrinkClick = (e) => {\n\n        if(this.props.count < this.maxCombo)\n        {\n            this.addDrink();\n    \n            this.animateCount();\n        }\n        \n    }\n\n    calcShotHeight = () => {\n        \n        if(this.props.count === 0) return 0;\n\n        return ((this.props.count / this.maxCombo) * 100) + '%';\n    }\n\n    handleToggleClick = (e) => {\n\n        this.setState({\n            open : !this.state.open\n        })\n    }\n\n\n    render()\n    {\n        //console.log(this.state);\n\n        return (\n            <aside className={`ComboCounter${this.state.animating ? ' ComboCounter--animating' : ' ComboCounter--animated'}${this.props.count === this.maxCombo ? ' ComboCounter--full' : ''}${this.props.count === 0 ? ' ComboCounter--empty' : ''}${this.state.open ? ' ComboCounter--open' : ' ComboCounter--closed'}`}>\n                \n                <button className=\"ComboCounter__toggle-btn ComboCounter__toggle-btn--open\" onClick={this.handleToggleClick}>\n                    <i className=\"fa fa-chevron-left\"></i>\n                </button>\n                \n                <div className=\"ComboCounter__count\">\n                    {this.props.count}\n                </div>\n\n                <div className=\"ComboCounter__glass-wrap\">\n\n                    <div className=\"ComboCounter__shot-glass\">\n                        <div className=\"ComboCounter__shot-volume\" style={{height : this.calcShotHeight()}}></div>\n                    </div>\n\n                    <div className=\"ComboCounter__button-shell\">\n                        <button className=\"ComboCounter__remove-drink-btn\" onClick={this.handleRemoveDrinkClick}>-</button>\n                        <button className=\"ComboCounter__clear-drinks-btn\" onClick={this.handleClearDrinksClick}>&times;</button>\n                    </div>\n                </div>\n                \n                <button className=\"ComboCounter__add-drink-btn\" onClick={this.handleAddDrinkClick}>+</button>\n\n                <button className=\"ComboCounter__toggle-btn ComboCounter__toggle-btn--close\" onClick={this.handleToggleClick}>\n                    <i className=\"fa fa-chevron-right\"></i>\n                </button>\n\n            </aside>);\n    }\n}\n\nexport default ComboCounter;","import React from \"react\";\nimport DataHelper from \"../DataHelper\";\nimport PropTypes from \"prop-types\";\nimport NotFound from \"./NotFound\";\nimport RulesList from \"./RulesList\";\nimport AddRulesForm from \"./AddRulesForm\";\nimport GameList from \"./GameList\";\nimport AddGameForm from \"./AddGameForm\";\n//import {changePageTitle} from '../helpers';\n//import GameSelect from './GameSelect';\nimport EditButton from \"./EditButton\";\n//import GameListItem from './GameListItem';\nimport DeleteButton from \"./DeleteButton\";\nimport { Link } from \"react-router-dom\";\nimport ComboCounter from \"./ComboCounter\";\n//import {GENERAL_RULES_KEY} from '../constants';\nimport GamePill from \"./GamePill\";\nimport GameMultiSelect from \"./GameMultiSelect\";\nimport { Helmet } from \"react-helmet\";\nimport { showParent, hideParent, getHiddenGames } from \"../localStorageManager\";\n\nclass Game extends React.Component {\n  state = {\n    game: undefined,\n    editing: false,\n    hiddenGames: getHiddenGames(this.props.index),\n  };\n\n  static propTypes = {\n    index: PropTypes.string.isRequired,\n    games: PropTypes.object,\n    editRule: PropTypes.func.isRequired,\n    deleteRule: PropTypes.func.isRequired,\n    editGame: PropTypes.func.isRequired,\n    deleteGame: PropTypes.func.isRequired,\n    canEditGame: PropTypes.func.isRequired,\n    canDeleteGame: PropTypes.func.isRequired,\n    getUser: PropTypes.func.isRequired,\n  };\n\n  titleInput = React.createRef();\n  editButton = React.createRef();\n  shell = React.createRef();\n  parentsMS = React.createRef();\n\n  gameScrollPostBeforeUpdate = 0;\n\n  onParentChange = (e) => {\n    let newParent = e.currentTarget.value;\n\n    let thisGameKey = this.props.index;\n\n    let game = { ...this.data.getGameByKey(thisGameKey) };\n\n    game.parent_game = newParent;\n\n    console.log(game);\n\n    this.props.editGame(thisGameKey, game);\n  };\n\n  handleTitleEditClick = (e) => {\n    if (this.state.editing) {\n      let game = this.data.getGameByKey(this.props.index);\n      let newTitle = this.titleInput.current.value; //.replace(/(^[ ]+|[ ]+$)/,'');\n\n      if (newTitle === \"\") {\n        this.titleInput.current.value = game.title;\n      } //if(this.titleInput.current.value !== game.title)\n      else {\n        this.data = new DataHelper(this.props.games);\n\n        game.title = this.titleInput.current.value;\n\n        game.parent_game = this.data.gamesToKeys(\n          this.parentsMS.current.state.selectedGames\n        );\n\n        this.props.editGame(this.props.index, game);\n      }\n    } else {\n      this.titleInput.current.focus();\n    }\n\n    this.setState({ editing: !this.state.editing });\n  };\n\n  onDeleteClick = (e) => {\n    this.data = new DataHelper(this.props.games);\n\n    let game = this.data.getGameByKey(this.props.index);\n\n    if (this.state.editing) {\n      this.setState({ editing: false });\n    } else if (\n      window.confirm(`Are you sure you want to delete \"${game.title}\"?`)\n    ) {\n      this.props.deleteGame(this.props.index);\n    }\n  };\n\n  handleParentPillVisibility = (show, parent, child) => {\n    if (show) {\n      showParent(child, parent);\n    } else {\n      hideParent(child, parent);\n    }\n\n    const childHiddenGames = getHiddenGames(child);\n\n    this.setState({\n      hiddenGames: childHiddenGames,\n    });\n  };\n\n  renderParentPills = () => {\n    let game = this.data.getGameByKey(this.props.index);\n    let parents = this.data.getParentGames(game);\n\n    if (this.state.editing) {\n      return (\n        <div className=\"Game__parents\">\n          <GameMultiSelect\n            ref={this.parentsMS}\n            selectedGames={parents}\n            excludedGames={[this.props.index]}\n            games={this.props.games}\n          />\n        </div>\n      );\n    } else {\n      return parents && parents.length > 0 ? (\n        <ul className=\"Game__parents\">\n          {parents.map((parent) => {\n            return (\n              <GamePill\n                linkGame={true}\n                key={`pill_${parent.gameKey}`}\n                game={parent}\n                childKey={this.props.index}\n                showCloseBtn={false}\n                onVisibilityToggle={this.handleParentPillVisibility}\n              />\n            );\n          })}\n        </ul>\n      ) : null;\n    }\n  };\n\n  renderBreadCrumbs = () => {\n    let ancestors = this.data.getAncestors(this.props.index);\n\n    let html = [];\n\n    ancestors.forEach((ancestor, i) => {\n      html.push(\n        <Link to={`/game/${ancestor.key}`}>{ancestor.game.title}</Link>\n      );\n\n      if (i < ancestors.length - 1) {\n        html.push(<span class=\"Game__parent-delimiter\">&gt;</span>);\n      }\n    });\n\n    return html;\n  };\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    this.gameScrollPostBeforeUpdate = this.shell.current\n      ? this.shell.current.scrollTop\n      : 0;\n    this.currentGameKey = this.props.index;\n\n    return null;\n  }\n\n  componentDidUpdate(prevProps) {\n    setTimeout(() => {\n      if (this.shell.current)\n        this.shell.current.scrollTo(0, this.gameScrollPostBeforeUpdate);\n    }, 1);\n\n    if (this.state.editing) {\n      this.titleInput.current.focus();\n    }\n\n    if (this.shell.current) this.shell.current.scrollTo(0, 0);\n  }\n\n  render() {\n    this.data = new DataHelper(this.props.games);\n\n    let game = this.data.getGameByKey(this.props.index);\n\n    //let parentGame = game.parent_game ? this.data.getGameByKey(game.parent_game) : null;\n\n    if (!game) return NotFound;\n\n    //changePageTitle(game.title + ' | Drinking Games');\n\n    return (\n      <div\n        className={`Game ${this.state.editing ? \" Game--editing\" : \"\"}`}\n        ref={this.shell}\n      >\n        <Helmet>\n          <title>{game.title + \" | Drinking Games\"}</title>\n        </Helmet>\n        <ComboCounter\n          setSessionCombo={this.props.setSessionCombo}\n          count={this.props.currentComboCount}\n        />\n\n        {this.renderParentPills()}\n\n        <h1\n          className=\"Game__title\"\n          onDoubleClick={(e) => {\n            this.handleTitleEditClick();\n          }}\n        >\n          <input\n            name={this.props.index + Date.now()}\n            key={this.props.index + Date.now()}\n            type=\"text\"\n            style={{ width: `${game.title.length}ch` }}\n            defaultValue={game.title}\n            ref={this.titleInput}\n            disabled={!this.state.editing}\n            className=\"Game__title-value editable\"\n            onKeyUp={(e) => {\n              switch (e.which) {\n                case 13:\n                  this.handleTitleEditClick();\n                  break;\n                case 27:\n                  this.setState({ editing: false });\n                  break;\n                default:\n                  break;\n              }\n            }}\n          />\n          {this.props.canEditGame(this.props.index) ? (\n            <div className=\"Game__parent-change-select\">\n              <EditButton\n                handler={this.handleTitleEditClick}\n                ref={this.editButton}\n              />\n              {this.props.canDeleteGame(this.props.index) ? (\n                <DeleteButton handler={this.onDeleteClick} />\n              ) : null}\n            </div>\n          ) : null}\n        </h1>\n\n        <a\n          href={`/game/${this.props.index}/card`}\n          className=\"Game__card-link\"\n          target={`${window.innerWidth <= 820 ? \"_self\" : \"_blank\"}`}\n        >\n          Play {game.title} BINGO\n        </a>\n\n        <section className=\"Game__rules\">\n          <h2>Rules</h2>\n\n          <RulesList\n            games={this.props.games}\n            hiddenGames={this.state.hiddenGames}\n            index={this.props.index}\n            recursive={true}\n            deleteRule={this.props.deleteRule}\n            editRule={this.props.editRule}\n            canEditRule={this.props.canEditRule}\n            canDeleteRule={this.props.canEditRule}\n            getUser={this.props.getUser}\n          />\n        </section>\n\n        {this.props.userLoggedIn() ? (\n          <section className=\"Game__add-rules\">\n            <h3>Add Rule</h3>\n\n            <AddRulesForm\n              games={this.props.games}\n              gameIndex={this.props.index}\n              addRule={this.props.addRule}\n            />\n          </section>\n        ) : null}\n\n        <section className=\"Game__child-games\">\n          <h2>Sub Games</h2>\n\n          <GameList\n            parent={this.props.index}\n            editGame={this.props.editGame}\n            games={this.props.games}\n            deleteGame={this.props.deleteGame}\n            copyGame={this.props.copyGame}\n            canEditGame={this.props.canEditGame}\n            canEditRule={this.props.canEditRule}\n            canDeleteGame={this.props.canDeleteGame}\n            canDeleteRule={this.props.canEditRule}\n            userLoggedIn={this.props.userLoggedIn}\n          />\n\n          <h3>Add A Sub Game</h3>\n\n          {this.props.userLoggedIn() ? (\n            <AddGameForm\n              games={this.props.games}\n              parent={[this.data.getGameByKey(this.props.index)]}\n              addGame={this.props.addGame}\n            />\n          ) : null}\n        </section>\n      </div>\n    );\n  }\n}\n\nexport default Game;\n","import React from 'react';\nimport DataHelper from '../DataHelper';\nimport GameList from './GameList';\nimport AddGameForm from './AddGameForm';\nimport PropTypes from 'prop-types';\n\nclass Games extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            visible : true\n        };\n\n        setTimeout(() => {\n            this.setState({visible : false});\n        }, 1500);\n    }\n    static propTypes = {\n        editGame : PropTypes.func.isRequired,\n        games : PropTypes.object.isRequired,\n        addGame : PropTypes.func.isRequired,\n        userLoggedIn : PropTypes.func.isRequired,\n        currentIndex : PropTypes.string\n    }\n\n    static defaultProps =  {\n        parent : 'game0',\n        currentIndex : undefined\n    };\n\n    data = null;\n\n    onToggleClick = (e) => {\n        this.setState({\n            visible : !this.state.visible\n        });\n    }\n\n    render()\n    {\n        this.data = new DataHelper(this.props.games);\n\n        let games = this.props.games;//this.data.sortGamesBy('title','asc');\n        \n        //console.log(this.props.canDeleteGame);\n        \n        return (\n            <div className={`Games ${this.state.visible ? 'Games--visible' : ''}`}>\n                <button \n                    type=\"button\" \n                    className=\"Games__toggle-btn\"\n                    onClick={this.onToggleClick}\n                >\n                    {this.state.visible ? <i className=\"fa fa-chevron-left\"></i> : <i class=\"fa fa-bars\"></i>}\n                </button>\n\n                <h1 className=\"Games__site-title\">\n                    <span className=\"Games__tite-title-label\">Drinking Games</span>\n                    {this.props.renderAuthButton()}\n                    \n                </h1>\n\n                <GameList \n                    games={games} \n                    deleteGame={this.props.deleteGame} \n                    editGame={this.props.editGame}\n                    canEditGame={this.props.canEditGame}\n                    canEditRules={this.props.canEditRules}\n                    canDeleteGame={this.props.canDeleteGame}\n                    canDeleteRules={this.props.canEditRules}\n                    copyGame={this.props.copyGame}\n                    currentIndex={this.props.currentIndex}\n                    userLoggedIn={this.props.userLoggedIn}\n                     />\n\n                {this.props.userLoggedIn() ? \n                    <section className=\"Games__add-a-game\">\n                        <h2>Add a Game</h2>\n                        <AddGameForm\n                                games={this.props.games}\n                                listenForShortcuts={true}\n                                addGame={this.props.addGame} />\n                    </section> \n                : null}\n            </div>);\n    }\n}\n\nexport default Games;","import React from 'react';\nimport PropTypes from 'prop-types'\n\nclass SessionManager extends React.Component\n{\n    static propTypes = {\n        currentSession : PropTypes.object,\n        leaveSession : PropTypes.func.isRequired,\n        createSession : PropTypes.func.isRequired,\n        joinSession : PropTypes.func.isRequired\n    };\n    //static defaultTypes = {}\n\n    state = {\n        currentSession : this.props.currentSession\n    }\n\n    keyField = React.createRef();\n\n    handleCreateSession = (e) => {\n        \n        this.props.createSession();\n\n    }\n\n    leaveSession = () => {\n        this.setState({currentSession : undefined});\n        this.props.leaveSession();\n    }\n\n    handleJoinSession = (e) => {\n\n        let key = this.keyField.current.value;\n        this.props.joinSession(key);\n    }\n\n    renderSessionButtons = () => {\n\n        if(this.props.currentSession === undefined)\n        {\n            return (<div className=\"SessionManager__buttons\">\n                        <button className=\"SessionManager__create-session\" onClick={this.handleCreateSession}>Create Session</button>\n                        <input type=\"text\" className=\"SessionManager__key-field\" ref={this.keyField} placeholder=\"Session Code\" />\n                        <button className=\"SessionManager__join-session\" onClick={this.handleJoinSession}>Join Session</button>\n                    </div>);\n        }\n        else\n        {\n            return <div className=\"SessionManager__current-session\">\n                <a title=\"Copy this link address and send to people you want to join the session\" href={`/join/${this.props.currentSession}`} className=\"SeassionManager__session-key\">{this.props.currentSession}</a>\n                <button className=\"SessionManager__leave-session-btn\" onClick={this.leaveSession}>Leave Session</button>\n            </div>;\n        }\n    }\n\n    render()\n    {\n        return (\n            <div className=\"SessionManager\">\n                {this.renderSessionButtons()}\n            </div>);\n    }\n}\n\nexport default SessionManager;","import React from 'react';\n//import PropTypes from 'prop-types'\n\nclass ShortcutsModal extends React.Component\n{\n    //static propTypes = {};\n    \n    //static defaultTypes = {}\n\n    state = {\n        open : false\n    }\n\n    shortcuts = [\n        {\n            combo : '+ (plus)',\n            desc : 'Adds a drink to the Combo Counter'\n        },\n        {\n            combo : '- (minus)',\n            desc : 'Removes a drink from the Combo Counter'\n        },\n        {\n            combo : '* (asterisk)',\n            desc : 'Resets the Combo Count to 0'\n        },\n        {\n            combo : 'cmd / ctrl + shift + F',\n            desc : 'Focuses the rule filter field in a Game to filter the rules'\n        },\n        {\n            combo : 'option / alt + R',\n            desc : 'Focus Add a Rule form'\n        }\n\n    ]\n\n    show = () => {\n        //this.dialog.current.showModal();\n        this.setState({open : true});\n    }\n\n    close = () => {\n        this.setState({open : false});\n    }\n\n    renderShortcuts = () => {\n\n        return this.shortcuts.map((shortcut,i) => {\n            return (<li key={`shortcut_${i}`} className=\"ShortcutsModal__shortcut\">\n                <div className=\"ShortcutsModal__shortcut-keys\">\n                    {shortcut.combo}\n                </div>\n                <div className=\"ShortcutsModal__shortcut-description\">\n                    {shortcut.desc}\n                </div>\n            </li>);\n        });\n    }\n\n    componentWillMount()\n    {\n\n        window.addEventListener('keyup',(e) => {\n\n            if(e.which === 27)\n            {\n                this.close();\n            }\n        })\n    }\n\n    render()\n    {\n        return (\n            <div className={`ShortcutsModal${this.state.open ? ' ShortcutsModal--open' : ''}`}>\n                <div className=\"ShortcutsModal__dialog\">\n                    <header className=\"ShortcutsModal__dialog-header\">\n                        <h2 className=\"ShortcutsModal__title\">Keyboard Shortcuts</h2>\n                        <button className=\"ShortcutsModal__close-btn\" onClick={this.close}>&times;</button>\n                    </header>\n                    <div className=\"ShortcutsModal__body\">\n                        <ul className=\"ShortcutsModal__shortcuts\">\n                            {this.renderShortcuts()}\n                        </ul>\n                    </div>\n                </div>\n            </div>);\n    }\n}\n\nexport default ShortcutsModal;","export function formatPrice(cents) {\n  return (cents / 100).toLocaleString(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n  });\n}\n\nexport function randoIndex(arr) {\n  return Math.floor(Math.random() * arr.length);\n}\n\nexport function rando(arr) {\n  return arr[randoIndex(arr)];\n}\n\nexport function slugify(text) {\n  return text\n    .toString()\n    .toLowerCase()\n    .replace(/\\s+/g, \"-\")\n    .replace(/[^\\w-]+/g, \"\")\n    .replace(/--+/g, \"-\")\n    .replace(/^-+/, \"\")\n    .replace(/-+$/, \"\");\n}\n\nexport function changePageTitle(title) {\n  document.querySelector(\"head title\").innerText = title;\n}\n\nexport function leastCommonMultiple(nums) {\n  const lcm = (a, b) => (a * b) / gcd(a, b);\n  const gcd = (a, b) => (a ? gcd(b % a, a) : b);\n\n  return nums.reduce(lcm);\n}\n\n/**\n * Takes an array and clones each item the given number of times\n * @param {Any[]} arr an array to fatten with clones\n * @param {Int} times the total number of times each item should appear in the result array\n * @returns {Any[]} a new array with all the clones\n */\nexport function cloneItems(arr, times) {\n  const toRet = [];\n\n  for (let index = 0; index < arr.length; index++) {\n    for (let num = 0; num < times; num++) {\n      toRet.push(arr[index]);\n    }\n  }\n\n  return toRet;\n}\n\n/**\n *\n * @param {*} pool\n * @param {*} numItems\n * @param {Function} chosenFilter a callback used to filter the pool after choosing an item\n * @param {*} chosen\n * @returns {Any[]} an array of chosen items\n */\nexport function getRandomItems(\n  pool,\n  numItems,\n  chosenFilter = (curItem, curChosen, curPool, i) => {\n    return !curChosen.includes(curItem);\n  },\n  chosen = []\n) {\n  const chosenItem = rando(pool);\n\n  chosen.push(chosenItem);\n  //console.log(pool.length);\n\n  if (chosen.length == numItems) {\n    return chosen;\n  } else {\n    const newPool = pool.filter((item, i) =>\n      chosenFilter(item, chosen, pool, i)\n    );\n\n    return getRandomItems(newPool, numItems, chosenFilter, chosen);\n  }\n}\n\nexport const setTitle = (title) => {\n  document.querySelector(\"head title\").innerText = title;\n};\n","import React from \"react\";\r\n\r\nconst GameCardFreeSquare = ({ title, subtitle, onCogClick }) => {\r\n  return (\r\n    <div className=\"GameCardFreeSquare\">\r\n      <h1>{title}</h1>\r\n      <h2>{subtitle}</h2>\r\n      <div className={`rule-box__game-title`}>(Free Square)</div>\r\n      <button className=\"GameCardFreeSquare__settings-btn\" onClick={onCogClick}>\r\n        <i className=\"fa fa-cog\"></i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameCardFreeSquare;\r\n","import React from \"react\";\r\n\r\nconst FieldSet = ({\r\n  legend = \"\", //the text to put in the legend tag\r\n  children,\r\n  className = \"\",\r\n}) => {\r\n  return (\r\n    <fieldset className={`FieldSet${className !== \"\" ? \" \" + className : \"\"}`}>\r\n      {legend === \"\" ? null : <legend>{legend}</legend>}\r\n      {children}\r\n    </fieldset>\r\n  );\r\n};\r\n\r\nexport default FieldSet;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nconst Modal = ({\r\n  children,\r\n  buttonText,\r\n  currentState = \"closed\",\r\n  className = \"\",\r\n  buttonClassName = \"\",\r\n  title,\r\n  theme = \"default\",\r\n  showButton = true,\r\n  open: openInitial,\r\n  onClose = () => {},\r\n}) => {\r\n  const [open, setOpen] = useState(openInitial);\r\n\r\n  useEffect(() => {\r\n    setOpen(openInitial);\r\n  }, [openInitial]);\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      onClose();\r\n    }\r\n  }, [open]);\r\n\r\n  const closeOnEsc = (e) => {\r\n    if (e.which === 27) {\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    //setOpen(currentState === \"open\");\r\n  }, [currentState]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", closeOnEsc);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", closeOnEsc);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className={`Modal__wrap ${className}`}>\r\n      {showButton && (\r\n        <button\r\n          className={`Modal__button ${buttonClassName}`}\r\n          onClick={(e) => {\r\n            setOpen(!open);\r\n          }}\r\n        >\r\n          {buttonText}\r\n        </button>\r\n      )}\r\n      {open ? (\r\n        <dialog className={`Modal Modal--${theme} `} open>\r\n          <div className=\"Modal__inner\">\r\n            <header className=\"Modal__header\">\r\n              <button\r\n                className=\"Modal__close\"\r\n                onClick={(e) => {\r\n                  setOpen(false);\r\n                }}\r\n              >\r\n                &times;\r\n              </button>\r\n              {title === undefined ? null : (\r\n                <h2 className=\"Modal__title\">{title}</h2>\r\n              )}\r\n            </header>\r\n            {children}\r\n          </div>\r\n        </dialog>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport round from \"lodash/round\";\r\n\r\nconst Slider = ({\r\n  title = \"\",\r\n  min = 0,\r\n  max = 10,\r\n  valuePrecision = 0, //num decimal places to round to (0 = integer)\r\n  onChange = (val) => {}, //the change handler when the handle is release, takes one param, the current calced val\r\n  startingValue, //where to start the handle. Default is the min val\r\n}) => {\r\n  const [curVal, setCurVal] = useState(startingValue || min);\r\n  const trackRef = useRef(null);\r\n  const handleRef = useRef(null);\r\n  const [handleX, setHandleX] = useState(0);\r\n\r\n  //using ref here so we can change on mouse drag without triggering re-render\r\n  const calculadedVal = useRef(startingValue || min);\r\n\r\n  const calcValue = (offset, width) => {\r\n    const val = (offset / width) * (max - min) + min;\r\n\r\n    return round(val, valuePrecision);\r\n  };\r\n\r\n  const calcHandlePos = (val) => {\r\n    return (\r\n      trackRef.current.offsetWidth * ((val - min) / (max - min)) -\r\n      handleRef.current.offsetWidth / 2\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    setHandleX(calcHandlePos(curVal));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    onChange(curVal);\r\n  }, [curVal]);\r\n\r\n  const onTrackClick = (e) => {\r\n    if (!e.path.includes(handleRef.current)) {\r\n      const val = calcValue(e.offsetX, trackRef.current.offsetWidth);\r\n      const newX = calcHandlePos(val);\r\n\r\n      //console.log(val, newX, trackRef.current.offsetWidth);\r\n      setHandleX(newX);\r\n      setCurVal(val);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    trackRef.current.addEventListener(\"mousedown\", onTrackClick);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"Slider\">\r\n      <h3 className=\"Slider__title\">{title}</h3>\r\n      <div className=\"Slider__controls\">\r\n        <span className=\"Slider__value Slider__value--min\">{min}</span>\r\n        <div className=\"Slider__track\" ref={trackRef}>\r\n          <div\r\n            className=\"Slider__handle\"\r\n            style={{\r\n              transform: `translateX(${handleX}px)`,\r\n            }}\r\n          >\r\n            <div className=\"Slider__handle-bar\" ref={handleRef}>\r\n              <i className=\"fa fa-caret-down\"></i>\r\n            </div>\r\n            <div className=\"Slider__current-value\">{curVal}</div>\r\n          </div>\r\n        </div>\r\n        <span className=\"Slider__value Slider__value--min\">{max}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Slider;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nconst GridPicker = ({ size: startingSize = [5, 5], onChange = () => {} }) => {\r\n  const [gridSize, setGridSize] = useState(startingSize);\r\n\r\n  const setGrid = (size) => {\r\n    setGridSize(size);\r\n  };\r\n\r\n  useEffect(() => {\r\n    onChange(gridSize);\r\n  }, [gridSize]);\r\n\r\n  const renderGrid = (size) => {\r\n    const squares = [];\r\n\r\n    for (let r = 0; r < 5; r++) {\r\n      for (let c = 0; c < 5; c++) {\r\n        squares.push(\r\n          <button\r\n            key={`${r}-${c}`}\r\n            className={`GridPicker__btn${\r\n              r < gridSize[0] && c < gridSize[1]\r\n                ? \" GridPicker__btn--highlight\"\r\n                : \"\"\r\n            }`}\r\n            onClick={(e) => setGrid([r + 1, c + 1])}\r\n          ></button>\r\n        );\r\n      }\r\n    }\r\n\r\n    return squares;\r\n  };\r\n\r\n  return <div className=\"GridPicker\">{renderGrid(startingSize)}</div>;\r\n};\r\n\r\nexport default GridPicker;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport DataHelper from \"../DataHelper\";\r\nimport Alert from \"./Alert\";\r\nimport FieldSet from \"./FieldSet\";\r\nimport Modal from \"./Modal\";\r\nimport Slider from \"./Slider\";\r\nimport GridPicker from \"./GridPicker\";\r\n\r\nconst GameCardSettingsModal = ({\r\n  games,\r\n  game,\r\n  open = false,\r\n  onClose = () => {},\r\n  onApply = (settings) => {},\r\n  settings: settingsIn,\r\n}) => {\r\n  const data = new DataHelper(games);\r\n  const parents = data\r\n    .getParentGames(game)\r\n    .sort((a, b) => (a.title <= b.title ? -1 : 1));\r\n  const [settings, setSettings] = useState(settingsIn);\r\n\r\n  const onModalClose = () => {\r\n    //totally not prop drilling\r\n    onClose();\r\n  };\r\n\r\n  const onApplyClick = (e) => {\r\n    onApply(settings);\r\n    onClose();\r\n  };\r\n\r\n  const findParentSettingsIndex = (key) =>\r\n    settings.parents.findIndex((p) => p.key === key);\r\n\r\n  const updateParentRatio = (key, ratio) => {\r\n    const index = findParentSettingsIndex(key);\r\n\r\n    setSettings((prevSettings) => {\r\n      const { parents: prevParents } = prevSettings;\r\n\r\n      return {\r\n        ...prevSettings,\r\n        parents: [\r\n          ...prevParents.slice(0, index),\r\n          {\r\n            key,\r\n            ratio,\r\n          },\r\n          ...prevParents.slice(index + 1),\r\n        ],\r\n      };\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"GameCardSettingsModal\">\r\n      <Modal\r\n        open={open}\r\n        title=\"Bingo Settings\"\r\n        showButton={false}\r\n        onClose={onModalClose}\r\n      >\r\n        <FieldSet legend=\"Parent Rules Settings\">\r\n          Adjust these sliders to control the likelihood of each parent game's\r\n          rules being on the board. The higher the slider, the more rules from\r\n          that game will be on the board\r\n          <ul className=\"GameCardSettingsModal__parent-rules-sliders\">\r\n            {parents.map((parent, i) => {\r\n              return (\r\n                parent.rules &&\r\n                Object.keys(parent.rules).length > 0 && (\r\n                  <li key={i}>\r\n                    <Slider\r\n                      title={parent.title}\r\n                      startingValue={\r\n                        settings.parents.find((p) => p.key === parent.gameKey)\r\n                          .ratio\r\n                      }\r\n                      max={5}\r\n                      onChange={(val) => {\r\n                        updateParentRatio(parent.gameKey, val);\r\n                      }}\r\n                    />\r\n                  </li>\r\n                )\r\n              );\r\n            })}\r\n          </ul>\r\n        </FieldSet>\r\n        <FieldSet\r\n          legend=\"Board Size\"\r\n          className=\"GameCardSettingsModal__grid-size\"\r\n        >\r\n          Choose the size of the bingo\r\n          <br /> grid you want to play with\r\n          <GridPicker\r\n            size={settings.grid}\r\n            onChange={(grid) => {\r\n              setSettings((oldSettings) => {\r\n                return {\r\n                  ...oldSettings,\r\n                  grid,\r\n                };\r\n              });\r\n            }}\r\n          />\r\n        </FieldSet>\r\n        <footer className=\"GameCardSettingsModal__footer\">\r\n          <Alert type=\"info\">Clicking Apply will refresh the board</Alert>\r\n          <button\r\n            className=\"cta GameCardSettingsModal__apply\"\r\n            onClick={onApplyClick}\r\n          >\r\n            Apply\r\n          </button>\r\n        </footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameCardSettingsModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport DataHelper from \"../DataHelper\";\r\nimport { randoIndex, setTitle, rando } from \"../helpers\";\r\nimport shuffle from \"lodash/shuffle\";\r\nimport GameCardFreeSquare from \"./GameCardFreeSquare\";\r\nimport GameCardSettingsModal from \"./GameCardSettingsModal\";\r\n\r\nconst GameCard = ({ games, currentIndex }) => {\r\n  const [cardRules, setCardRules] = useState([]);\r\n  const [settingsOpen, setSettingsOpen] = useState(false);\r\n  const data = new DataHelper(games);\r\n\r\n  const game = data.getGameByKey(currentIndex);\r\n\r\n  const parents = data.getParentGames(game);\r\n\r\n  const defaultSettings = {\r\n    parents: parents.map((parent) => {\r\n      return {\r\n        key: parent.gameKey,\r\n        ratio: 1,\r\n      };\r\n    }),\r\n    grid: [5, 5],\r\n  };\r\n\r\n  let savedSettings = window.localStorage.getItem(currentIndex);\r\n\r\n  if (savedSettings !== null) {\r\n    savedSettings = JSON.parse(savedSettings);\r\n  }\r\n\r\n  const [settings, setSettings] = useState(savedSettings || defaultSettings);\r\n\r\n  document.body.classList.add(\"App--GameCard\");\r\n\r\n  function pickparentGames(gRules, numToPick, picked = []) {\r\n    if (gRules.length === 0) return picked;\r\n\r\n    const gameIndex = randoIndex(gRules);\r\n\r\n    const ruleIndex = randoIndex(gRules[gameIndex]);\r\n    const rule = { ...gRules[gameIndex][ruleIndex] };\r\n\r\n    picked.push(rule);\r\n\r\n    const newRules = gRules\r\n      .map((g, i) => {\r\n        if (i !== gameIndex) return g;\r\n\r\n        return [...g.slice(0, ruleIndex), ...g.slice(ruleIndex + 1)];\r\n      })\r\n      .filter((g) => g.length > 0);\r\n\r\n    return picked.length === numToPick\r\n      ? picked\r\n      : pickparentGames(newRules, numToPick, picked);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setTitle(`${game.title} Drinking Bingo`);\r\n\r\n    //shuffle the game rules and pick half\r\n    let gameRules = shuffle(\r\n      data.rulesObjectToArray(data.getGameRules(currentIndex, false))\r\n    );\r\n\r\n    //pick half the game rules\r\n    gameRules = gameRules\r\n      .slice(\r\n        0,\r\n        Math.min(\r\n          Math.ceil(gameRules.length / 2),\r\n          Math.floor((settings.grid[0] * settings.grid[1]) / 2)\r\n        )\r\n      )\r\n      .map((r) => {\r\n        const { rule, drinks } = r;\r\n\r\n        //create gameboard rule objects from all rules\r\n        return {\r\n          id: r.ruleKey,\r\n          rule,\r\n          drinks,\r\n          game,\r\n        };\r\n      });\r\n\r\n    //get the parent games' rules in an object\r\n    const parentGames = {};\r\n    parents.forEach((parent) => {\r\n      parentGames[parent.gameKey] = data.rulesObjectToArray(parent.rules);\r\n    });\r\n\r\n    //make an array of parent game keys, weighted by the settings\r\n    //the more the key appears in the array the higher the likelihood its questions\r\n    //are on the board\r\n    let ruleIndexes = [];\r\n\r\n    settings.parents.forEach((p, i) => {\r\n      if (parentGames[p.key] && parentGames[p.key].length > 0)\r\n        for (let r = 0; r < p.ratio; r++) {\r\n          ruleIndexes.push(p.key);\r\n        }\r\n    });\r\n\r\n    //calc the number of parent rules to add (grid area - num game rules - 1 free space)\r\n    const numparentGames =\r\n      settings.grid.reduce((prev, cur) => prev * cur, 1) - gameRules.length - 1;\r\n\r\n    let rules = [...gameRules];\r\n\r\n    for (let r = 0; r < numparentGames; r++) {\r\n      //get a random key from the indexes array\r\n      const parentKey = rando(ruleIndexes);\r\n\r\n      //get the rules for that key\r\n      const parentRules = parentGames[parentKey];\r\n\r\n      //pick a random rule\r\n      const ruleIndex = randoIndex(parentRules);\r\n      const rule = parentRules[ruleIndex];\r\n\r\n      //remove that rule from the array so we dont pick it again\r\n      parentGames[parentKey] = [\r\n        ...parentGames[parentKey].slice(0, ruleIndex),\r\n        ...parentGames[parentKey].slice(ruleIndex + 1),\r\n      ];\r\n\r\n      //if that was the last rule in that game, remove its key from contention\r\n      if (parentGames[parentKey].length == 0) {\r\n        ruleIndexes = ruleIndexes.filter((key) => key !== parentKey);\r\n      }\r\n\r\n      //add the rule to the rules array, including its game\r\n      rules.push({\r\n        ...rule,\r\n        game: data.getGameByKey(parentKey),\r\n      });\r\n    }\r\n\r\n    const { grid } = settings;\r\n    const [rows, cols] = grid;\r\n\r\n    const freeSquareRule = {\r\n      id: \"free\",\r\n      rule: (\r\n        <GameCardFreeSquare\r\n          title={game.title}\r\n          subtitle=\"Drinking Bingo\"\r\n          onCogClick={(e) => {\r\n            console.log(\"open settings\");\r\n            setSettingsOpen(true);\r\n          }}\r\n        />\r\n      ),\r\n      highlighted: true,\r\n    };\r\n\r\n    //if both row and column are odd, put the free square in the center\r\n    if (rows % 2 !== 0 && cols % 2 !== 0) {\r\n      const freeIndex = (rows * cols - 1) / 2;\r\n\r\n      rules = [\r\n        ...rules.slice(0, freeIndex),\r\n        freeSquareRule,\r\n        ...rules.slice(freeIndex),\r\n      ];\r\n    } else {\r\n      //otherwise it floats free\r\n      rules.push(freeSquareRule);\r\n      rules = shuffle(rules);\r\n    }\r\n    setCardRules(rules);\r\n  }, [currentIndex, settings]);\r\n\r\n  const highlightRule = (i) => {\r\n    setCardRules([\r\n      ...cardRules.slice(0, i),\r\n      {\r\n        ...cardRules[i],\r\n        highlighted: !cardRules[i].highlighted,\r\n      },\r\n      ...cardRules.slice(i + 1),\r\n    ]);\r\n  };\r\n\r\n  const onSettingsChange = (newSettings) => {\r\n    setSettings({ ...newSettings });\r\n\r\n    window.localStorage.setItem(currentIndex, JSON.stringify(newSettings));\r\n  };\r\n\r\n  /**\r\n   * Outputs the given number of header squares\r\n   * @param {Int} num\r\n   */\r\n  const outputHeader = (num) => {\r\n    return [\r\n      <div key={`b`} className=\"header-box header-box--b\">\r\n        B\r\n      </div>,\r\n      <div key={`i`} className=\"header-box header-box--i\">\r\n        I\r\n      </div>,\r\n      <div key={`n`} className=\"header-box header-box--n\">\r\n        N\r\n      </div>,\r\n      <div key={`g`} className=\"header-box header-box--g\">\r\n        G\r\n      </div>,\r\n      <div key={`o`} className=\"header-box header-box--o\">\r\n        O\r\n      </div>,\r\n    ].filter((l, i) => i < num);\r\n  };\r\n\r\n  const columnSize =\r\n    window.innerWidth < 820 ? `${100 * (1 / settings.grid[1])}%` : \"1fr\";\r\n\r\n  const columnTemplate = `repeat(${settings.grid[1]},${columnSize})`;\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`GameCard GameCard--${settings.grid[0]}-rows GameCard--${settings.grid[1]}-cols`}\r\n        style={{\r\n          gridTemplateRows: `4rem repeat(${settings.grid[0] - 1},auto)`,\r\n          gridTemplateColumns: columnTemplate,\r\n        }}\r\n      >\r\n        {outputHeader(settings.grid[1])}\r\n\r\n        {cardRules.map((rule, i) => {\r\n          return (\r\n            <div\r\n              onClick={(e) => {\r\n                if (rule.id !== \"free\") {\r\n                  highlightRule(i);\r\n                }\r\n              }}\r\n              key={i}\r\n              className={`rule-box rule-box--${rule.id}${\r\n                rule.highlighted ? \" rule-box--highlighted\" : \"\"\r\n              }${\r\n                rule.gameKey === currentIndex\r\n                  ? \" rule-box--game-rule\"\r\n                  : \" rule-box--parent-rule\"\r\n              }`}\r\n            >\r\n              <div>\r\n                <div className={`rule-box__rule`}>{rule.rule}</div>\r\n                {rule.drinks && (\r\n                  <div className={`rule-box__drinks`}>{rule.drinks}</div>\r\n                )}\r\n                {rule.game && (\r\n                  <div className={`rule-box__game-title`}>\r\n                    ({rule.game.title})\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <a href=\"/\" className=\"GameCard__return-link\">\r\n        <i className=\"fa fa-sign-out\"></i>\r\n      </a>\r\n      <GameCardSettingsModal\r\n        open={settingsOpen}\r\n        onClose={() => {\r\n          setSettingsOpen(false);\r\n        }}\r\n        onApply={onSettingsChange}\r\n        game={game}\r\n        games={games}\r\n        settings={settings}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GameCard;\r\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Game from \"./Game\";\nimport Games from \"./Games\";\nimport Alert from \"./Alert\";\nimport SessionManager from \"./SessionManager\";\nimport { withRouter } from \"react-router-dom\";\nimport ShortcutsModal from \"./ShortCutsModal\";\nimport GameCard from \"./GameCard\";\n\nclass Desktop extends React.Component {\n  static propTypes = {\n    games: PropTypes.object.isRequired,\n    editRule: PropTypes.func.isRequired,\n    deleteRule: PropTypes.func.isRequired,\n    deleteGame: PropTypes.func.isRequired,\n    addRule: PropTypes.func.isRequired,\n    editGame: PropTypes.func.isRequired,\n    addGame: PropTypes.func.isRequired,\n    userLoggedIn: PropTypes.func.isRequired,\n    getUser: PropTypes.func.isRequired,\n    currentIndex: PropTypes.string,\n  };\n\n  static defaultProps = {\n    currentIndex: undefined,\n  };\n\n  shortcuts = React.createRef();\n\n  showShortcuts = () => {\n    this.shortcuts.current.show();\n  };\n\n  render() {\n    //console.log(this.props.games);\n    //console.log(this.props.canDeleteGame);\n\n    return this.props.mode === \"game-card\" ? (\n      <GameCard\n        games={this.props.games}\n        currentIndex={this.props.match.params.ID}\n      />\n    ) : (\n      <main className=\"Desktop\">\n        <Games\n          games={this.props.games}\n          editGame={this.props.editGame}\n          addGame={this.props.addGame}\n          deleteGame={this.props.deleteGame}\n          canEditGame={this.props.canEditGame}\n          canEditRule={this.props.canEditRule}\n          canDeleteGame={this.props.canDeleteGame}\n          canDeleteRule={this.props.canEditRule}\n          copyGame={this.props.copyGame}\n          userLoggedIn={this.props.userLoggedIn}\n          getUser={this.props.getUser}\n          currentIndex={this.props.match.params.ID}\n          renderAuthButton={this.props.renderAuthButton}\n        />\n\n        {this.props.mode === \"game\" ? (\n          <div className=\"GameShell\">\n            <header className=\"App__header\">\n              <SessionManager\n                createSession={this.props.createSession}\n                leaveSession={this.props.leaveSession}\n                joinSession={this.props.joinSession}\n                currentSession={this.props.currentSession}\n              />\n\n              <span className=\"App__current-user\">{this.props.user.email}</span>\n\n              <button\n                className=\"App__shortcuts-ref\"\n                onClick={this.showShortcuts}\n              >\n                <i className=\"fa fa-keyboard-o\"></i>\n              </button>\n            </header>\n            <Game\n              index={this.props.match.params.ID}\n              games={this.props.games}\n              editRule={this.props.editRule}\n              deleteRule={this.props.deleteRule}\n              deleteGame={this.props.deleteGame}\n              addRule={this.props.addRule}\n              editGame={this.props.editGame}\n              addGame={this.props.addGame}\n              canEditGame={this.props.canEditGame}\n              canEditRule={this.props.canEditRule}\n              canDeleteGame={this.props.canDeleteGame}\n              canDeleteRule={this.props.canEditRule}\n              copyGame={this.props.copyGame}\n              userLoggedIn={this.props.userLoggedIn}\n              getUser={this.props.getUser}\n              setSessionCombo={this.props.setSessionCombo}\n              currentComboCount={this.props.currentComboCount}\n            />\n          </div>\n        ) : (\n          <div className=\"Desktop__alert-shell\">\n            <Alert tag=\"div\" type=\"info\">\n              Choose a game from the left hand menu\n            </Alert>\n          </div>\n        )}\n        <ShortcutsModal ref={this.shortcuts} />\n      </main>\n    );\n  }\n}\n\nexport default withRouter(Desktop);\n","import React from 'react';\nimport Alert from './Alert';\nimport {Link} from 'react-router-dom';\n\nclass Login extends React.Component\n{\n    userField = React.createRef();\n    passwordField = React.createRef();\n\n    authenticate = (e) => {\n        \n        console.log('loader auth');\n\n        let user = this.userField.current.value;\n        let pass = this.passwordField.current.value;\n\n        this.props.authenticate(user,pass);\n    }\n\n    render()\n    {\n        return (\n            <div className=\"Login\">\n                <form className=\"Login__form\">\n                    <h2>Login</h2>\n                    <p>Sign in to start drinking</p>\n\n                    {this.props.error ? <Alert type=\"error\">{this.props.error}</Alert> : null}\n\n                    <input type=\"text\" required ref={this.userField} placeholder=\"Email\" />\n                    <input type=\"password\" required ref={this.passwordField} placeholder=\"Password\" />\n\n                    <button type=\"button\" className=\"Login__login\" onClick={this.authenticate}>Turn Down For What</button>\n                    <Link className=\"Login__signup \" to=\"/signup\">Get Started Turnin' Up</Link>\n                </form>\n            </div>);\n    }\n}\n\nexport default Login;","const config = {\n    firebase : {\n        apiKey: \"AIzaSyBqPifaPtgVVbc222q6U09NBRuHTn9ECr0\",\n        authDomain: \"raymond-catch-of-the-day.firebaseapp.com\",\n        databaseURL: \"https://raymond-catch-of-the-day.firebaseio.com\",\n        projectId: \"raymond-catch-of-the-day\",\n        storageBucket: \"raymond-catch-of-the-day.appspot.com\",\n        messagingSenderId: \"425132188904\",\n        appId: \"1:425132188904:web:04405d03ba6769cc5f555d\",\n        measurementId: \"G-SJZ98PJSWE\"\n    }\n}\n\nexport default config;","import Rebase from 're-base';\nimport firebase from 'firebase';\nimport config from './config';\n\nconst firebaseApp = firebase.initializeApp(config.firebase);\n\nconst base = Rebase.createClass(firebaseApp.database());\n\nexport {firebaseApp};\n\nexport default base;","import React from 'react';\nimport Alert from './Alert';\n//import {Link} from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nclass Signup extends React.Component\n{\n    userField = React.createRef();\n    passwordField = React.createRef();\n    passwordField2 = React.createRef();\n\n    state = {\n        error : null\n    }\n\n    static propTypes = {\n        error : PropTypes.string,\n        signup : PropTypes.func.isRequired,\n    }\n\n    static defaultProps =  {\n        error : null\n    }\n\n    componentWillMount()\n    {\n        this.setState({error : this.props.error});\n    }\n\n    signup = (e) => {\n\n        let user = this.userField.current.value;\n        let pass1 = this.passwordField.current.value;\n        let pass2 = this.passwordField2.current.value;\n\n        if(pass1 !== pass2)\n        {\n            //console.log(pass1,pass2);\n            this.setState({error : `Passwords don't match`});\n        }\n        else\n        {\n            this.props.signup(user,pass1);\n        }\n        \n    }\n\n    render()\n    {\n        //console.log('signup render');\n\n        let error = this.props.error || this.state.error;\n\n        return (\n            <div className=\"Signup\">\n                <form className=\"Signup__form\">\n                    <h2>Signup</h2>\n                    <p>Sign in to start drinking</p>\n\n                    {error ? <Alert type=\"error\">{error}</Alert> : null}\n\n                    <input type=\"text\" required ref={this.userField} placeholder=\"Email\" />\n                    <input type=\"password\" required ref={this.passwordField} placeholder=\"Password\" />\n                    <input type=\"password\" required ref={this.passwordField2} placeholder=\"Confirm Password\" />\n\n                    <button type=\"button\" className=\"Signup__Signup\" onClick={this.signup}>Turn Down For What</button>\n                </form>\n            </div>);\n    }\n}\n\nexport default Signup;","import React from \"react\";\r\n\r\nconst Result = ({ result }) => {\r\n  const { title, rules, gameKey } = result;\r\n\r\n  return (\r\n    <li className=\"Result\">\r\n      <a href={`/game/${gameKey}/card`}>\r\n        <div>\r\n          <h2>{title}</h2>\r\n          <h3>{rules}</h3>\r\n        </div>\r\n      </a>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Result;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Result from \"./Result\";\r\nimport DataHelper from \"../../DataHelper\";\r\n\r\nconst Index = ({ games: gamesObj }) => {\r\n  document.body.classList.add(\"Index--body\");\r\n  const data = new DataHelper(gamesObj);\r\n\r\n  const games = data\r\n    .objectCollectionToArrayWithKey(gamesObj, \"gameKey\")\r\n    .filter((game) => game.title !== \"\");\r\n\r\n  const [q, setQ] = useState(\"\");\r\n\r\n  const uniqueGame = (item, pos, arr) => {\r\n    return arr.findIndex((game) => game.gameKey === item.gameKey) === pos;\r\n  };\r\n\r\n  const byTitleDesc = (a, b) =>\r\n    a.title.toLowerCase() <= b.title.toLowerCase() ? -1 : 1;\r\n\r\n  const makeResult = (game) => {\r\n    const parents = data.getParentGames(game);\r\n    const parentRules = parents.reduce((tot, parent) => {\r\n      if (!parent || !parent.rules) return tot;\r\n\r\n      return Object.keys(parent.rules).length;\r\n    }, 0);\r\n    const gameRules =\r\n      game.rules !== undefined ? Object.keys(game.rules).length : 0;\r\n    return {\r\n      title: game.title,\r\n      rules: gameRules + parentRules,\r\n      gameKey: game.gameKey,\r\n    };\r\n  };\r\n\r\n  const [results, setResults] = useState(\r\n    games.map(makeResult).sort(byTitleDesc)\r\n  );\r\n\r\n  const onSearchChange = (e) => {\r\n    const q = e.target.value;\r\n    const qLCase = q.toLowerCase();\r\n\r\n    const matches = games.filter(\r\n      (game, i) => game.title.toLowerCase().indexOf(qLCase) > -1\r\n    );\r\n\r\n    const matchChildren = [];\r\n\r\n    matches.forEach((match, m) => {\r\n      data\r\n        .objectCollectionToArrayWithKey(\r\n          data.getChildGames(match.gameKey),\r\n          \"gameKey\"\r\n        )\r\n        .forEach((matchChild, mc) => {\r\n          matchChildren.push(matchChild);\r\n        });\r\n    });\r\n\r\n    const results = matches\r\n      .concat(matchChildren)\r\n      .filter((r) => r.title !== \"\")\r\n      .filter(uniqueGame)\r\n      .map(makeResult)\r\n      .sort(byTitleDesc);\r\n\r\n    //console.log(results);\r\n\r\n    setQ(q);\r\n    setResults(results);\r\n  };\r\n\r\n  return (\r\n    <div className=\"Index\">\r\n      <header className=\"Index__header\">\r\n        <h1>Drinko</h1>\r\n        <input\r\n          type=\"search\"\r\n          className=\"Index__search\"\r\n          placeholder=\"Search Games\"\r\n          onChange={onSearchChange}\r\n          value={q}\r\n        />\r\n      </header>\r\n      <ul className=\"Index__results\">\r\n        {results.map((result, i) => (\r\n          <Result result={result} key={i} />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Index;\r\n","import React from \"react\";\n//import Games from './Games';\n//import Game from './Game';\n//import NotFound from './NotFound';\nimport fakeGames from \"../fakeGames.js\";\nimport DataHelper from \"../DataHelper\";\nimport Loader from \"./Loader\";\nimport Desktop from \"./Desktop\";\nimport Login from \"./Login\";\nimport firebase from \"firebase\";\nimport base from \"../base\";\nimport Signup from \"./Signup\";\nimport { GENERAL_RULES_KEY, RAYMOND_UID } from \"../constants\";\nimport ShortCutsModal from \"./ShortCutsModal\";\nimport { Link } from \"react-router-dom\";\nimport SearchIndex from \"./search/Index\";\n\nclass App extends React.Component {\n  state = {\n    games: {},\n    mobile: false,\n    user: { uid: \"\" },\n    users: {},\n    loading: true,\n    signupError: null,\n    loginError: null,\n    loggingIn: false,\n    currentSession: undefined,\n    sessions: {},\n    gamesInited: false,\n  };\n\n  sessionKeyLength = 4;\n\n  sessionLife = 1000 * 60 * 60 * 24; //24 hours\n\n  shortCutsModal = React.createRef();\n\n  editGame = (key, game) => {\n    const games = { ...this.state.games };\n\n    games[key] = game;\n\n    this.setState({ games });\n  };\n\n  getCurrentSessionComboCount = () => {\n    return this.inASession()\n      ? this.state.sessions[this.state.currentSession].currentComboCount\n      : 0;\n  };\n\n  setSession = (key) => {\n    let session = {\n      created: new Date().getTime(),\n      currentComboCount: 0,\n    };\n\n    let sessions = { ...this.state.sessions };\n    sessions = this.pruneSessions(sessions);\n\n    sessions[key] = session;\n\n    //console.log(sessions); return;\n\n    this.setState({ sessions: sessions });\n\n    setTimeout(() => {\n      this.joinSession(key);\n    }, 10);\n  };\n\n  inASession = () => {\n    return this.state.currentSession !== undefined;\n  };\n\n  setSessionCombo = (count) => {\n    if (this.inASession()) {\n      let sessions = { ...this.state.sessions };\n      sessions[this.state.currentSession].currentComboCount = count;\n\n      this.setState({ sessions });\n    } else {\n      alert(\"The Combo Counter can only be used in a session\");\n    }\n  };\n\n  pruneSessions = (sessions) => {\n    let now = new Date().getTime();\n\n    this.data.forEach((key) => {\n      let session = sessions[key];\n\n      if (now - session.created >= this.sessionLife) {\n        sessions[key] = null;\n      }\n    }, sessions);\n\n    //console.log(sessions);\n\n    return sessions;\n  };\n\n  joinSession = (key) => {\n    key = key.toUpperCase();\n\n    if (this.sessionKeyExists(key)) {\n      this.setState({ currentSession: key });\n\n      window.sessionStorage.setItem(\"currentSession\", key);\n\n      return true;\n    } else {\n      //console.log(key,this.state.sessions);\n\n      alert(`No session with the code \"${key}\" currently exists.`);\n      return false;\n    }\n  };\n\n  leaveSession = () => {\n    this.setState({ currentSession: undefined });\n    window.sessionStorage.removeItem(\"currentSession\");\n  };\n\n  sessionKeyExists = (key) => {\n    return this.state.sessions[key] !== undefined;\n  };\n\n  generateSessionKey = () => {\n    let key = \"\";\n    let code;\n\n    for (let i = 0; i < this.sessionKeyLength; i++) {\n      code = Math.round(Math.random() * 25) + 65;\n\n      //console.log(code,key);\n      key += String.fromCharCode(code);\n    }\n\n    return key.toUpperCase();\n  };\n\n  generateUniqueSessionKey = () => {\n    let key = this.generateSessionKey();\n\n    do {\n      key = this.generateSessionKey();\n    } while (this.state.sessions[key] !== undefined);\n\n    return key;\n  };\n\n  createSession = () => {\n    let key = this.generateUniqueSessionKey();\n\n    this.setSession(key);\n\n    return key;\n  };\n\n  componentWillUpdate() {\n    //console.log(this.props.location.pathname);\n  }\n\n  componentDidMount() {\n    let db = \"live\"; //window.location.hostname === \"localhost\" ? \"dev\" : \"live\";\n\n    //console.log(db);\n    this.fbRefU = base.syncState(`drinking-games/${db}/users`, {\n      context: this,\n      state: \"users\",\n    });\n\n    this.fbRefSessions = base.syncState(`drinking-games/${db}/sessions`, {\n      context: this,\n      state: \"sessions\",\n      then: (t) => {\n        let ssKey = window.sessionStorage.getItem(\"currentSession\");\n\n        if (ssKey && !this.inASession()) {\n          this.joinSession(ssKey);\n        }\n      },\n    });\n\n    //base.listenTo('drinking-games/games',)\n    this.fbRef = base.syncState(`drinking-games/${db}/games`, {\n      context: this,\n      state: \"games\",\n      then: (t) => {\n        //console.log('got games from fb',this.state.games);\n\n        this.data = new DataHelper(this.state.games);\n\n        //after we sync the state to firebase, if there are no games, load up some fake ones for testing\n        if (Object.keys(this.state.games).length === 0) {\n          this.setState({ games: fakeGames });\n        }\n\n        this.setState({ loading: false });\n      },\n    });\n\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        this.authHandler({ user });\n      }\n    });\n  }\n\n  canEditRule = (rule) => {\n    return this.userLoggedIn(); //this.state.user.uid === this.RAYMOND_UID || rule.owner === this.state.user.uid;\n  };\n\n  canEditGame = (gameKey) => {\n    let game =\n      typeof gameKey === \"string\" ? this.data.getGameByKey(gameKey) : gameKey;\n\n    //console.log(game.title,this.state.user.uid === this.RAYMOND_UID || (game.owner && game.owner === this.state.user.uid));\n    return (\n      this.state.user.uid === RAYMOND_UID ||\n      (game.owner && game.owner === this.state.user.uid)\n    );\n  };\n\n  canDeleteRule = (rule) => {\n    return (\n      this.state.user.uid === RAYMOND_UID || rule.owner === this.state.user.uid\n    );\n  };\n\n  canDeleteGame = (gameKey) => {\n    let game = this.data.getGameByKey(gameKey);\n\n    if (this.state.user.uid === RAYMOND_UID) return true;\n\n    if (!game.owner || game.owner !== this.state.user.uid) return false;\n\n    //console.log('game owner');\n\n    let success = this.data.gameHasOtherUserGames(gameKey, this.state.user.uid); // && !this.data.gameHasOtherUserOwnedRules(gameKey,this.state.user.uid);\n\n    return success;\n  };\n\n  editRule = (gameKey, ruleKey, newRule) => {\n    console.log(gameKey, ruleKey, newRule);\n\n    let games = { ...this.state.games };\n\n    let game = games[gameKey];\n\n    newRule.drinks = this.sanitizeDrinks(newRule.drinks);\n\n    if (\n      game &&\n      game.rules &&\n      game.rules[ruleKey] &&\n      gameKey === newRule.gameKey\n    ) {\n      games[gameKey].rules[ruleKey] = newRule;\n    } else {\n      console.log(\"dif gam game\");\n\n      let oldGame = game;\n      let newGame = games[newRule.gameKey];\n\n      if (oldGame && newGame) {\n        if (!newGame.rules) {\n          newGame.rules = {};\n        }\n\n        games[gameKey].rules[ruleKey] = null;\n        games[newRule.gameKey].rules[ruleKey] = newRule;\n      } else {\n      }\n    }\n\n    this.setState({ games });\n  };\n\n  deleteRule = (gameKey, ruleKey) => {\n    let games = { ...this.state.games };\n\n    //console.log(gameKey,ruleKey);\n\n    if (games && games[gameKey] && games[gameKey].rules[ruleKey]) {\n      games[gameKey].rules[ruleKey] = null;\n\n      //console.log(games);\n\n      this.setState({ games });\n    }\n  };\n\n  addRule = (gameKey, rule) => {\n    //console.log(gameKey,rule);\n\n    rule.owner = this.state.user.uid;\n\n    let ruleKey = this.data.getNewRuleKey(gameKey);\n\n    let games = { ...this.state.games };\n\n    if (!games[gameKey].rules) games[gameKey].rules = {};\n\n    games[gameKey].rules[ruleKey] = rule;\n\n    //console.log(games);\n\n    this.setState({ games });\n  };\n\n  addGame = (gameTitle, parents) => {\n    let game = {\n      title: gameTitle,\n      rules: {},\n    };\n\n    let parentKey = parents.map((game) => {\n      return game.gameKey;\n    });\n\n    if (!parentKey.includes(GENERAL_RULES_KEY)) {\n      parentKey.push(GENERAL_RULES_KEY);\n    }\n\n    console.log(parentKey);\n\n    game.owner = this.state.user.uid;\n\n    if (parentKey !== \"\") {\n      game.parent_game = parentKey;\n    }\n\n    let games = { ...this.state.games };\n    let newGameKey = this.data.getNewGameKey();\n\n    games[newGameKey] = game;\n\n    this.setState({ games });\n\n    this.viewGame(newGameKey);\n  };\n\n  copyRules = (rules, oldGameKey, newGameKey) => {\n    rules = { ...rules };\n\n    let newRules = {};\n\n    this.data.forEach((key) => {\n      let newRuleKey = key.replace(oldGameKey, newGameKey);\n\n      //console.log(oldGameKey,newGameKey);\n      //console.log(newRuleKey,key);\n\n      newRules[newRuleKey] = { ...rules[key] };\n      newRules[newRuleKey].gameKey = newGameKey;\n      newRules[newRuleKey].owner = this.state.user.uid;\n    }, rules);\n\n    return newRules;\n  };\n\n  copyGame = (key) => {\n    this.data = new DataHelper(this.state.games);\n\n    let games = { ...this.state.games };\n\n    let game = { ...this.data.getGameByKey(key) };\n\n    let newKey = this.data.getNewGameKey();\n\n    game.title += \" Copy\";\n    game.owner = this.state.user.uid;\n\n    games[newKey] = game;\n\n    //if(game.rules && Object.keys(game.rules).length > 0)\n    games[newKey].rules = this.copyRules(game.rules, key, newKey);\n\n    //console.log(game,games);\n\n    this.setState({ games });\n\n    this.viewGame(newKey);\n\n    //console.log(this.data);\n  };\n\n  deleteGame = (key) => {\n    let games = { ...this.state.games };\n\n    games[key] = null;\n\n    this.setState({ games });\n\n    if (key === this.props.match.params.ID) {\n      this.props.history.replace(\"/\");\n    }\n  };\n\n  mobileCheck = (match) => {\n    this.setState({ mobile: match.matches });\n  };\n\n  viewGame = (key) => this.props.history.push(`/game/${key}`);\n\n  componentWillMount() {\n    //console.log('app will mount');\n    let mobileCheck = window.matchMedia(\"(max-width: 1000px)\");\n    this.mobileCheck(mobileCheck);\n    mobileCheck.addListener(this.mobileCheck);\n  }\n\n  authHandler = async (resp) => {\n    if (!this.userExists(resp.user)) {\n      this.addUser(resp.user);\n    }\n\n    this.setState({\n      user: resp.user,\n      loggingIn: false,\n    });\n\n    if (this.props.location.pathname === \"/signup\") {\n      this.props.history.push(\"/\");\n    }\n  };\n\n  authenticate = (u, p) => {\n    //let provider = new firebase.auth().signInWithEmailAndPassword('test@test.com','test4$').then(this.authHandler);\n\n    this.setState({ loading: true });\n\n    //console.log('app auth');\n\n    new firebase.auth()\n      .signInWithEmailAndPassword(u, p)\n      .then((resp) => {\n        this.authHandler(resp);\n\n        console.log(\"firebase login\", resp);\n\n        this.setState({\n          loading: false,\n          signInError: null,\n        });\n      })\n      .catch((error) => {\n        this.setState({ signInError: error.message });\n      });\n  };\n\n  logout = async () => {\n    await firebase.auth().signOut();\n    this.setState({\n      user: {\n        uid: \"\",\n      },\n    });\n  };\n\n  addUser = (user) => {\n    //console.log(user);\n\n    let stateUser = {\n      email: user.email,\n    };\n\n    let users = { ...this.state.users };\n    users[user.uid] = stateUser;\n\n    this.setState({ users });\n  };\n\n  getUser = (hash) => {\n    let toRet = null;\n\n    if (this.userExists(hash)) {\n      toRet = this.state.users[hash];\n    }\n\n    return toRet;\n  };\n\n  /**\n   * takes some val for a rule's drinks and sanitizes it for addition to the DB\n   */\n  sanitizeDrinks = (val) => {\n    val = val.replace(/([\\d]+) drink(s)?/gi, \"$1\");\n\n    return val;\n  };\n\n  userExists = (user) => {\n    if (user === undefined) return false;\n\n    try {\n      let uid = typeof user === \"string\" ? user : user.uid;\n\n      return this.state.users[uid] !== undefined;\n    } catch (e) {\n      console.error(\"Error checking for user\", user);\n      return false;\n    }\n  };\n\n  signup = (email, pass) => {\n    //console.log('app signup');\n\n    firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, pass)\n      .then((res) => {\n        this.authHandler(res);\n      })\n      .catch((error) => {\n        //console.log(error);\n\n        this.setState({ signupError: error.message });\n      });\n  };\n\n  onLoginClick = (e) => {\n    this.setState({ loggingIn: true });\n  };\n\n  userLoggedIn = () => this.state.user.uid !== \"\";\n\n  renderAuthButton = () => {\n    //<button className=\"App__login-button\" onClick={this.onLoginClick}>Log In</button>\n    //<button onClick={this.logout} className=\"App__logout\">Turn Down</button>\n    //<Link to=\"/signup\" className=\"button-link App__sign-up-btn\">Signup</Link>\n\n    //console.log(this.state.user);\n\n    if (this.state.user.uid === \"\") {\n      return (\n        <span>\n          <button\n            className=\"App__auth-button App__auth-button--login link-button\"\n            onClick={this.onLoginClick}\n          >\n            Log In\n          </button>\n          <Link\n            to=\"/signup\"\n            className=\"App__auth-button App__auth-button--signup link-button\"\n          >\n            Signup\n          </Link>\n        </span>\n      );\n    } else {\n      return (\n        <span>\n          <button\n            onClick={this.logout}\n            className=\"App__auth-button App__auth-button--signout link-button\"\n          >\n            Turn Down\n          </button>\n        </span>\n      );\n    }\n  };\n\n  showShortcuts = () => {\n    this.shortCutsModal.current.show();\n  };\n\n  render() {\n    this.data = new DataHelper(this.state.games);\n\n    //console.log('render app');\n    //return <Loader message=\"Loading...\"/>\n    //console.log(this.state.games);\n\n    if (this.state.loggingIn && this.mode !== \"signup\")\n      return (\n        <Login\n          authenticate={this.authenticate}\n          error={this.state.signInError}\n        />\n      );\n\n    if (Object.keys(this.state.games).length === 0) {\n      //console.log('delay for fb');\n      return <Loader message=\"Turning Up...\" />;\n    }\n\n    //console.log('render app',this.state.loading);\n\n    if (this.state.loading) {\n      return <Loader message=\"Turning Up...\" />;\n    }\n\n    let view = null;\n\n    // if(this.state.mobile)\n    // {\n    //     switch(this.props.mode)\n    //     {\n    //         case 'join' :\n    //             let key = this.props.match.params.key;\n\n    //             if(this.joinSession(key))\n    //             {\n    //                 this.props.history.push('/');\n    //             }\n\n    //             break;\n    //         case 'games' :\n    //             view = <Games\n    //                 games={this.state.games}\n    //                 editGame={this.editGame}\n    //                 addGame={this.addGame}\n    //                 deleteGame={this.deleteGame}\n    //                 copyGame={this.copyGame}\n    //                 editRule={this.editRule}\n    //                 deleteRule={this.deleteRule}\n    //                 addRule={this.addRule}\n    //                 mode={this.props.mode}\n    //                 match={this.props.match}\n    //                 canEditGame={this.canEditGame}\n    //                 canEditRule={this.canEditRule}\n    //                 canDeleteGame={this.canDeleteGame}\n    //                 canDeleteRule={this.canDeleteRule}\n    //                 userLoggedIn={this.userLoggedIn}\n    //                 getUser={this.getUser} />;\n    //             break;\n    //         case 'game' :\n    //             view = <Game\n    //                     index={this.props.match.params.ID}\n    //                     games={this.state.games}\n    //                     editGame={this.editGame}\n    //                     addGame={this.addGame}\n    //                     deleteGame={this.deleteGame}\n    //                     copyGame={this.copyGame}\n    //                     editRule={this.editRule}\n    //                     deleteRule={this.deleteRule}\n    //                     addRule={this.addRule}\n    //                     mode={this.props.mode}\n    //                     match={this.props.match}\n    //                     canEditGame={this.canEditGame}\n    //                     canEditRule={this.canEditRule}\n    //                     canDeleteGame={this.canDeleteGame}\n    //                     canDeleteRule={this.canDeleteRule}\n    //                     userLoggedIn={this.userLoggedIn}\n    //                     getUser={this.getUser}\n    //                     setSessionCombo={this.setSessionCombo} />;\n    //             break;\n    //         case 'signup' :\n    //             view = <Signup error={this.state.signupError} signup={this.signup} />;\n    //             break;\n    //         default :\n    //             view = <NotFound />;\n    //     }\n    // }\n    // else\n    // {\n    switch (this.props.mode) {\n      case \"signup\":\n        view = <Signup signup={this.signup} error={this.state.signupError} />;\n        break;\n      case \"join\":\n        let key = this.props.match.params.key;\n\n        if (this.joinSession(key)) {\n          this.props.history.push(\"/\");\n        }\n\n        break;\n      case \"drinko\":\n        view = <SearchIndex games={this.state.games} />;\n        break;\n      case \"game\":\n      default:\n        view = (\n          <Desktop\n            games={this.state.games}\n            editGame={this.editGame}\n            addGame={this.addGame}\n            deleteGame={this.deleteGame}\n            copyGame={this.copyGame}\n            editRule={this.editRule}\n            deleteRule={this.deleteRule}\n            addRule={this.addRule}\n            mode={this.props.mode}\n            match={this.props.match}\n            canEditGame={this.canEditGame}\n            canEditRule={this.canEditRule}\n            canDeleteGame={this.canDeleteGame}\n            canDeleteRule={this.canDeleteRule}\n            userLoggedIn={this.userLoggedIn}\n            getUser={this.getUser}\n            setSessionCombo={this.setSessionCombo}\n            currentComboCount={this.getCurrentSessionComboCount()}\n            createSession={this.createSession}\n            leaveSession={this.leaveSession}\n            joinSession={this.joinSession}\n            currentSession={this.state.currentSession}\n            renderAuthButton={this.renderAuthButton}\n            user={this.state.user}\n          />\n        );\n    }\n\n    //}\n\n    //view = null;\n\n    return (\n      <div className={`App App--${this.state.mobile ? \"mobile\" : \"desktop\"}`}>\n        {view}\n        <ShortCutsModal ref={this.shortCutsModal} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport App from \"./App\";\nimport NotFound from \"./NotFound\";\n\nclass Router extends React.Component {\n  render() {\n    return (\n      <BrowserRouter>\n        <Switch>\n          <Route\n            path=\"/join/:key\"\n            render={(props) => <App {...props} mode=\"join\" />}\n          />\n          <Route\n            path=\"/game/:ID/card\"\n            render={(props) => <App {...props} mode=\"game-card\" />}\n          />\n          <Route\n            path=\"/game/:ID\"\n            render={(props) => <App {...props} mode=\"game\" />}\n          />\n          <Route\n            exact\n            path=\"/signup\"\n            render={(props) => <App {...props} mode=\"signup\" />}\n          />\n          <Route\n            exact\n            path=\"/cms\"\n            render={(props) => <App {...props} mode=\"games\" />}\n          />\n          <Route\n            exact\n            path=\"/\"\n            render={(props) => <App {...props} mode=\"drinko\" />}\n          />\n          <Route component={NotFound} />\n        </Switch>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default Router;\n","import React from 'react';\nimport {render} from 'react-dom';\n\nimport Router from './components/Router';\n\nimport './css/style.scss';\n\nrender (<Router />, document.querySelector('#main'));"],"sourceRoot":""}